<!doctype html><html lang=zh-cn class=no-js><title>drone</title><meta charset=utf-8><meta name=robots content=index,nofollow><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta http-equiv=x-dns-prefetch-control content=on><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=origin-when-cross-origin><meta name=description content='Drone 安装 # docker run -d --restart=always --name=drone-server-8 -p 8080:8000 -p 9000:9000 -e DRONE_VOLUME=/data:/data -e DRONE_HOST=http://drone.hangruan.cn -e DRONE_SECRET=changemypass -e DRONE_OPEN=true -e DRONE_ADMIN=root,rinetd -e DRONE_GOGS=true -e DRONE_GOGS_URL="http://git.hangruan.cn" -v /docker/drone:/var/lib/drone drone/drone:0.8.1 # docker run -d --restart=always --name=drone-agent-8 --link drone-server-8:drone-server -e DRONE_SERVER=drone-server:9000 -e DRONE_SECRET=changemypass -e DRONE_DEBUG=true -v /var/run/docker.sock:/var/run/docker.sock drone/agent:0.8.1 # docker run -d --restart=always --name=drone-agent-8 -e DRONE_SERVER=10.30.216.58:9000 -e DRONE_SECRET=changemypass -e DRONE_DEBUG=true -v /var/run/docker.sock:/var/run/docker.sock drone/agent 常见问题处理 一.'><meta name=author content=rinetd><meta name=google-site-verification content=ifeWsnNpU7w8vP3ii_Cjq-P9LKw3ngVitnMWv4XmJqk><link rel=canonical href=../../../devops/drone/drone/><link rel=icon href=../../../public/favicon.ico><link rel="shortcut icon" href=../../../public/favicon.ico><link rel=stylesheet href=../../../front/css/main.min.css><link href=https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link rel=stylesheet href=//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css><body class="single single-post single-format-standard col-3cm full-width topbar-enabled chrome"><div id=wrapper><header id=header class="top-menu-mobile-on one-mobile-menu top_menu header-ads-desktop  topbar-transparent"><nav class="nav-container group mobile-menu mobile-sticky" id=nav-mobile data-menu-id=header-1><div class=mobile-title-logo-in-header><p class=site-title><a class=custom-logo-link href rel=home title="Pytool | Home">Pytool</a></div><div class="ham__navbar-toggler-two collapsed" title=Menu aria-expanded=false><div class=ham__navbar-span-wrapper><span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span></div></div><div class=nav-text>drone</div><div class="nav-wrap container"><ul class="nav container-inner group mobile-search"><li><form class="searchform themeform" action=https://demo-hueman.presscustomizr.com/><div><input class=search name=s onblur="if(this.value=='')this.value='To search type and hit enter';" onfocus="if(this.value=='To search type and hit enter')this.value='';" value="To search type and hit enter"></div></form></ul><ul id=menu-topbar-menu class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href>Home</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>车联网</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-底层</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/clang/>Clang</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/golang/>Golang</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/cgo/>Cgo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/hugo/>Hugo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/sys/>Sys</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/goher/>Goher</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/python/>Python</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/python/scrapy/>Scrapy</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/java/>Java</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/java/hadoop/>Hadoop</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/php/>Php</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/php/magento/>Magento</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/git/>Git</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../macos/>Macos</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/math/>Math</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../frontend/css/>Css</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>系统监控</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../windows/>Windows</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_端口扫描</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_端口转发(隧道)</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../work/>Work</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../weixin/>Weixin</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../edit/>Edit</a><li class=item><a class=text href=../../../series/>series</a><li class=item><a class=text href=../../../categories/>categories</a><li class=item><a class=text href=../../../tags/>tags</a><li class=item><a class=text href=../../../me/>about</a></ul></div></nav><nav class="nav-container group desktop-menu desktop-sticky" id=nav-topbar data-menu-id=header-2><div class=nav-text>drone</div><div class=topbar-toggle-down><i class="fas fa-angle-double-down" aria-hidden=true data-toggle=down title="Expand menu"></i><i class="fas fa-angle-double-up" aria-hidden=true data-toggle=up title="Collapse menu"></i></div><div class="nav-wrap container"><ul id=menu-topbar-menu-1 class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href=../../../>Home</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>车联网</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-底层</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/clang/>Clang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/golang/>Golang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/python/>Python</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/java/>Java</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/php/>Php</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/git/>Git</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../macos/>Macos</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../post/>Post</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/english/>English</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/seo/>Seo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/life/>Life</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/wiki/>Wiki</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/software/>Software</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/basic/>Basic</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/reship/>Reship</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/math/>Math</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../frontend/css/>Css</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>系统监控</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../windows/>Windows</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_端口扫描</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_端口转发(隧道)</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../work/>Work</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../weixin/>Weixin</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../edit/>Edit</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../series/>series</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../categories/>categories</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../tags/>tags</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../me/>about</a></ul></div></nav></header><div class=container id=page><div class=container-inner><div class=main><div class="main-inner group"><div class=content><div class="pad group page-title"><ul class="meta-single group"><li><span class="fa fa-folder-open"></span><li class=category><a href=../../../categories/devops/ rel="category tag">devops</a></ul></div><div class="pad group"><article class="post type-post status-publish format-standard has-post-thumbnail hentry category-lifestyle tag-classical-grid tag-masonry-grid tag-standard-list"><div class="post-inner group"><h1 class=post-title>drone</h1><p class=post-byline>by · 2016年10月04日 · 3489 Words ·
~7min reading time |
<a href=https://gitlab.com/rinetd/blog/edit/master/devops/drone/Drone.md target=_blank>Improve on <i class="fa fa-gitlab"></i></a><div class=clear></div><div class="entry themeform"><div class=entry-inner></br>原文链接：<a target=_blank href=../../../devops/drone/drone/> drone</a><h2 id=drone-安装>Drone 安装</h2><pre><code class=language-sh># docker run -d --restart=always --name=drone-server-8 -p 8080:8000 -p 9000:9000 -e DRONE_VOLUME=/data:/data -e DRONE_HOST=http://drone.hangruan.cn -e DRONE_SECRET=changemypass -e DRONE_OPEN=true -e DRONE_ADMIN=root,rinetd -e DRONE_GOGS=true -e DRONE_GOGS_URL=&quot;http://git.hangruan.cn&quot; -v /docker/drone:/var/lib/drone  drone/drone:0.8.1

# docker run -d --restart=always --name=drone-agent-8  --link drone-server-8:drone-server -e DRONE_SERVER=drone-server:9000  -e DRONE_SECRET=changemypass -e DRONE_DEBUG=true  -v /var/run/docker.sock:/var/run/docker.sock   drone/agent:0.8.1

# docker run -d --restart=always --name=drone-agent-8  -e DRONE_SERVER=10.30.216.58:9000  -e DRONE_SECRET=changemypass -e DRONE_DEBUG=true  -v /var/run/docker.sock:/var/run/docker.sock   drone/agent
</code></pre><h2 id=常见问题处理>常见问题处理</h2><p>一. Error response from daemon: oci runtime error: container_linux.go:247: starting container process caused &quot;chdir to cwd (\&quot;/go/src/git.chinaoss.com/thinkphp5/jinbaiwei\&quot;) set in config.json failed: no such file or directory&quot;<pre><code>    volumes:
      - /docker/src/${DRONE_REPO_LINK:6}:/go/src/${DRONE_REPO_LINK:6}
</code></pre><h2 id=修复drone-一直运行无法停止>修复drone 一直运行无法停止</h2><p>.tables # 查表结构<br>.schema builds #<br>delete from builds where build_status = &quot;running&quot;;<br>select * from builds where build_id = 72;<h2 id=drone-获取全部的-repositories>drone 获取全部的 Repositories</h2><p>curl -s -b user_sess=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1MDk3NjMzOTIsInRleHQiOiJyb290IiwidHlwZSI6InNlc3MifQ.m5anzfXUKAiqswbiSuz43TVx5xphZiHCc67QoFkEZYs <a href="http://drone.hangruan.cn/api/user/repos?all=true|jq" target=_blank>http://drone.hangruan.cn/api/user/repos?all=true|jq</a> '.[].full_name'<p>-b 使用Cookie<h2 id=命令使用>命令使用</h2><p>drone repo add thinkphp5/jinbaiwei # 启用项目<br>drone repo update --trusted thinkphp5/jinbaiwei # 增加 privileged 权限<br>drone repo repair thinkphp5/jinbaiwei # 增加webhooks repair repository webhooks<p>drone secret add thinkphp5/jinbaiwei --name PLUGIN_KEY --value @/home/ubuntu/.ssh/id_rsa<h1 id=加密变量设置3种方式>加密变量设置3种方式</h1><p>PASSWORD 123456 # 变量设置<br>SSH_KEY ${cat /path/to/.ssh/id_rsa} # 命令返回值<br>SSH_KEY @/path/to/.ssh/id_rsa # 文件内容<h2 id=变量传递>变量传递</h2><h2 id=运行plugins测试>运行Plugins测试</h2><p><code>docker run --rm -e DRONE_REMOTE_URL=https://github.com/garyburd/redigo.git -e DRONE_WORKSPACE=/go/src/github.com/garyburd/redigo -e DRONE_BUILD_EVENT=push -e DRONE_COMMIT_SHA=d8dbe4d94f15fe89232e0402c6e8a0ddf21af3ab -e DRONE_COMMIT_REF=refs/heads/master plugins/git</code><h1 id=drone-0-6>drone 0.6</h1><p><a href=http://readme.drone.io/releases/ target=_blank>http://readme.drone.io/releases/</a><pre><code class=language-yaml>
workspace:
  base: /go
  path: src/${DRONE_REPO_LINK:6}

clone:
  git:
    image: plugins/git
    volumes:
      # - /docker/src/${DRONE_REPO_LINK:6}:/go/src/${DRONE_REPO_LINK:6}
      - /docker/src:/go/src

pipeline:
  maven:
    image: maven
    volumes:
      - /root/.m2:/root/.m2
      - /docker/src:/go/src
    commands:
      - mvn clean package

  # busybox:
  #   image: busybox
  #   volumes:
  #     - /docker/src:/go/src
  #   commands:
  #     - chown -R 33:33 ../${DRONE_REPO_NAME}
  #     # - pwd
  #     # - ls
  #     # - echo $DRONE_WORKSPACE
  #     # - echo $DRONE_REPO
  #     # - echo $DRONE_REPO_LINK
  #     # - echo $DRONE_COMMIT_MESSAGE
  #     # - echo $DRONE_BRANCH
  #     # - if [ ${DRONE_BRANCH} == release ]; then chown -R 33:33 ${LOCAL_VOLUME}/release ; fi
  #     # - if [ ${DRONE_BRANCH} == develop ]; then chown -R 33:33 ${LOCAL_VOLUME}/develop ; fi
  rsync:
    image: drillster/drone-rsync
    volumes:
      - /docker/src:/go/src
      - /docker/${DRONE_REPO}/master:/drone
    hosts:
      - 121.42.244.38
    port: 222
    user: root
    # key: ${PLUGIN_KEY}
    source: target/${DRONE_REPO_NAME}/
    target: /docker/${DRONE_REPO}/master/
    # include:
    #   - &quot;app.tar.gz&quot;
    #   - &quot;app.tar.gz.md5&quot;
    # exclude:
    #   - &quot;**.*&quot;
    recursive: true
    delete: false
    script:
      - ls -l
      # - chown -R 33:33 /docker/${DRONE_REPO}/master
      # - cd /docker/${DRONE_REPO}/master
      # - export DRONE_REPO=${DRONE_REPO}
      # - export DRONE_REPO_NAME=${DRONE_REPO_NAME}
      # - docker-compose up -d
    # 这里脚本是在远程机器/root目录上执行



    # 这里脚本是在远程机器/root目录上执行
    - chown -R 33:33 /docker/${DRONE_REPO}/${DRONE_BRANCH}/
    - sed -i &quot;s|CFG\['url'\] = .*|CFG['url'] = 'http://127.0.0.1/';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - sed -i &quot;s|CFG\['cookie_domain'\] = .*|CFG['cookie_domain'] = '';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - sed -i &quot;s|CFG\['db_host'\] = .*|CFG['db_host'] = 'mysql';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - sed -i &quot;s|CFG\['db_name'\] = .*|CFG['db_name'] = 'destoon';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - sed -i &quot;s|CFG\['db_user'\] = .*|CFG['db_user'] = 'destoon';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - sed -i &quot;s|CFG\['db_pass'\] = .*|CFG['db_pass'] = 'desToon@2017';|g&quot; /docker/${DRONE_REPO}/${DRONE_BRANCH}/config.inc.php
    - docker rm -f ${DRONE_REPO_NAME}; docker run --restart=always -d --name ${DRONE_REPO_NAME} -p 9003:80 --link mariadb:mysql -v /docker/${DRONE_REPO}/${DRONE_BRANCH}/:/var/www/html rinetd/php:5.6-apache
    -



    secrets: [ RSYNC_KEY,PLUGIN_KEY ]
    when:
      branch: develop

  # ssh:
  #   image: appleboy/drone-ssh
  #   volumes:
  #     - /docker/src/${DRONE_REPO_LINK:6}:/go/src/${DRONE_REPO_LINK:6}
  #
  #   host: demo.linyibr.com
  #   # username: root
  #   # password: ${SSH_PASSWORD}
  #   # ssh-key: ${SSH_KEY}
  #   port: 222
  #   script:
  #     - pwd

  #  # script命令是在远程机上执行 PLUGIN_KEY变量并不会传递过来
  #  secrets: [ ssh_password,SSH_KEY,PLUGIN_KEY ]
 # drone secret add --repository linyibr/zhongxinguoan --image=appleboy/drone-ssh --name SSH_KEY --value @/home/ubuntu/.ssh/id_rsa

 # drone secret add --repository bianban/lybb --name PLUGIN_KEY --value @/home/ubuntu/.ssh/id_rsa


 publish:
   image: plugins/docker
   repo: drone/drone
   tag: [ latest ]
   secrets: [ docker_username, docker_password ]
   when:
     branch: master
     event: push

</code></pre><h2 id=drone-包含3个程序-drone-server-drone-agent-drone-cli>Drone 包含3个程序 drone-server drone-agent drone-cli</h2><ol><li>drone-server drone服务端,用来管理CICD<br><li>drone-agent 用来执行具体的任务,如拉取docker容器,挂载本地目录到容器中,以及运行具体的pipeline<br><li>drone-cli drone的客户端,通过命令行实现管理CICD任务,如启用,停用配置安全秘钥等<br><br></ol><h2 id=一-创建drone-server>一、创建drone-server</h2><p>对于一个持续集成系统,最少包含一个 GIT仓库. CI. CD.<p>可以通过命令行查看 <code>drone-server -h</code><p>下面是一些搭建drone-server的参考<h5 id=方式一-docker方式>方式一 docker方式</h5><pre><code>docker run -d --restart=always --name=drone-server-8 -p 8080:8000 -p 9000:9000 
-e DRONE_HOST=http://drone.hangruan.cn 
-e DRONE_OPEN=true 
-e DRONE_ADMIN=root,rinetd 
-e DRONE_SECRET=password 
-e DRONE_GOGS=true 
-e DRONE_GOGS_URL=&quot;http://git.hangruan.cn&quot; 
-v /docker/drone:/var/lib/drone  drone/drone:0.8.1
</code></pre><h5 id=二进制文件方式>二进制文件方式</h5><p>以github为例，必需的参数如下<ol><li>DRONE_OPEN=true，自动创建账户<br><li>DRONE_GITHUB=true，使用github，可选的见【src/github.com/drone/drone/router/middleware/remote.go<br><li>DRONE_GITHUB_CLIENT=${DRONE_GITHUB_CLIENT},从github网站获取<br><li>DRONE_GITHUB_SECRET=${DRONE_GITHUB_SECRET},从github网站获取<br><li>DRONE_SECRET=${DRONE_SECRET}，用于agent连接server的key，具体通过drone/mq验证，使用websocket通道<br><br></ol><p>不使用docker，直接写个脚本即可运行，为了使用依赖管理员权限的功能，增加DRONE_ADMIN，所有的记录存储在后端数据库，默认是sqlite3，当前目录下的drone.sqlite，为了避免在不同的目录出现问题，通过DRONE_DATABASE_DATASOURCE写死路径。<pre><code class=language-bash>#!/bin/bash
export DRONE_OPEN=true
export DRONE_GITHUB=true
export DRONE_GITHUB_SECRET=22222
export DRONE_GITHUB_CLIENT=11111
export DRONE_SECRET=create_a_random_secret_here
export DRONE_DATABASE_DRIVER=sqlite3
export DRONE_DATABASE_DATASOURCE=/home/king/code/go/drone.sqlite
export DRONE_ADMIN=king1,king2
./drone  &quot;${@}&quot;

</code></pre><h3 id=1-remote-远程git仓库配置>1. Remote 远程GIT仓库配置</h3><p>drone-server 支持多种上游git代码仓库服务,如github,gogs等<p>先看源代码中的定义：<br><code>src/github.com/drone/drone/drone/server.go</code><pre><code class=language-go>// helper function to setup the remote from the CLI arguments.
func setupRemote(c *cli.Context) (remote.Remote, error) {
	switch {
	case c.Bool(&quot;github&quot;):
		return setupGithub(c)
	case c.Bool(&quot;gitlab&quot;):
		return setupGitlab(c)
	case c.Bool(&quot;bitbucket&quot;):
		return setupBitbucket(c)
	case c.Bool(&quot;stash&quot;):
		return setupStash(c)
	case c.Bool(&quot;gogs&quot;):
		return setupGogs(c)
	default:
		return nil, fmt.Errorf(&quot;version control system not configured&quot;)
	}
}
</code></pre><p>我们看到GIT仓库的配置参数是在运行服务时就需要配置的，<p>####　2. 数据库设置<br>drone-server 可以运行在多种关系型数据库上，默认是 sqlite3 　<p>支持的数据库见【src/github.com/drone/drone/store/datastore/store.go】<pre><code class=language-go>// helper function to setup the meddler default driver
// based on the selected driver name.
func setupMeddler(driver string) {
	switch driver {
	case &quot;sqlite3&quot;:
		meddler.Default = meddler.SQLite
	case &quot;mysql&quot;:
		meddler.Default = meddler.MySQL
	case &quot;postgres&quot;:
		meddler.Default = meddler.PostgreSQL
	}
}
</code></pre><p>由于需要使用github的oauth认证，以及接收推送，所以服务器必须支持公网访问，若要本地测试，可以参考<strong><a href=http://blog.qiujinwu.com/2017/02/13/ngrok-reverse-proxy/ target=_blank>ngrok反向代理局域网开发机</a></strong><h2 id=二-agent>二、Agent</h2><p>agent用于代理执行docker容器，由于docker运行需要超级管理员权限，所以需要sudo，或者切换到root。为了方便测试，最好是将当前用户添加到docker组，参考<a href=https://my.oschina.net/zhouhui321/blog/788431 target=_blank>https://my.oschina.net/zhouhui321/blog/788431</a><pre><code class=language-bash>sudo gpasswd -a ${USER} docker
sudo service docker restart
</code></pre><p>agent完整参数见【src/github.com/drone/drone/drone/agent/agent.go】，必需的参数如下<ol><li>DRONE_SERVER=ws://${drone-server}/ws/broker，server的路径<br><li>DRONE_SECRET=${DRONE_SECRET}，在server中配置的token<br><br></ol><p>同样可以export两个环境变量之后，直接drone agent即可<h2 id=三-客户端-cli>三、客户端 cli</h2><p>运行上述两个后台之后，就可以用浏览器访问【http//${drone-server}】，若未登录点击【登录/login】会自动跳转到github进行认证，由于设置了【DRONE_OPEN=true】所以认证成功之后，会自动创建以github用户名的账户。<h1 id=drone-0-5>drone 0.5</h1><p><a href=http://discourse.drone.io/ target=_blank>Drone</a><br>实例：<br><a href=https://github.com/rack-roles target=_blank>https://github.com/rack-roles</a><br><a href=https://github.com/drone-demos target=_blank>https://github.com/drone-demos</a><p>插件：<br><a href=https://github.com/drone-plugins target=_blank>drone-plugins</a><br>[](<a href=https://github.com/appleboy target=_blank>https://github.com/appleboy</a>)<br>Ansible role to install drone.io<br><a href=https://github.com/zenweasel/ansible-drone target=_blank>zenweasel/ansible-drone</a><br><a href=https://github.com/kbrebanov/ansible-drone target=_blank>kbrebanov/ansible-drone: Ansible drone role</a><h1 id=启动-server>启动 server</h1><p>--debug start the server in debug mode [$DRONE_DEBUG]<br>--server-addr &quot;:8000&quot; server address [$DRONE_SERVER_ADDR]<br>--server-cert server ssl cert [$DRONE_SERVER_CERT]<br>--server-key server ssl key [$DRONE_SERVER_KEY]<br>--admin [--admin option --admin option] list of admin users [$DRONE_ADMIN]<br>--orgs [--orgs option --orgs option] list of approved organizations [$DRONE_ORGS]<br>--open open user registration [$DRONE_OPEN]<br>--yaml &quot;.drone.yml&quot; build configuraton file name [$DRONE_YAML]<br>--cache-tty &quot;15m0s&quot; cache duration [$DRONE_CACHE_TTY]<br>--agent-secret agent secret passcode [$DRONE_AGENT_SECRET, $DRONE_SECRET]<br>--driver &quot;sqlite3&quot; database driver [$DRONE_DATABASE_DRIVER, $DATABASE_DRIVER]<br>--datasource &quot;drone.sqlite&quot; database driver configuration string [$DRONE_DATABASE_DATASOURCE, $DATABASE_CONFIG]<h2 id=github>github</h2><ol><li><a href=https://github.com/settings/developers target=_blank>OAuth applications</a><br>配置授权应用的回调地址：Authorization callback URL: <a href=http://kbook.org/authorize target=_blank>http://kbook.org/authorize</a><br><li>启动drone服务<br>drone server --server-addr=&quot;:80&quot; --agent-secret=16239bb0e63719b6f133 --open --admin=rinetd --github --github-client=16239bb0e63719b6f133 --github-secret=f854840a2217af573aaf9cbd7119d445e7ab8806<br><br><br><br></ol><h2 id=gogs>gogs</h2><p>--gogs gogs driver is enabled [$DRONE_GOGS]<br>--gogs-server &quot;<a href='https://github.com"' target=_blank>https://github.com&quot;</a> gogs server address [$DRONE_GOGS_URL]<br>--gogs-git-username gogs service account username [$DRONE_GOGS_GIT_USERNAME]<br>--gogs-git-password gogs service account password [$DRONE_GOGS_GIT_PASSWORD]<br>--gogs-private-mode gogs private mode enabled [$DRONE_GOGS_PRIVATE_MODE]<br>--gogs-skip-verify gogs skip ssl verification [$DRONE_GOGS_SKIP_VERIFY]<ol><li>启动server 域名为：kbook.org 端口<br><code>drone server --debug --server-addr=&quot;:80&quot; --agent-secret=123456 --open --admin=rinetd --gogs --gogs-server=&quot;http://git.yimengapp.com&quot; --gogs-private-mode --gogs-skip-verify --gogs-git-username=rinetd --gogs-git-password=</code><br>agents can connect with token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoiMTIzNDU2IiwidHlwZSI6ImFnZW50In0.A3W7uJIZovh5Gu1mfOAQxjV9E_2T6GgOowKP9CH7-dc<br><li>启动agent<br><code>drone agent --drone-server=ws://kbook.org/ws/broker --drone-token=123456</code><br><li>客户端<br>drone -s <a href=http://kbook.org target=_blank>http://kbook.org</a> -t eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoicmluZXRkIiwidHlwZSI6InVzZXIifQ.0ZFhdVjrBHert1yuWBk3QFO9sKVm4iPzjTkr1l024c8 repo ls<br>drone -s <a href=http://kbook.org target=_blank>http://kbook.org</a> -t eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0Ijoic2RseWxzaGwiLCJ0eXBlIjoidXNlciJ9.pz6ip52zIZKumzVxamDk2wCgppHnp1HiZ4DTMB95h40 repo ls<br><br><br></ol><h1 id=insufficient-privileges-to-use-privileged-mode>Insufficient privileges to use privileged mode</h1><p>drone exec --repo.trusted<ol><li>通过drone 命令<br>drone server --server-addr=&quot;:80&quot; --github --github-client=16239bb0e63719b6f133 --github-secret=f854840a2217af573aaf9cbd7119d445e7ab8806 --agent-secret=16239bb0e63719b6f133 --open<br><br></ol><p>export DRONE_SERVER=<a href=http://kbook.org target=_blank>http://kbook.org</a><br>export DRONE_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoiMTYyMzliYjBlNjM3MTliNmYxMzMiLCJ0eXBlIjoiYWdlbnQifQ.A4gUVyDDECZDhF429f0fqrZ0pLzL84Pg_iyK9Td8VKs<br>drone server -s <a href=http://kbook.org target=_blank>http://kbook.org</a> -t eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoiMTYyMzliYjBlNjM3MTliNmYxMzMiLCJ0eXBlIjoiYWdlbnQifQ.A4gUVyDDECZDhF429f0fqrZ0pLzL84Pg_iyK9Td8VKs<ol><li>通过docker 运行<br><br></ol><h2 id=生产模式>生产模式</h2><p><code>docker run -d --restart=always --name=drone -p 80:8000 -e DRONE_OPEN=true -e DRONE_SECRET=123456 -e DRONE_GOGS=true -e DRONE_GOGS_URL=&quot;http://git.yimengapp.com&quot; -v /var/lib/drone:/var/lib/drone drone/drone:0.5</code><p><code>docker run -d --restart=always --name=drone-agent -e DRONE_SERVER=ws://deadcode.cn/ws/broker -e DRONE_SECRET=123456 -v /var/run/docker.sock:/var/run/docker.sock drone/drone:0.5 agent</code><h3 id=drone-yimengapp-com>drone.yimengapp.com</h3><p><code>docker run -d --restart=always --name=drone-server -p 8000:8000 -e DRONE_OPEN=true -e DRONE_ADMIN=rinetd -e DRONE_SECRET=123456 -e DRONE_GOGS=true -e DRONE_GOGS_URL=&quot;http://git.yimengapp.com&quot; -v /var/lib/drone:/var/lib/drone drone/drone:0.5</code><p><code>docker run -d --restart=always --name=drone-agent -e DRONE_SERVER=ws://drone.yimengapp.com/ws/broker -e DRONE_SECRET=123456 -v /var/run/docker.sock:/var/run/docker.sock drone/drone:0.5 agent</code><br>export DRONE_SERVER=<a href=http://drone.yimengapp.com target=_blank>http://drone.yimengapp.com</a><br>export DRONE_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoicmluZXRkIiwidHlwZSI6InVzZXIifQ.xvEAZXohg5RCDiGHb0T9efLFw5xk4eqVv-BDIb5EwtI<h2 id=drone-linyibr-com>drone.linyibr.com</h2><p><code>docker run -d --restart=always --name=drone-server -p 8000:8000 -e DRONE_OPEN=true -e DRONE_ADMIN=rinetd -e DRONE_SECRET= -e DRONE_GOGS=true -e DRONE_GOGS_URL=&quot;http://git.linyibr.com&quot; -v /docker/drone:/var/lib/drone drone/drone:0.5</code><p><code>docker run -d --restart=always --name=drone-agent -e DRONE_SERVER=ws://drone.linyibr.com/ws/broker -e DRONE_SECRET= -v /var/run/docker.sock:/var/run/docker.sock drone/drone:0.5 agent</code><p>#调试模式<br><code>docker run -it --rm --name=drone -p 80:8000 -e DRONE_DEBUG=true -e DRONE_OPEN=true -e DRONE_SECRET=123456 -e DRONE_GOGS=true -e DRONE_GOGS_URL=&quot;http://git.yimengapp.com&quot; -v /var/lib/drone:/var/lib/drone drone/drone:0.5</code><p><code>docker run -it --rm --name=drone-agent -e DRONE_DEBUG=true -e DRONE_SERVER=ws://kbook.org/ws/broker -e DRONE_SECRET=123456 -v /var/run/docker.sock:/var/run/docker.sock drone/drone:0.5 agent</code><p>登录DRONE_SERVER <a href=http://kbook.org target=_blank>http://kbook.org</a> 后可以获取到DRONE_TOKEN<br>export DRONE_SERVER=<a href=http://deadcode.cn target=_blank>http://deadcode.cn</a><br>export DRONE_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoicmluZXRkIiwidHlwZSI6InVzZXIifQ.oqKKmAhSJdzgmHo0Tw8QR7-BPAAefQmS51lJQXMpLzY<p>drone repo ls 查看激活的repo<br>drone repo add yimeng/ym-ios 激活指定repo<br>drone repo rm yimeng/ym-ios 禁用指定repo<pre><code>drone repo ls
drone repo ls --org=github
drone repo ls --format=&quot;{{ .Link }}&quot;
drone repo info octocat/hello-world
drone repo info --format=&quot;{{ .Link }}&quot; octocat/hello-world
drone repo add yimeng/ym-ios 激活指定repo
drone repo rm yimeng/ym-ios  禁用指定repo
drone secret ls octocat/hello-world
drone secret add
drone secret rm
drone build info
drone build list yimeng/php-yimeng #查看运行状态
drone build last yimeng/php-yimeng
drone build start
drone build stop
drone build queue
drone deploy
drone sign
drone exec
drone user ls
drone user info
drone user add
drone user rm
</code></pre><h2 id=setting-up-a-drone-server-to-use-tls-ssl>setting up a drone server to use TLS/SSL</h2><p>If you were using certificates with drone 0.4 it will be the same configuration, although the names perhaps changed slightly. You will need to pass the following variables to your container:<p>DRONE_SERVER_CERT=/path/to/drone.cert<br>DRONE_SERVER_KEY=/path/to/drone.key<p>These certificates will exist on your host machine, which means their paths need to be mounted into your drone server:<p>--volume=/path/to/drone.cert:/path/to/drone.cert<br>--volume=/path/to/drone.key:/path/to/drone.key<p>You can also instruct Docker to expose 443 and forward to drone's default port 8000<p>-p 443:8000<p>When you configure the agent, you will of course need to update the configuration to use wss. You can read more in the agent docs, but essentially something like this:<p>DRONE_SERVER=wss://drone.server.com/ws/broker<p>And finally, if you get cert errors I recommend including the cert chain in your bund;e. Bottom line, drone does not parse certs. Drone uses http.ListenAndServeTLS(cert, key). So any cert issues are coming from the standard library directly, and questions should therefore be directed to the Go support channels.<p>#################################################################################<h1 id=docker-agent>docker agent</h1><p>Configuration<p>You will configure agent with the drone server address and shared secret:<p>-e DRONE_SERVER=ws://drone.server.com/ws/broker<br>-e DRONE_SECRET=...<p>You should use wss if your drone server is using TLS:<p>-e DRONE_SERVER=wss://drone.server.com/ws/broker<p>You will configure the agent with access to the host machine’s docker daemon:<p>-v /var/run/docker.sock:/var/run/docker.sock<p>Installation<p>Create and run your container:<pre><code>docker run -d \
  -e DRONE_SERVER=ws:// \
  -e DRONE_SECRET=password \
  -v /var/run/docker.sock:/var/run/docker.sock \
  --restart=always \
  --name=drone-agent \
  drone/drone:0.5 agent
</code></pre><p>对比：<br><a href=https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software target=_blank>https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software</a><p><a href=http://readme.drone.io/0.5 target=_blank>drone 0.5 文档</a><br><a href=http://readme.drone.io/0.5/manage/server/ target=_blank>drone 0.5 文档</a><br><a href=https://github.com/drone-demos target=_blank>drone demos</a><h3 id=documentation>Documentation</h3><p>Drone documentation is organized into several categories<ul><li><a href=http://readme.drone.io/setup/overview target=_blank>Setup Guide</a><br><li><a href=http://readme.drone.io/usage/overview target=_blank>Build Guide</a><br><li><a href=http://readme.drone.io/devs/plugins target=_blank>Plugin Guide</a><br><li><a href=http://readme.drone.io/devs/cli/ target=_blank>CLI Reference</a><br><li><a href=http://readme.drone.io/devs/api/builds target=_blank>API Reference</a><br><br></ul><h3 id=documentation-for-0-5-unstable>Documentation for 0.5 (unstable)</h3><p>If you are using the 0.5 unstable release (master branch) please see the updated documentation:<ul><li><a href=http://readme.drone.io/0.5/installation/server/ target=_blank>Setup Guide</a><br><li><a href=http://readme.drone.io/0.5/usage/overview/ target=_blank>Build Guide</a><br><br></ul><h2 id=install>install</h2><ol><li>SQlite3<br>apt-get install libsqlite3-dev<br>yum install sqlite-devel<br><li>drone<br>wget downloads.drone.io/master/drone.deb &amp; dpkg -i drone.deb<br>Created symlink from /etc/systemd/system/multi-user.target.wants/drone.service to /lib/systemd/system/drone.service.<br>wget downloads.drone.io/master/drone.rpm &amp; yum localinstall drone.rpm<br><br></ol><h2 id=config>config</h2><p>##<p>drone --server=192.168.1.106:8000 --token=16239bb0e63719b6f133<br>curl -i '<a href="https://api.github.com/users/whatever?client_id=16239bb0e63719b6f133&amp;client_secret=f854840a2217af573aaf9cbd7119d445e7ab8806'" target=_blank>https://api.github.com/users/whatever?client_id=16239bb0e63719b6f133&amp;client_secret=f854840a2217af573aaf9cbd7119d445e7ab8806'</a><h2 id=运行drone-server>运行drone server</h2><p>start on (filesystem and net-device-up)<p>chdir /var/lib/drone<br>console log<p>script<pre><code>    /usr/local/bin/droned --config=/etc/drone/drone.toml
</code></pre><p>end script<br>~<br>配置文件 /etc/drone/drone.toml<p>--debug start the server in debug mode [$DRONE_DEBUG]<br>--server-addr &quot;:8000&quot; server address [$DRONE_SERVER_ADDR]<br>--server-cert server ssl cert [$DRONE_SERVER_CERT]<br>--server-key server ssl key [$DRONE_SERVER_KEY]<br>--admin [--admin option --admin option] list of admin users [$DRONE_ADMIN]<br>--orgs [--orgs option --orgs option] list of approved organizations [$DRONE_ORGS]<br>--open open user registration [$DRONE_OPEN]<br>--yaml &quot;.drone.yml&quot; build configuraton file name [$DRONE_YAML]<br>--cache-tty &quot;15m0s&quot; cache duration [$DRONE_CACHE_TTY]<br>--agent-secret agent secret passcode [$DRONE_AGENT_SECRET, $DRONE_SECRET]<br>--driver &quot;sqlite3&quot; database driver [$DRONE_DATABASE_DRIVER, $DATABASE_DRIVER]<br>--datasource &quot;drone.sqlite&quot; database driver configuration string [$DRONE_DATABASE_DATASOURCE, $DATABASE_CONFIG]<br>--github github driver is enabled [$DRONE_GITHUB]<br>--github-server &quot;<a href='https://github.com"' target=_blank>https://github.com&quot;</a> github server address [$DRONE_GITHUB_URL]<br>--github-context &quot;continuous-integration/drone&quot; github status context [$DRONE_GITHUB_CONTEXT]<br>--github-client github oauth2 client id [$DRONE_GITHUB_CLIENT]<br>--github-secret github oauth2 client secret [$DRONE_GITHUB_SECRET]<br>--github-scope [--github-scope option --github-scope option] github oauth scope [$DRONE_GITHUB_SCOPE]<br>--github-git-username github machine user username [$DRONE_GITHUB_GIT_USERNAME]<br>--github-git-password github machine user password [$DRONE_GITHUB_GIT_PASSWORD]<br>--github-merge-ref github pull requests use merge ref [$DRONE_GITHUB_MERGE_REF]<br>--github-private-mode github is running in private mode [$DRONE_GITHUB_PRIVATE_MODE]<br>--github-skip-verify github skip ssl verification [$DRONE_GITHUB_SKIP_VERIFY]<br>--gogs gogs driver is enabled [$DRONE_GOGS]<br>--gogs-server &quot;<a href='https://github.com"' target=_blank>https://github.com&quot;</a> gogs server address [$DRONE_GOGS_URL]<br>--gogs-git-username gogs service account username [$DRONE_GOGS_GIT_USERNAME]<br>--gogs-git-password gogs service account password [$DRONE_GOGS_GIT_PASSWORD]<br>--gogs-private-mode gogs private mode enabled [$DRONE_GOGS_PRIVATE_MODE]<br>--gogs-skip-verify gogs skip ssl verification [$DRONE_GOGS_SKIP_VERIFY]<br>--bitbucket bitbucket driver is enabled [$DRONE_BITBUCKET]<br>--bitbucket-client bitbucket oauth2 client id [$DRONE_BITBUCKET_CLIENT]<br>--bitbucket-secret bitbucket oauth2 client secret [$DRONE_BITBUCKET_SECRET]<br>--gitlab gitlab driver is enabled [$DRONE_GITLAB]<br>--gitlab-server &quot;<a href='https://gitlab.com"' target=_blank>https://gitlab.com&quot;</a> gitlab server address [$DRONE_GITLAB_URL]<br>--gitlab-client gitlab oauth2 client id [$DRONE_GITLAB_CLIENT]<br>--gitlab-secret gitlab oauth2 client secret [$DRONE_GITLAB_SECRET]<br>--gitlab-git-username gitlab service account username [$DRONE_GITLAB_GIT_USERNAME]<br>--gitlab-git-password gitlab service account password [$DRONE_GITLAB_GIT_PASSWORD]<br>--gitlab-skip-verify gitlab skip ssl verification [$DRONE_GITLAB_SKIP_VERIFY]<br>--gitlab-private-mode gitlab is running in private mode [$DRONE_GITLAB_PRIVATE_MODE]<br>--stash stash driver is enabled [$DRONE_STASH]<br>--stash-server stash server address [$DRONE_STASH_URL]<br>--stash-consumer-key stash oauth1 consumer key [$DRONE_STASH_CONSUMER_KEY]<br>--stash-consumer-rsa stash oauth1 private key file [$DRONE_STASH_CONSUMER_RSA]<br>--stash-git-username stash service account username [$DRONE_STASH_GIT_USERNAME]<br>--stash-git-password stash service account password [$DRONE_STASH_GIT_PASSWORD]<br>--stash-skip-verify stash skip ssl verification [$DRONE_STASH_SKIP_VERIFY]</div><div class=clear></div></div></div></article><div class=clear></div><p class=post-tags><span class="fa fa-tags">Tags:</span>
<a rel=tag href=../../../tags/drone>drone</a><div id=related-posts><div class=related-inner></div></div><section id=comments class=themeform></section><section id=comments class=themeform></section></div></div><div class="sidebar s1 collapsed" data-position=left data-layout=col-3cm data-sb-id=s1><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>Follow:<ul class=social-links><li><a class=social-tooltip href=mailto: title=Email><i class="fa fa-envelope"></i></a><li><a class=social-tooltip href=//github.com/ title=GitHub><i class="fa fa-github"></i></a><li><a class=social-tooltip title="RSS Feed" aria-label="RSS Feed" href=../../../feed target=_blank style=color:#ffffffb2><i class="fa fa-rss"></i></a></ul></div><ul class="post-nav group"><li class=previous><a href=../../../devops/drone/drone%E6%8F%92%E4%BB%B6/ rel=prev><i class="fa fa-chevron-left"></i><strong>Previous Post</strong>
<span>drone</span></a></ul><div id=categories-2 class="widget widget_categories"><h3>分类</h3><ul><li class="cat-item cat-item-1"><a href=../../../categories/ai/>Ai</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/algorithm/>Algorithm</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/android/>Android</a>
<small>(17)</small><li class="cat-item cat-item-1"><a href=../../../categories/ansible/>Ansible</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/beats/>Beats</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/busybox/>Busybox</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/caffe/>Caffe</a>
<small>(21)</small><li class="cat-item cat-item-1"><a href=../../../categories/cgo/>Cgo</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/clang/>Clang</a>
<small>(40)</small><li class="cat-item cat-item-1"><a href=../../../categories/cmd/>Cmd</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/cpp/>Cpp</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/cross_compile/>Cross_compile</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/css/>Css</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/dart/>Dart</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/database/>Database</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/dataset/>Dataset</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/deeplearning/>Deeplearning</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/devops/>Devops</a>
<small>(70)</small><li class="cat-item cat-item-1"><a href=../../../categories/docker/>Docker</a>
<small>(18)</small><li class="cat-item cat-item-1"><a href=../../../categories/dts/>Dts</a>
<small>(5)</small><li class="cat-item cat-item-1"><a href=../../../categories/elasticsearch/>Elasticsearch</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/english/>English</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/freertos/>Freertos</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/front-end/>Front-End</a>
<small>(20)</small><li class="cat-item cat-item-1"><a href=../../../categories/golang/>Golang</a>
<small>(136)</small><li class="cat-item cat-item-1"><a href=../../../categories/hacker/>Hacker</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hardware/>Hardware</a>
<small>(22)</small><li class="cat-item cat-item-1"><a href=../../../categories/hi3519a/>Hi3519a</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/hi3559/>Hi3559</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hisi/>Hisi</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hisilicon/>Hisilicon</a>
<small>(57)</small><li class="cat-item cat-item-1"><a href=../../../categories/jetson/>Jetson</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/js/>Js</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/jumpserver/>Jumpserver</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/kernel/>Kernel</a>
<small>(15)</small><li class="cat-item cat-item-1"><a href=../../../categories/libev/>Libev</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/linux/>Linux</a>
<small>(94)</small><li class="cat-item cat-item-1"><a href=../../../categories/linux-system/>Linux-System</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../categories/linux-%E5%91%BD%E4%BB%A4/>Linux-命令</a>
<small>(120)</small><li class="cat-item cat-item-1"><a href=../../../categories/mac/>Mac</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/machinelearn/>Machinelearn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/machinelearning/>Machinelearning</a>
<small>(11)</small><li class="cat-item cat-item-1"><a href=../../../categories/macos/>Macos</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../categories/math/>Math</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/matplotlib/>Matplotlib</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/mpp/>Mpp</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../categories/mysql/>Mysql</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/ncnn/>Ncnn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/network/>Network</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/nginx/>Nginx</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/nnie/>Nnie</a>
<small>(13)</small><li class="cat-item cat-item-1"><a href=../../../categories/node/>Node</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/numpy/>Numpy</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/opencpu/>Opencpu</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/opencv/>Opencv</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/pandas/>Pandas</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/platform/>Platform</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/post/>Post</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/pyqt/>Pyqt</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../categories/python/>Python</a>
<small>(31)</small><li class="cat-item cat-item-1"><a href=../../../categories/pytorch/>Pytorch</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../categories/raspi/>Raspi</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/rk3288/>Rk3288</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../categories/rk3399/>Rk3399</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/rtmp/>Rtmp</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/scikit/>Scikit</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/shell/>Shell</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/socket/>Socket</a>
<small>(5)</small><li class="cat-item cat-item-1"><a href=../../../categories/stm32/>Stm32</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../categories/stm8/>Stm8</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/weixin/>Weixin</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/windows/>Windows</a>
<small>(22)</small><li class="cat-item cat-item-1"><a href=../../../categories/work/>Work</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/yolo/>Yolo</a>
<small>(16)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/>前端技术</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%8D%8F%E8%AE%AE/>协议</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/>嵌入式</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B7%A5%E5%85%B7/>工具</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/>常用算法</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/>微服务</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/>排列组合</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a>
<small>(37)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91/>文本编辑</a>
<small>(30)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/>正则表达式</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%94%9F%E6%B4%BB%E6%8A%80%E5%B7%A7/>生活技巧</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%A8%8B%E5%BA%8F%E5%91%98/>程序员</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/>网络安全</a>
<small>(40)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7/>集群监控</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/>静态博客</a>
<small>(15)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%AB%98%E6%95%B0/>高数</a>
<small>(2)</small></ul></div></div></div><div class="sidebar s2 collapsed" data-position=right data-layout=col-3cm data-sb-id=s2><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>More</div><ul class="post-nav group"><li class=next><a href=../../../devops/gogs/ rel=next><i class="fa fa-chevron-right"></i><strong>Next post</strong>
<span>docker安装gogs</span></a></ul><div id=tag_cloud-2 class="widget widget_tag_cloud"><h3>标签云</h3><div class="tagcloud post-tags"><a rel=tag href=../../../tags/ai/ class=tag-link-7 title="1 Posts">ai<small>(7)</small></a>
<a rel=tag href=../../../tags/ansible/ class=tag-link-19 title="1 Posts">ansible<small>(19)</small></a>
<a rel=tag href=../../../tags/awesome/ class=tag-link-3 title="1 Posts">awesome<small>(3)</small></a>
<a rel=tag href=../../../tags/bfc/ class=tag-link-2 title="1 Posts">bfc<small>(2)</small></a>
<a rel=tag href=../../../tags/c/ class=tag-link-5 title="1 Posts">c<small>(5)</small></a>
<a rel=tag href=../../../tags/caffe/ class=tag-link-21 title="1 Posts">caffe<small>(21)</small></a>
<a rel=tag href=../../../tags/centos7/ class=tag-link-2 title="1 Posts">centos7<small>(2)</small></a>
<a rel=tag href=../../../tags/cgo/ class=tag-link-10 title="1 Posts">cgo<small>(10)</small></a>
<a rel=tag href=../../../tags/clang/ class=tag-link-40 title="1 Posts">clang<small>(40)</small></a>
<a rel=tag href=../../../tags/cmd/ class=tag-link-2 title="1 Posts">cmd<small>(2)</small></a>
<a rel=tag href=../../../tags/cpp/ class=tag-link-7 title="1 Posts">cpp<small>(7)</small></a>
<a rel=tag href=../../../tags/cross_compile/ class=tag-link-9 title="1 Posts">cross_compile<small>(9)</small></a>
<a rel=tag href=../../../tags/css/ class=tag-link-20 title="1 Posts">css<small>(20)</small></a>
<a rel=tag href=../../../tags/css3/ class=tag-link-2 title="1 Posts">css3<small>(2)</small></a>
<a rel=tag href=../../../tags/curd/ class=tag-link-3 title="1 Posts">curd<small>(3)</small></a>
<a rel=tag href=../../../tags/curl/ class=tag-link-2 title="1 Posts">curl<small>(2)</small></a>
<a rel=tag href=../../../tags/dataset/ class=tag-link-2 title="1 Posts">dataset<small>(2)</small></a>
<a rel=tag href=../../../tags/devops/ class=tag-link-3 title="1 Posts">devops<small>(3)</small></a>
<a rel=tag href=../../../tags/docker/ class=tag-link-21 title="1 Posts">docker<small>(21)</small></a>
<a rel=tag href=../../../tags/drone/ class=tag-link-22 title="1 Posts">drone<small>(22)</small></a>
<a rel=tag href=../../../tags/dts/ class=tag-link-6 title="1 Posts">dts<small>(6)</small></a>
<a rel=tag href=../../../tags/elasticsearch/ class=tag-link-9 title="1 Posts">elasticsearch<small>(9)</small></a>
<a rel=tag href=../../../tags/emacs/ class=tag-link-12 title="1 Posts">emacs<small>(12)</small></a>
<a rel=tag href=../../../tags/encode/ class=tag-link-3 title="1 Posts">encode<small>(3)</small></a>
<a rel=tag href=../../../tags/english/ class=tag-link-8 title="1 Posts">english<small>(8)</small></a>
<a rel=tag href=../../../tags/es6/ class=tag-link-2 title="1 Posts">es6<small>(2)</small></a>
<a rel=tag href=../../../tags/etcd/ class=tag-link-4 title="1 Posts">etcd<small>(4)</small></a>
<a rel=tag href=../../../tags/flannel/ class=tag-link-2 title="1 Posts">flannel<small>(2)</small></a>
<a rel=tag href=../../../tags/git/ class=tag-link-6 title="1 Posts">git<small>(6)</small></a>
<a rel=tag href=../../../tags/github/ class=tag-link-2 title="1 Posts">github<small>(2)</small></a>
<a rel=tag href=../../../tags/golang/ class=tag-link-150 title="1 Posts">golang<small>(150)</small></a>
<a rel=tag href=../../../tags/gradle/ class=tag-link-3 title="1 Posts">gradle<small>(3)</small></a>
<a rel=tag href=../../../tags/haproxy/ class=tag-link-5 title="1 Posts">haproxy<small>(5)</small></a>
<a rel=tag href=../../../tags/hardware/ class=tag-link-22 title="1 Posts">hardware<small>(22)</small></a>
<a rel=tag href=../../../tags/hexo/ class=tag-link-3 title="1 Posts">hexo<small>(3)</small></a>
<a rel=tag href=../../../tags/hi3519a/ class=tag-link-4 title="1 Posts">hi3519a<small>(4)</small></a>
<a rel=tag href=../../../tags/hisilicon/ class=tag-link-57 title="1 Posts">hisilicon<small>(57)</small></a>
<a rel=tag href=../../../tags/html/ class=tag-link-2 title="1 Posts">html<small>(2)</small></a>
<a rel=tag href=../../../tags/http/ class=tag-link-6 title="1 Posts">http<small>(6)</small></a>
<a rel=tag href=../../../tags/hugo/ class=tag-link-14 title="1 Posts">hugo<small>(14)</small></a>
<a rel=tag href=../../../tags/imagemagick/ class=tag-link-2 title="1 Posts">imagemagick<small>(2)</small></a>
<a rel=tag href=../../../tags/ip/ class=tag-link-3 title="1 Posts">ip<small>(3)</small></a>
<a rel=tag href=../../../tags/iproute2/ class=tag-link-5 title="1 Posts">iproute2<small>(5)</small></a>
<a rel=tag href=../../../tags/iptables/ class=tag-link-17 title="1 Posts">iptables<small>(17)</small></a>
<a rel=tag href=../../../tags/javascript/ class=tag-link-19 title="1 Posts">javascript<small>(19)</small></a>
<a rel=tag href=../../../tags/jetson/ class=tag-link-3 title="1 Posts">jetson<small>(3)</small></a>
<a rel=tag href=../../../tags/jquery/ class=tag-link-12 title="1 Posts">jquery<small>(12)</small></a>
<a rel=tag href=../../../tags/js/ class=tag-link-10 title="1 Posts">js<small>(10)</small></a>
<a rel=tag href=../../../tags/jumpserver/ class=tag-link-2 title="1 Posts">jumpserver<small>(2)</small></a>
<a rel=tag href=../../../tags/jwt/ class=tag-link-3 title="1 Posts">jwt<small>(3)</small></a>
<a rel=tag href=../../../tags/kernel/ class=tag-link-15 title="1 Posts">kernel<small>(15)</small></a>
<a rel=tag href=../../../tags/kubernetes/ class=tag-link-11 title="1 Posts">kubernetes<small>(11)</small></a>
<a rel=tag href=../../../tags/libev/ class=tag-link-2 title="1 Posts">libev<small>(2)</small></a>
<a rel=tag href=../../../tags/linux/ class=tag-link-22 title="1 Posts">linux<small>(22)</small></a>
<a rel=tag href=../../../tags/linux-system/ class=tag-link-8 title="1 Posts">linux-system<small>(8)</small></a>
<a rel=tag href=../../../tags/lvs/ class=tag-link-8 title="1 Posts">lvs<small>(8)</small></a>
<a rel=tag href=../../../tags/machinelearn/ class=tag-link-3 title="1 Posts">machinelearn<small>(3)</small></a>
<a rel=tag href=../../../tags/machinelearning/ class=tag-link-11 title="1 Posts">machinelearning<small>(11)</small></a>
<a rel=tag href=../../../tags/macos/ class=tag-link-14 title="1 Posts">macos<small>(14)</small></a>
<a rel=tag href=../../../tags/makefile/ class=tag-link-2 title="1 Posts">makefile<small>(2)</small></a>
<a rel=tag href=../../../tags/mariadb/ class=tag-link-9 title="1 Posts">mariadb<small>(9)</small></a>
<a rel=tag href=../../../tags/math/ class=tag-link-7 title="1 Posts">math<small>(7)</small></a>
<a rel=tag href=../../../tags/matplotlib/ class=tag-link-3 title="1 Posts">matplotlib<small>(3)</small></a>
<a rel=tag href=../../../tags/maven/ class=tag-link-2 title="1 Posts">maven<small>(2)</small></a>
<a rel=tag href=../../../tags/meteor/ class=tag-link-7 title="1 Posts">meteor<small>(7)</small></a>
<a rel=tag href=../../../tags/ml/ class=tag-link-3 title="1 Posts">ml<small>(3)</small></a>
<a rel=tag href=../../../tags/mpp/ class=tag-link-12 title="1 Posts">mpp<small>(12)</small></a>
<a rel=tag href=../../../tags/mysql/ class=tag-link-61 title="1 Posts">mysql<small>(61)</small></a>
<a rel=tag href=../../../tags/ncnn/ class=tag-link-3 title="1 Posts">ncnn<small>(3)</small></a>
<a rel=tag href=../../../tags/netns/ class=tag-link-2 title="1 Posts">netns<small>(2)</small></a>
<a rel=tag href=../../../tags/network/ class=tag-link-2 title="1 Posts">network<small>(2)</small></a>
<a rel=tag href=../../../tags/nginx/ class=tag-link-28 title="1 Posts">nginx<small>(28)</small></a>
<a rel=tag href=../../../tags/nmap/ class=tag-link-2 title="1 Posts">nmap<small>(2)</small></a>
<a rel=tag href=../../../tags/nnie/ class=tag-link-13 title="1 Posts">nnie<small>(13)</small></a>
<a rel=tag href=../../../tags/node/ class=tag-link-4 title="1 Posts">node<small>(4)</small></a>
<a rel=tag href=../../../tags/nosql/ class=tag-link-8 title="1 Posts">nosql<small>(8)</small></a>
<a rel=tag href=../../../tags/npm/ class=tag-link-3 title="1 Posts">npm<small>(3)</small></a>
<a rel=tag href=../../../tags/numpy/ class=tag-link-4 title="1 Posts">numpy<small>(4)</small></a>
<a rel=tag href=../../../tags/oauth2/ class=tag-link-2 title="1 Posts">oauth2<small>(2)</small></a>
<a rel=tag href=../../../tags/opencv/ class=tag-link-10 title="1 Posts">opencv<small>(10)</small></a>
<a rel=tag href=../../../tags/openssl/ class=tag-link-3 title="1 Posts">openssl<small>(3)</small></a>
<a rel=tag href=../../../tags/pandoc/ class=tag-link-2 title="1 Posts">pandoc<small>(2)</small></a>
<a rel=tag href=../../../tags/php/ class=tag-link-4 title="1 Posts">php<small>(4)</small></a>
<a rel=tag href=../../../tags/post/ class=tag-link-4 title="1 Posts">post<small>(4)</small></a>
<a rel=tag href=../../../tags/powershell/ class=tag-link-2 title="1 Posts">powershell<small>(2)</small></a>
<a rel=tag href=../../../tags/prometheus/ class=tag-link-8 title="1 Posts">prometheus<small>(8)</small></a>
<a rel=tag href=../../../tags/pyqt/ class=tag-link-8 title="1 Posts">pyqt<small>(8)</small></a>
<a rel=tag href=../../../tags/python/ class=tag-link-33 title="1 Posts">python<small>(33)</small></a>
<a rel=tag href=../../../tags/pytorch/ class=tag-link-6 title="1 Posts">pytorch<small>(6)</small></a>
<a rel=tag href=../../../tags/raspi/ class=tag-link-4 title="1 Posts">raspi<small>(4)</small></a>
<a rel=tag href=../../../tags/redis/ class=tag-link-2 title="1 Posts">redis<small>(2)</small></a>
<a rel=tag href=../../../tags/reflect/ class=tag-link-3 title="1 Posts">reflect<small>(3)</small></a>
<a rel=tag href=../../../tags/responsive/ class=tag-link-2 title="1 Posts">responsive<small>(2)</small></a>
<a rel=tag href=../../../tags/restful/ class=tag-link-6 title="1 Posts">restful<small>(6)</small></a>
<a rel=tag href=../../../tags/rk3288/ class=tag-link-22 title="1 Posts">rk3288<small>(22)</small></a>
<a rel=tag href=../../../tags/rk3399/ class=tag-link-9 title="1 Posts">rk3399<small>(9)</small></a>
<a rel=tag href=../../../tags/route/ class=tag-link-2 title="1 Posts">route<small>(2)</small></a>
<a rel=tag href=../../../tags/rsync/ class=tag-link-2 title="1 Posts">rsync<small>(2)</small></a>
<a rel=tag href=../../../tags/rtmp/ class=tag-link-2 title="1 Posts">rtmp<small>(2)</small></a>
<a rel=tag href=../../../tags/scikit/ class=tag-link-3 title="1 Posts">scikit<small>(3)</small></a>
<a rel=tag href=../../../tags/scrapy/ class=tag-link-8 title="1 Posts">scrapy<small>(8)</small></a>
<a rel=tag href=../../../tags/scss/ class=tag-link-2 title="1 Posts">scss<small>(2)</small></a>
<a rel=tag href=../../../tags/sed/ class=tag-link-3 title="1 Posts">sed<small>(3)</small></a>
<a rel=tag href=../../../tags/seo/ class=tag-link-5 title="1 Posts">seo<small>(5)</small></a>
<a rel=tag href=../../../tags/shell/ class=tag-link-11 title="1 Posts">shell<small>(11)</small></a>
<a rel=tag href=../../../tags/socket/ class=tag-link-5 title="1 Posts">socket<small>(5)</small></a>
<a rel=tag href=../../../tags/sqlite/ class=tag-link-2 title="1 Posts">sqlite<small>(2)</small></a>
<a rel=tag href=../../../tags/ssh/ class=tag-link-3 title="1 Posts">ssh<small>(3)</small></a>
<a rel=tag href=../../../tags/stm32/ class=tag-link-11 title="1 Posts">stm32<small>(11)</small></a>
<a rel=tag href=../../../tags/stm8/ class=tag-link-9 title="1 Posts">stm8<small>(9)</small></a>
<a rel=tag href=../../../tags/swagger/ class=tag-link-2 title="1 Posts">swagger<small>(2)</small></a>
<a rel=tag href=../../../tags/swarm/ class=tag-link-2 title="1 Posts">swarm<small>(2)</small></a>
<a rel=tag href=../../../tags/sysbench/ class=tag-link-2 title="1 Posts">sysbench<small>(2)</small></a>
<a rel=tag href=../../../tags/sysctl/ class=tag-link-2 title="1 Posts">sysctl<small>(2)</small></a>
<a rel=tag href=../../../tags/systemctl/ class=tag-link-2 title="1 Posts">systemctl<small>(2)</small></a>
<a rel=tag href=../../../tags/tc/ class=tag-link-2 title="1 Posts">tc<small>(2)</small></a>
<a rel=tag href=../../../tags/tcpdump/ class=tag-link-2 title="1 Posts">tcpdump<small>(2)</small></a>
<a rel=tag href=../../../tags/timezone/ class=tag-link-2 title="1 Posts">timezone<small>(2)</small></a>
<a rel=tag href=../../../tags/tshark/ class=tag-link-2 title="1 Posts">tshark<small>(2)</small></a>
<a rel=tag href=../../../tags/ubuntu/ class=tag-link-2 title="1 Posts">ubuntu<small>(2)</small></a>
<a rel=tag href=../../../tags/ulimit/ class=tag-link-2 title="1 Posts">ulimit<small>(2)</small></a>
<a rel=tag href=../../../tags/vim/ class=tag-link-14 title="1 Posts">vim<small>(14)</small></a>
<a rel=tag href=../../../tags/webpack3/ class=tag-link-2 title="1 Posts">webpack3<small>(2)</small></a>
<a rel=tag href=../../../tags/windows/ class=tag-link-18 title="1 Posts">windows<small>(18)</small></a>
<a rel=tag href=../../../tags/wireshark/ class=tag-link-2 title="1 Posts">wireshark<small>(2)</small></a>
<a rel=tag href=../../../tags/xidel/ class=tag-link-2 title="1 Posts">xidel<small>(2)</small></a>
<a rel=tag href=../../../tags/xml/ class=tag-link-2 title="1 Posts">xml<small>(2)</small></a>
<a rel=tag href=../../../tags/yaml/ class=tag-link-2 title="1 Posts">yaml<small>(2)</small></a>
<a rel=tag href=../../../tags/yolo/ class=tag-link-16 title="1 Posts">yolo<small>(16)</small></a>
<a rel=tag href=../../../tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/ class=tag-link-2 title="1 Posts">微服务<small>(2)</small></a></div></div></div></div>`</div></div></div></div></div><script>var HUParams={"_disabled":[],"SmoothScroll":{"Enabled":true,"Options":{"touchpadSupport":false}},"centerAllImg":"1","timerOnScrollAllBrowsers":"1","extLinksStyle":"1","extLinksTargetExt":"1","extLinksSkipSelectors":{"classes":["btn","button"],"ids":[]},"imgSmartLoadEnabled":"1","imgSmartLoadOpts":{"parentSelectors":[".container .content",".container .sidebar","#footer","#header-widgets"],"opts":{"excludeImg":[".tc-holder-img"],"fadeIn_options":100}},"goldenRatio":"1.618","gridGoldenRatioLimit":"350","sbStickyUserSettings":{"desktop":true,"mobile":true},"isWPMobile":"","menuStickyUserSettings":{"desktop":"stick_up","mobile":"stick_up"},"isDevMode":"","ajaxUrl":"https:\/\/demo-hueman.presscustomizr.com\/?huajax=1","frontNonce":{"id":"HuFrontNonce","handle":"798e5956c0"},"userStarted":{"with":"before|1.0.4","on":{"date":"2017-05-22 16:30:22.000000","timezone_type":3,"timezone":"UTC"}},"isWelcomeNoteOn":"","welcomeContent":""};</script><script src=https://cdn.bootcss.com/lodash-compat/3.10.2/lodash.min.js></script><script src=https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js></script><script src=../../../front/js/scripts.js></script><footer id=footer><section class=container id=footer-bottom><div class=container-inner><a id=back-to-top href=#><i class="fa fa-angle-up"></i></a><div class="pad group"><div class="grid one-half"><div id=copyright><p>Copyright (c) 2017. All rights reserved. (版权所有) <a href=http://www.miitbeian.gov.cn/>鲁ICP备17074587号-1</a></div></div><div class="grid one-half last"><ul class=social-links><li><a class=social-tooltip title="On WeiBo" href=http://weibo.com/rinetd target=_blank><i class="fa fa-weibo"></i></a><li><a class=social-tooltip title="On Twitter" href=https://twitter.com/rinetd target=_blank><i class="fa fa-twitter"></i></a><li><a class=social-tooltip title="On GitHub" href=https://github.com/rinetd target=_blank><i class="fa fa-github"></i></a></ul></div></div></div></section></footer><div class=back-to-top id=back-to-top><i class="fa fa-angle-double-up"></i></div><script>$(".topbar-toggle-down").click(function(){$("#nav-topbar").css("overflow","visible");});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5HM5XM2" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5HM5XM2');</script>