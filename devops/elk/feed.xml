<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>时光小栈</title><link>/devops/elk/</link><description>Recent content on 时光小栈</description><generator>Hugo -- gohugo.io</generator><language>zh-Hans</language><managingEditor>rinetd@163.com (rinetd)</managingEditor><webMaster>rinetd@163.com (rinetd)</webMaster><copyright>Copyright (c) 2017. All rights reserved. (版权所有) &lt;a href=&#39;http://www.miitbeian.gov.cn/&#39;&gt;鲁ICP备17074587号-1&lt;/a&gt;</copyright><lastBuildDate>Tue, 12 Feb 2019 11:24:43 +0800</lastBuildDate><atom:link href="/devops/elk/feed.xml" rel="self" type="application/rss+xml"/><item><title>filebeat</title><link>/devops/elk/beats/filebeat/</link><pubDate>Tue, 12 Feb 2019 11:24:43 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/filebeat/</guid><description>filebeat源码解析 - 云+社区 - 腾讯云</description></item><item><title>elasticsearch ik mapping</title><link>/devops/elk/elasticsearch/elasticsearch-ik-mapping/</link><pubDate>Mon, 10 Dec 2018 08:55:20 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-ik-mapping/</guid><description>实现 ik_max_word 分词 #!/bin/sh registration_name=&amp;quot;192.168.29.158:5000/elasticsearch&amp;quot; container_id=0 while [ &amp;quot;$container_id&amp;quot; = &amp;quot;0&amp;quot; ] do container_id=$(docker ps|grep &amp;quot;$registration_name&amp;quot;|awk &#39;{print $1}&#39;) [ &amp;quot;$container_id&amp;quot; = &amp;quot;&amp;quot; ] &amp;amp;&amp;amp; container_id=0 sleep 1s done echo $container_id curl -XDELETE &#39;http://127.0.0.1:9201/user&#39; curl -XPUT &#39;http://127.0.0.1:9201/user&#39; curl -XPOST &#39;http://127.0.0.1:9201/user/default/_mapping&#39; -d&#39; { &amp;quot;default&amp;quot;: { &amp;quot;_all&amp;quot;: { &amp;quot;analyzer&amp;quot;: &amp;quot;ik_max_word&amp;quot;, &amp;quot;search_analyzer&amp;quot;: &amp;quot;ik_max_word&amp;quot;, &amp;quot;term_vector&amp;quot;: &amp;quot;no&amp;quot;, &amp;quot;store&amp;quot;: &amp;quot;false&amp;quot; }, &amp;quot;properties&amp;quot;: { &amp;quot;real_name&amp;quot;: { &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;, &amp;quot;analyzer&amp;quot;: &amp;quot;ik_max_word&amp;quot;, &amp;quot;search_analyzer&amp;quot;: &amp;quot;ik_max_word&amp;quot; }, &amp;quot;last_login_at&amp;quot;: { &amp;quot;type&amp;quot;:</description></item><item><title>Awesome Elasticsearch</title><link>/devops/elk/elastic/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic/</guid><description>虚拟内存低 ElasticSearch 无法启动 默认操作系统的mmap设置较低，会导致内存溢出： $ vim /etc/sysctl.conf ##添加 echo vm.max_map_count=262144 &amp;gt;/etc/sysctl.d/elastic.conf $ sysctl vm.max_map_count beats 安装 https://www.elastic.co/guide/en/beats/metricbeat/current/setup-repositories.html 导入证书 sudo rpm --import https://packages.elastic.co/GPG-KEY-elasticsearch ELASTICSEARCH=http://elastic:changeme@127.0.0.1:9200 curl -XPUT -H &amp;quot;Content-Type: application/json&amp;quot; &#39;elastic.lybb.gov.cn/twitter?pretty&#39; -d&#39; { &amp;quot;settings&amp;quot; :</description></item><item><title>Awesome Elasticsearch</title><link>/devops/elk/book-elastic/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/book-elastic/</guid><description>ELK安装笔记 书籍 ELKstack 中文指南 Logstash 最佳实践 Elasticsearch 权威指南（中文版） Elasticsearch权威指南翻译目录 Elasticsearch Reference 5.3 Databases -&amp;gt; Tables -&amp;gt; Rows -&amp;gt; Columns Indices -&amp;gt; Types -&amp;gt; Documents -&amp;gt; Fields beats Be</description></item><item><title>Awesome Elasticsearch</title><link>/devops/elk/awsome-elasticsearch/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/awsome-elasticsearch/</guid><description>http://elasticsearch-cheatsheet.jolicode.com/ 如果是按日期索引的日志，那么最好定期清除旧索引： curl -XDELETE -u &amp;lt;USER&amp;gt;:&amp;lt;PASSWORD&amp;gt; http://&amp;lt;HOST&amp;gt;:9200/logstash-$(date -d &#39;-10days&#39; +&#39;%Y.%m.%d&#39;) #elasticsearch资源汇总 awesome-elasticsearch 插件汇总 ES权威指南中文 ES权威指南</description></item><item><title>Beats开发指南</title><link>/devops/elk/beats/beats%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/beats%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/</guid><description>创建beat项目 python $GOPATH/src/github.com/elastic/beats/script/generate.py 安装环境依赖 cd ${GOPATH}/src/github.com/{user}/mybeat make setup 编译 运行 make ./countbeat -e -d &amp;quot;*&amp;quot; 导入 dashboards ./scripts/import_dashboards -dir kibana/metricbeat `./scripts/import_dashboards -file metricbeat-dashboards-1.1.zip` `./scripts/import_dashboards -url https://artifacts.elastic.co/downloads/beats/beats-dashboards/beats-dashboards-5.4.1.zip` ./scripts/import_dashboards -es http://120.92.36.21:9200 -user elastic -pass changeme `beats/libbeat/dashboards/import_dashboards -beat metricbeat` index_pattern ./scripts/import_dashboards -only-index dashboards ./scripts/import_dashboards -only-dashboards docker run --rm -it docker.elastic.co/beats/heartbeat:5.4.0 /usr/share/heartbeat/scripts/import_dashboards -beat &amp;quot;heartbeat&amp;quot; -file /usr/share/heartbeat/beats-dashboards-5.4.0.zip -es http://139.129.234.31:9200 -user</description></item><item><title>Beats配置详解</title><link>/devops/elk/beats/beats%E4%BD%BF%E7%94%A8ingest/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/beats%E4%BD%BF%E7%94%A8ingest/</guid><description>https://kibana.logstash.es/content/elasticsearch/ingest.html https://www.elastic.co/guide/en/elasticsearch/reference/5.4/accessing-data-in-pipelines.html 1. Elasticsearch开启Ingest功能 Ingest 节点是 Elasticsearch 5.0 新增的节点类型和功能。其开启方式为：在 elasticsearch.yml 中定义： node.ingest: true curl -u elastic:changeme 120.92.36.21:9200/_ingest curl -u elastic:changeme 120.92.36.21:9200/_cluster/settings 数据转换</description></item><item><title>Beats配置详解</title><link>/devops/elk/beats/beats%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/beats%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>使用 pipelines output.elasticsearch: hosts: [&amp;quot;${hotname}:80&amp;quot;] template.enabled: true template.path: &amp;quot;filebeat.template.json&amp;quot; template.overwrite: false index: &amp;quot;cs-email&amp;quot; #pipelines: # - pipeline: critical_pipeline # when.equals: # type: &amp;quot;critical&amp;quot; # - pipeline: normal_pipeline # when.equals: # type: &amp;quot;normal&amp;quot; output.elasticsearch: hosts: [&amp;quot;http://localhost:9200&amp;quot;] username: &amp;quot;admin&amp;quot; password: &amp;quot;s3cr3t&amp;quot; template.enabled: true template.fields: &amp;quot;fields.yml&amp;quot; template.overwrite: false index: &amp;quot;{beatname_lc}&amp;quot; ssl.certificate_authorities: [&amp;quot;/etc/pki/root/ca.pem&amp;quot;] ssl.certificate: &amp;quot;/etc/pki/client/cert.pem&amp;quot; ssl.key: &amp;quot;/etc/pki/client/cert.key&amp;quot; ./scripts/import_dashboards -es http://120.92.36.21:9200 -user elastic -pass changeme -E &amp;lt;setting&amp;gt;=&amp;lt;value&amp;gt; Override a specific configuration setting. For example:</description></item><item><title>ELK实战之解析各类日志文件</title><link>/devops/elk/elastic-elk%E5%AE%9E%E6%88%98%E4%B9%8B%E8%A7%A3%E6%9E%90%E5%90%84%E7%B1%BB%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-elk%E5%AE%9E%E6%88%98%E4%B9%8B%E8%A7%A3%E6%9E%90%E5%90%84%E7%B1%BB%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6/</guid><description>ELK实战之解析各类日志文件 摘要：本文属于原创，欢迎转载，转载请保留出处：https://github.com/jasonGeng88/bl</description></item><item><title>ELK日志中心分布式架构的逐步演化</title><link>/devops/elk/elastic-elk%E6%97%A5%E5%BF%97%E4%B8%AD%E5%BF%83%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E9%80%90%E6%AD%A5%E6%BC%94%E5%8C%96/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-elk%E6%97%A5%E5%BF%97%E4%B8%AD%E5%BF%83%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E9%80%90%E6%AD%A5%E6%BC%94%E5%8C%96/</guid><description>[译] ELK日志中心分布式架构的逐步演化 摘要：本文属于原创，欢迎转载，转载请保留出处：https://github.com/jasonGen</description></item><item><title>Elastic Filebeat 搭建实时日志分析平台</title><link>/devops/elk/elk&#43;filebeat%E6%90%AD%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elk&#43;filebeat%E6%90%AD%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/</guid><description>ELK+Filebeat搭建实时日志分析平台</description></item><item><title>Elastic 更新</title><link>/devops/elk/elastic-%E6%9B%B4%E6%96%B0/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-%E6%9B%B4%E6%96%B0/</guid><description>6.0更新 Index templates now take an list for the template: field instead of a string. For example: { &amp;quot;index_patterns&amp;quot;: [&amp;quot;c&amp;quot;, &amp;quot;d&amp;quot;], } Instead of the previous form { &amp;quot;template&amp;quot;: &amp;quot;c*&amp;quot; } Template metadata from older versions of ES are still openable with this code, although I don&#39;t know how important that is since it&#39;s probably assumed that you can&#39;t just open a new elasticsearch release on</description></item><item><title>ElasticSearch 配置文件详解</title><link>/devops/elk/elasticsearch/elasticsearch-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>配置文件详解 配置文件位于es根目录的config目录下面，有elasticsearch.yml和logging.yml两个配置，主配置文件是</description></item><item><title>ElasticSearch——跨域访问</title><link>/devops/elk/elasticsearch/elasticsearch-cors/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-cors/</guid><description>跨域请求： ES服务器安装部署成功之后 从另外一个域的浏览器访问ES服务器数据，会出现跨域的问题。 抛出错误：No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. Origin &#39;null&#39; is therefore not allowed access. The</description></item><item><title>Elasticsearch</title><link>/devops/elk/elasticsearch-%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch-%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4/</guid><description>http://elasticsearch-cheatsheet.jolicode.com/ 1.集群健康(cluster health) curl -u elastic:changeme 120.92.36.21:9200/_cluster/health?pretty 2. _mget允许我们一次性检索多个文档一样 3. _bulk API允许我们使用一个请求来实现多个文档的create</description></item><item><title>Elasticsearch RESTAPI 约定</title><link>/devops/elk/elasticsearch-restapi-%E7%BA%A6%E5%AE%9A/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch-restapi-%E7%BA%A6%E5%AE%9A/</guid><description>Elasticsearch Reference [5.4] » API Conventions » Common options 常用选项 以下选项可以应用于所有 REST APIs 。 优雅的结果 当对任何请求追加?pretty=true时，返回的JSON将会优雅地格式化（</description></item><item><title>Elasticsearch bulk批量导入数据</title><link>/devops/elk/elasticsearch/elasticsearch-bulk%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-bulk%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/</guid><description>在使用Elasticsearch的时候，一定会遇到这种场景——希望批量的导入数据，而不是一条一条的手动导入。那么此时，就一定会需要bulk命</description></item><item><title>Elasticsearch 乐观锁</title><link>/devops/elk/elasticsearch-%E4%B9%90%E8%A7%82%E9%94%81/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch-%E4%B9%90%E8%A7%82%E9%94%81/</guid><description>并发啊？ 锁！ 1 问题情景 和多线程并发问题一样，在Es的读写过程中，同样会出现如下的情景。 同时 Get, 先后 Put. 2 方案 在数据库领域，一般有两种方案来解决这</description></item><item><title>Elasticsearch 数据搜索篇·【入门级干货】</title><link>/devops/elk/elasticsearch/elasticsearch%E6%95%B0%E6%8D%AE%E6%90%9C%E7%B4%A2%E5%85%A5%E9%97%A8%E7%BA%A7%E5%B9%B2%E8%B4%A7/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch%E6%95%B0%E6%8D%AE%E6%90%9C%E7%B4%A2%E5%85%A5%E9%97%A8%E7%BA%A7%E5%B9%B2%E8%B4%A7/</guid><description>Elasticsearch 数据搜索篇·【入门级干货】 ES即简单又复杂，你可以快速的实现全文检索，又需要了解复杂的REST API。本篇就通过一些简单的搜索命令，帮助你</description></item><item><title>Elasticsearch学习笔记(四)Mapping映射</title><link>/devops/elk/elasticsearch/elasticsearch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9Bmapping%E6%98%A0%E5%B0%84/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9Bmapping%E6%98%A0%E5%B0%84/</guid><description>Elasticsearch学习笔记(四)Mapping映射 Mapping简述 Elasticsearch是一个schema-less的系统，但</description></item><item><title>Elasticsearch学习笔记(四)Mapping映射</title><link>/devops/elk/elasticsearch/elasticsearch-%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/</guid><description>取得某个索引中某个字段中的所有出现过的值 这种操作类似于使用SQL的SELECT UNIQUE语句。当需要获取某个字段上的所有可用值时，可以使用</description></item><item><title>Elasticsearch集群管理</title><link>/devops/elk/elasticsearch/elasticsearch%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/</guid><description>Elasticsearch集群管理 ES通过设置【节点的名字】和【集群的名字】，就能自动的组织相同集群名字的节点加入到集群中，并使很多的技术对</description></item><item><title>FileBeat5.2.2安装部署记录</title><link>/devops/elk/elastic-%E9%83%A8%E7%BD%B2%E6%97%A5%E5%BF%97/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-%E9%83%A8%E7%BD%B2%E6%97%A5%E5%BF%97/</guid><description>FileBeat5.2.2安装部署记录 1.简介 Beats包含众多的套件，如FileBeat、HeatBeat等。 FileBeat设计以可靠性</description></item><item><title>Kibana 5.x 加强安全</title><link>/devops/elk/kibana/kibana-5.x-%E5%8A%A0%E5%BC%BA%E5%AE%89%E5%85%A8-/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/kibana/kibana-5.x-%E5%8A%A0%E5%BC%BA%E5%AE%89%E5%85%A8-/</guid><description>Kibana 5.x 加强安全</description></item><item><title>Kibana 5.x 加强安全</title><link>/devops/elk/x-pack/elastic-%E5%AE%89%E5%85%A8%E5%85%88-pack/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/x-pack/elastic-%E5%AE%89%E5%85%A8%E5%85%88-pack/</guid><description>【入门篇】Elasticsearch、Kibana权限控制 (http://blog.csdn.net/pistolove/article/details/53838138) x-pack 安全审计 elasticsearch logstash随着kibana的命名升级直接从2.4跳跃到了5.0</description></item><item><title>Kibana 基础</title><link>/devops/elk/kibana/kibana-%E5%9F%BA%E7%A1%80-/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/kibana/kibana-%E5%9F%BA%E7%A1%80-/</guid><description>Kibana 4 Templates for Suricata Kibana 5.x 加强安全 /scripts/import_dashboards -es http://120.92.36.21:9200 -user elastic -pass changeme # mapping # 先建立一个索引 curl -XPUT localhost:9200/abc # 然后定义映射，注意：只有刚刚新建、还没有任何数据的索引，才能定义映射。定义映</description></item><item><title>Kibana 基础</title><link>/devops/elk/kibana/elastic-%E5%9F%BA%E7%A1%80-/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/kibana/elastic-%E5%9F%BA%E7%A1%80-/</guid><description>Kibana 5.x 加强安全 /scripts/import_dashboards -es http://120.92.36.21:9200 -user elastic -pass changeme 产看数据 curl &#39;120.92.36.21:9200/.kibana/_search?q=*&amp;amp;pretty&#39; curl -XPOST &#39;120.92.36.21:9200/.kibana/_search?pretty&#39; -d &#39; { &amp;quot;query&amp;quot;: { &amp;quot;match_all&amp;quot;: {} } }&#39; close the kibana index, restore it from snapshot, and reopen it closeKibanaIndexCmd=&amp;quot;curl -XPOST /.kibana/_close\&amp;quot;&amp;quot; restoreSnapshotCmd=&amp;quot;curl -XPOST /_snapshot/elk_backup/$1/_restore\&amp;quot;&amp;quot; reopenKibanaIndexCmd=&amp;quot;curl -XPOST /.kibana/_open\&amp;quot;&amp;quot; snapshotRepoCmd=&amp;quot;curl -XPUT -s $authString \&amp;quot;$elk_base_url/_snapshot/elk_backup\&amp;quot; -d &#39;{ \&amp;quot;type\&amp;quot;: \&amp;quot;fs\&amp;quot;, \&amp;quot;settings\&amp;quot;: { \&amp;quot;location\&amp;quot;: \&amp;quot;/tmp/elkinstalldir/snapshots/\&amp;quot; } }&#39;&amp;quot; echo &amp;quot;creating repo...&amp;quot; eval</description></item><item><title>elastic 基础</title><link>/devops/elk/elasticsearch/elastic-%E5%9F%BA%E7%A1%80-/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elastic-%E5%9F%BA%E7%A1%80-/</guid><description>查看集群状态 curl -u elastic:changeme &#39;120.92.36.21:9200/_cat/nodes?v&#39; curl -u elastic:changeme &#39;127.0.0.1:9200/_cat/nodes?v&#39; 列出所有index curl -u elastic:changeme &#39;120.92.36.21:9200/_cat/indices?v&#39; curl -XPUT -u elastic:changeme &#39;120.92.36.21:9200/_template/mysqlbeat -d@/etc/mysqlbeat/mysqlbeat.template.json&#39; curl -u elastic:changeme &#39;120.92.36.21:9200/_cat&#39; /_cat/allocation /_cat/shards /_cat/shards/{index} /_cat/master /_cat/nodes /_cat/tasks /_cat/indices /_cat/indices/{index} /_cat/segments /_cat/segments/{index} /_cat/count /_cat/count/{index} /_cat/recovery /_cat/recovery/{index} /_cat/health /_cat/pending_tasks /_cat/aliases /_cat/aliases/{alias} /_cat/thread_pool /_cat/thread_pool/{thread_pools} /_cat/plugins /_cat/fielddata /_cat/fielddata/{fields} /_cat/nodeattrs /_cat/repositories /_cat/snapshots/{repository} /_cat/templates curl -u elastic:changeme &#39;120.92.36.21:9200/_cat/?help&#39; 通过</description></item><item><title>elasticsearch 查询（match和term）</title><link>/devops/elk/elasticsearch/elasticsearch%E6%9F%A5%E8%AF%A2match%E5%92%8Cterm/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch%E6%9F%A5%E8%AF%A2match%E5%92%8Cterm/</guid><description>elasticsearch 查询（match和term）(http://www.cnblogs.com/yjf512/p/4897294.html) 把条件中match</description></item><item><title>elasticsearch指定其他字段为主键_id字段</title><link>/devops/elk/elasticsearch/elasticsearch%E6%8A%80%E5%B7%A7%E6%8C%87%E5%AE%9A%E5%85%B6%E4%BB%96%E5%AD%97%E6%AE%B5%E4%B8%BA%E4%B8%BB%E9%94%AE_id%E5%AD%97%E6%AE%B5/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch%E6%8A%80%E5%B7%A7%E6%8C%87%E5%AE%9A%E5%85%B6%E4%BB%96%E5%AD%97%E6%AE%B5%E4%B8%BA%E4%B8%BB%E9%94%AE_id%E5%AD%97%E6%AE%B5/</guid><description>The Great Mapping Refactoring 用了这么久的elasticsearch,一直以为es只有对_id字段进行赋值的方法来使用主键进行去重,今天才发现原来_id也可以指定</description></item><item><title>elk日志分析filebeat配置（filebeat &#43; logstash）</title><link>/devops/elk/elastic-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90filebeat%E9%85%8D%E7%BD%AEfilebeat-&#43;-logstash/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90filebeat%E9%85%8D%E7%BD%AEfilebeat-&#43;-logstash/</guid><description>日志格式： nginx_access: { &amp;quot;@timestamp&amp;quot;:&amp;quot;2017-01-23T15:16:48+08:00&amp;quot;,&amp;quot;client&amp;quot;: &amp;quot;192.168.0.151&amp;quot;,&amp;quot;@version&amp;quot;:&amp;quot;1&amp;quot;,&amp;quot;host&amp;quot;:&amp;quot;192.168.0.147&amp;quot;,&amp;quot;size&amp;quot;:160,&amp;quot;responsetime&amp;quot;:0.000,&amp;quot;domain&amp;quot;:&amp;quot;mv.bjfxr.com&amp;quot;,&amp;quot;url&amp;quot;:&amp;quot;/index.html&amp;quot;,&amp;quot;status&amp;quot;:&amp;quot;200&amp;quot;,&amp;quot;ua&amp;quot;:&amp;quot;curl/7.19.7 (x86_64-neokylin-linux-gnu) libcurl/7.19.7 NSS/3.12.9.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2&amp;quot;} { &amp;quot;@timestamp&amp;quot;:&amp;quot;2017-01-23T15:16:48+08:00&amp;quot;,&amp;quot;client&amp;quot;: &amp;quot;192.168.0.151&amp;quot;,&amp;quot;@version&amp;quot;:&amp;quot;1&amp;quot;,&amp;quot;host&amp;quot;:&amp;quot;192.168.0.147&amp;quot;,&amp;quot;size&amp;quot;:30027,&amp;quot;responsetime&amp;quot;:0.001,&amp;quot;domain&amp;quot;:&amp;quot;mv.bjfxr.com&amp;quot;,&amp;quot;url&amp;quot;:&amp;quot;/aaaaa/index.html&amp;quot;,&amp;quot;status&amp;quot;:&amp;quot;200&amp;quot;,&amp;quot;ua&amp;quot;:&amp;quot;curl/7.19.7 (x86_64-neokylin-linux-gnu) libcurl/7.19.7 NSS/3.12.9.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2&amp;quot;} nginx_error: 2017/01/19 08:42:53 [crit] 5621#0: *6428 connect() to unix:/tmp/php-cgi.sock failed (2: No such file or directory) while connecting to upstream, client: 192.168.0.151, server: mv.bjfxr.com, request: &amp;quot;GET /dts/index/cat/cat/notice.html HTTP/1.0&amp;quot;, upstream: &amp;quot;fastcgi://unix:/tmp/php-cgi.sock:&amp;quot;, host: &amp;quot;mv.bjfxr.com.com&amp;quot; 2017/01/19 12:42:53 [crit] 5621#0: *6428 connect() to unix:/tmp/php-cgi.sock failed (2: No such file or</description></item><item><title>filebeat 过滤器</title><link>/devops/elk/beats/beat%E8%BF%87%E6%BB%A4%E5%99%A8processor/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/beat%E8%BF%87%E6%BB%A4%E5%99%A8processor/</guid><description>数据过滤有两个地方 在 prospectors中 通过 include_lines, exclude_lines, and exclude_files. filebeat.prospectors: - input_type: log paths: - /var/log/myapp/*.log include_lines: [&amp;quot;^ERR&amp;quot;, &amp;quot;^WARN&amp;quot;] 在 processors 中通过事件过滤器(管道) 目前支持5种add_cloud_me</description></item><item><title>filebeat 过滤器</title><link>/devops/elk/beats/libbeat%E8%BF%87%E6%BB%A4%E5%99%A8processor/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/libbeat%E8%BF%87%E6%BB%A4%E5%99%A8processor/</guid><description>数据过滤有两个地方 在 prospectors中 通过 include_lines, exclude_lines, and exclude_files. filebeat.prospectors: - input_type: log paths: - /var/log/myapp/*.log include_lines: [&amp;quot;^ERR&amp;quot;, &amp;quot;^WARN&amp;quot;] 在 processors 中通过事件过滤器(管道) 目前支持5种add_cloud_me</description></item><item><title>filebeat配置详解</title><link>/devops/elk/elastic-filebeat%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-filebeat%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>Registry File Registry File存储了Filbeat最后一次读的位置和状态。 在Logstash-Forwarder被称为.logstash-fowarder(</description></item><item><title>filebeat配置详解</title><link>/devops/elk/beats/elastic-filebeat%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/elastic-filebeat%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</guid><description>Registry File Registry File存储了Filbeat最后一次读的位置和状态。在Logstash-Forwarder被称为.logstash-fowarder(</description></item><item><title>logstash nginx</title><link>/devops/elk/logstash/logstash-nginx/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/logstash/logstash-nginx/</guid><description>nginx_log_format_access
&#39;$remote_addr [$time_local] $status &#39;
&#39;&amp;quot;$request&amp;quot; $body_bytes_sent &amp;quot;$http_referer&amp;quot; &#39;
&#39;&amp;quot;$http_user_agent&amp;quot; &amp;quot;$upstream_addr&amp;quot; &amp;quot;$proxy_add_x_forwarded_for&amp;quot; &amp;quot;$request_time&amp;quot;&#39;
input { file { type =&amp;gt; &amp;quot;nginx-access&amp;quot; path =&amp;gt; &amp;quot;/var/log/nginx/*access.log&amp;quot; } file { type =&amp;gt; &amp;quot;nginx-error&amp;quot; path =&amp;gt; &amp;quot;/var/log/nginx/*error.log&amp;quot; } } filter { if [type] == &amp;quot;nginx-access&amp;quot; { grok { match =&amp;gt; { &amp;quot;message&amp;quot; =&amp;gt; &amp;quot;(?:%{SYSLOGTIMESTAMP}) ?%{SYSLOGHOST:logsource} %{SYSLOGPROG}: ?%{IPORHOST:clientip} \[%{HTTPDATE:timestamp}\] %{NUMBER:response} \&amp;quot;%{WORD:method} %{URIPATHPARAM:request} HTTP/%{NUMBER:httpversion}\&amp;quot; (?:%{NUMBER:bytes}|-) (?:\&amp;quot;(?:%{URI:referrer}|-)\&amp;quot;|%{QS:referrer}) %{QS:agent} %{QS:xforwardedip} %{QS:xforwardedfor} %{QS:respons_time}&amp;quot;} } } if [type] == &amp;quot;nginx-error&amp;quot; { grok { match =&amp;gt; { &amp;quot;message&amp;quot; =&amp;gt; &amp;quot;(?</description></item><item><title>logstash自定义timestamp</title><link>/devops/elk/logstash/logstash%E8%87%AA%E5%AE%9A%E4%B9%89timestamp-/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/logstash/logstash%E8%87%AA%E5%AE%9A%E4%B9%89timestamp-/</guid><description>I used date filter to solve it, like: date { match =&amp;gt; [&amp;quot;timestamp&amp;quot;, &amp;quot;dd/MMM/yyyy:HH:mm:ss Z&amp;quot;] target =&amp;gt; &amp;quot;@timestamp&amp;quot; }</description></item><item><title>初探ELK-以收集 nginx 日志为例示范搭建一个 ELK 环境的基本步骤</title><link>/devops/elk/elastic-%E5%88%9D%E6%8E%A2/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elastic-%E5%88%9D%E6%8E%A2/</guid><description>初探ELK-以收集 nginx 日志为例示范搭建一个 ELK 环境的基本步骤 2017/2/15 一、环境 1、RPM 1）收集 rpm 包 wget https://download.elastic.co/logstash/logstash/packages/centos/logstash-2.4.0.noarch.rpm wget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/rpm/elasticsearch/2.4.0/elasticsearch-2.4.0.rpm wget https://download.elastic.co/kibana/kibana/kibana-4.6.1-x86_64.rpm wget https://download.elastic.co/beats/filebeat/filebeat-1.3.1-x86_64.rpm 2）缓存rpm包到本地yum源 2、安</description></item><item><title>向已存在的索引中添加自定义filter analyzer</title><link>/devops/elk/elasticsearch/analyzer/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/analyzer/</guid><description>问题描述 随着应用的不断升级，索引中的类型也会越来越多，新增加的类型中势必会使用到一些自定义的Analyzer。但是通过_settings端点</description></item><item><title>基于ELK&#43;Filebeat搭建日志中心</title><link>/devops/elk/beats/elastic-filebeat%E6%90%AD%E5%BB%BA/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/elastic-filebeat%E6%90%AD%E5%BB%BA/</guid><description>先弄清楚filebeat采集日志的原理 /filebeat/data/registry文件记录了filebeat收集的日志文件名、offset</description></item><item><title>聚合中的重要概念 - Buckets(桶)及Metrics(指标)</title><link>/devops/elk/elasticsearch/elasticsearch-%E8%81%9A%E5%90%88%E4%B8%AD%E7%9A%84%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5-buckets%E6%A1%B6%E5%8F%8Ametrics%E6%8C%87%E6%A0%87/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch/elasticsearch-%E8%81%9A%E5%90%88%E4%B8%AD%E7%9A%84%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5-buckets%E6%A1%B6%E5%8F%8Ametrics%E6%8C%87%E6%A0%87/</guid><description>本章翻译自Elasticsearch官方指南的Aggregations-High-level Concepts一章。 http://blog.csdn.net/dm_vincent/article/details/42387161 高层概念(High-Le</description></item><item><title>解决filebeat的@timestamp无法被json日志的同名字段覆盖的问题</title><link>/devops/elk/beats/filebeat%E8%87%AA%E5%AE%9A%E4%B9%89timestamp/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/filebeat%E8%87%AA%E5%AE%9A%E4%B9%89timestamp/</guid><description>默认@timestamp是filebeat读取日志时的时间戳，但是我们在读取日志的时候希望根据日志生成时间来展示，以便根据日志生成时间点来定</description></item><item><title>解决filebeat的@timestamp无法被json日志的同名字段覆盖的问题</title><link>/devops/elk/beats/filebeat%E8%A7%A3%E6%9E%90json/</link><pubDate>Tue, 04 Oct 2016 04:15:26 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/beats/filebeat%E8%A7%A3%E6%9E%90json/</guid><description>在filebeat.yml配置文件中加上以下两行搞定： json.keys_under_root: true json.overwrite_keys: true filebeat 解析json文件 文档里json共有四个配置节点： message_key 指定json日志解析后放到</description></item><item><title>集中式日志解决方案详解</title><link>/devops/elk/elk/</link><pubDate>Thu, 24 Mar 2016 14:55:34 +0800</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elk/</guid><description>ELK+Filebeat 集中式日志解决方案详解 百度假蜘蛛 ^(117\.28\.255|119\.63\.196|121\.10\.141|121\.14\.89|124\.248\.34|125\.39\.78|125\.90\.88|159\.226\.50|180\.76\.5|203\.208\.60|210\.72\.225|222\.77\.187|123\.125\.[0-9]{1,3}|180\.149\.[0-9]{1,3}|220\.181\.[0-9]{1,3}|61\.135\.[0-9]{1,3}|60\.191\.[0-9]{1,3})\.[0-9]{1,3}$</description></item><item><title>Read elastic search doc</title><link>/devops/elk/elasticsearch-%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><author>rinetd@163.com (rinetd)</author><guid>/devops/elk/elasticsearch-%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95/</guid><description>官方的doc无疑是最有价值的。 0 关于倒排索引 在基本的文本处理后(分词/变小写等), 如上三个文档变成了如图的倒排索引. 倒排索引将 “terms”</description></item></channel></rss>