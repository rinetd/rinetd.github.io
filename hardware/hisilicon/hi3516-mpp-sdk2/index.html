<!doctype html><html lang=zh-cn class=no-js><title>hi3516 mpp sdk2</title><meta charset=utf-8><meta name=robots content=index,nofollow><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta http-equiv=x-dns-prefetch-control content=on><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=origin-when-cross-origin><meta name=description content="本文链接：https://blog.csdn.net/taotongning/article/details/84882431 1.官方sam"><meta name=author content=rinetd><meta name=google-site-verification content=ifeWsnNpU7w8vP3ii_Cjq-P9LKw3ngVitnMWv4XmJqk><link rel=canonical href=../../../hardware/hisilicon/hi3516-mpp-sdk2/><link rel=icon href=../../../public/favicon.ico><link rel="shortcut icon" href=../../../public/favicon.ico><link rel=stylesheet href=../../../front/css/main.min.css><link href=https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link rel=stylesheet href=//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css><body class="single single-post single-format-standard col-3cm full-width topbar-enabled chrome"><div id=wrapper><header id=header class="top-menu-mobile-on one-mobile-menu top_menu header-ads-desktop  topbar-transparent"><nav class="nav-container group mobile-menu mobile-sticky" id=nav-mobile data-menu-id=header-1><div class=mobile-title-logo-in-header><p class=site-title><a class=custom-logo-link href rel=home title="Pytool | Home">Pytool</a></div><div class="ham__navbar-toggler-two collapsed" title=Menu aria-expanded=false><div class=ham__navbar-span-wrapper><span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span></div></div><div class=nav-text>hi3516 mpp sdk2</div><div class="nav-wrap container"><ul class="nav container-inner group mobile-search"><li><form class="searchform themeform" action=https://demo-hueman.presscustomizr.com/><div><input class=search name=s onblur="if(this.value=='')this.value='To search type and hit enter';" onfocus="if(this.value=='To search type and hit enter')this.value='';" value="To search type and hit enter"></div></form></ul><ul id=menu-topbar-menu class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href>Home</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>车联网</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-底层</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../macos/>Macos</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/git/>Git</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/math/>Math</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../frontend/css/>Css</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>系统监控</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../windows/>Windows</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/python/>Python</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/python/scrapy/>Scrapy</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/clang/>Clang</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/golang/>Golang</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/cgo/>Cgo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/hugo/>Hugo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/sys/>Sys</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/golang/goher/>Goher</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/java/>Java</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/java/hadoop/>Hadoop</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/php/>Php</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../language/php/magento/>Magento</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_端口扫描</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_端口转发(隧道)</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../work/>Work</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../weixin/>Weixin</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../edit/>Edit</a><li class=item><a class=text href=../../../series/>series</a><li class=item><a class=text href=../../../categories/>categories</a><li class=item><a class=text href=../../../tags/>tags</a><li class=item><a class=text href=../../../me/>about</a></ul></div></nav><nav class="nav-container group desktop-menu desktop-sticky" id=nav-topbar data-menu-id=header-2><div class=nav-text>hi3516 mpp sdk2</div><div class=topbar-toggle-down><i class="fas fa-angle-double-down" aria-hidden=true data-toggle=down title="Expand menu"></i><i class="fas fa-angle-double-up" aria-hidden=true data-toggle=up title="Collapse menu"></i></div><div class="nav-wrap container"><ul id=menu-topbar-menu-1 class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href=../../../>Home</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>车联网</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-底层</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../macos/>Macos</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../post/>Post</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/software/>Software</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/english/>English</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/seo/>Seo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/life/>Life</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/wiki/>Wiki</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/basic/>Basic</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../post/reship/>Reship</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/git/>Git</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/math/>Math</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../frontend/css/>Css</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>系统监控</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../windows/>Windows</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/python/>Python</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/clang/>Clang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/golang/>Golang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/java/>Java</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/php/>Php</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_端口扫描</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_端口转发(隧道)</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../work/>Work</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../weixin/>Weixin</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../edit/>Edit</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../series/>series</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../categories/>categories</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../tags/>tags</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../me/>about</a></ul></div></nav></header><div class=container id=page><div class=container-inner><div class=main><div class="main-inner group"><div class=content><div class="pad group page-title"><ul class="meta-single group"><li><span class="fa fa-folder-open"></span><li class=category><a href=../../../categories/hisilicon/ rel="category tag">hisilicon</a></ul></div><div class="pad group"><article class="post type-post status-publish format-standard has-post-thumbnail hentry category-lifestyle tag-classical-grid tag-masonry-grid tag-standard-list"><div class="post-inner group"><h1 class=post-title>hi3516 mpp sdk2</h1><p class=post-byline>by · 2019年11月29日 · 10032 Words ·
~21min reading time |
<a href=https://gitlab.com/rinetd/blog/edit/master/hardware/hisilicon/hi3516-mpp-sdk2.md target=_blank>Improve on <i class="fa fa-gitlab"></i></a><div class=clear></div><div class="entry themeform"><div class=entry-inner></br>原文链接：<a target=_blank href=../../../hardware/hisilicon/hi3516-mpp-sdk2/> hi3516 mpp sdk2</a><p>本文链接：<a href=https://blog.csdn.net/taotongning/article/details/84882431 target=_blank>https://blog.csdn.net/taotongning/article/details/84882431</a><br>1.官方sampe<br>（1）海思官方提供的sampe位于Z:\Hi3518E_SDK_V1.0.3.0\mpp\sample中<br>sample其实是很多个例程，所以有很多个Main，每一个例程面向一个典型应用。<br>common 是通用性主体函数，里面的东西全是被其他程序调用的。我们只分析视频编码venc<br>（2）基本的架构是：venc中的main调用venc中的功能函数，再调用common中的功能函数，<br>common中的功能函数再调用mpp中的API，mpp的API在哪里？mpp中的API实现的函数体在ko里面，<br>他们是以库的形式（驱动）来提供的，这些ko你是看不见海思的源码的，你只能去查海思的手册，<br>HiMPP IPC V2.0 媒体处理软件开发参考.pdf，这份文档就是mpp的API手册，里面包括了所有mpp的<br>的API，API（驱动）最终会去调用hi3518E内部的硬件单元（内部有ARM DSP）。<br>mpp就是海思图像处理的这套体系<br>mpp里面包含ko（运行时要加载的动态库） lib（静态库） sample（我们的应用程序）<br>hifb显示用的，free buffer，可以接屏幕显示。<br>除了common（被其他目录的函数调用），其他目录下面的都是一个独立的程序（例程，面向一个典型应用），有自己的Main函数。<p>海思这一套到了很多关键的地方就是调用了一个库函数，很多情况很多核心的东西是看不到的，只知道调用这个库函数就能完成操作，<br>研究的重点是怎么去调这个库函数，怎么去传参，参数是什么意思，参数如果不对会返回怎么样一个错误，<p>（3）sampe的配置和编译，目录要完全搞清楚了再动。<br>2.sampe代码的学习的关键<br>（1）得理解很多基础概念，譬如图像采集原理、模拟数字、通道（海思发明的）、绑定等等。<br>说白了就是海思的人在定义概念，我们通过手册去理解概念。<br>（2）得从宏观上理解整个视频采集、内部传递、处理、编码输出、网络传输等的过程。<br>（3）的反复看代码，熟才能生巧，才能帮助理解整个代码。<br>（4）的查阅mpp手册，熟悉海思这一套API的规矩和一般用法。<br>（5）从sample/venc/Sampe_venc.c中的main函数开始看<br>3.几个基本的概念<br>（1） 分辨率<br>    VGA（640*480） D1（720*576） 720p 1080p 4K（4096*2160）  8K（8192*4320）<br>（2） 视频压缩标准<br>    h.264 H.264也称作MPEG-4AVC(Advanced Video Coding)，是一种视频压缩标准，同时也是一种被广泛使用的<br>    高精度视频录制、压缩、和发布格式。<br>    h.265/HEVC的编码架构大致上和h.264/AVC的架构相似。目前的HEVC标准总共有三种模式：Main、Main10、Main Still Picture.<br>（3）fps(frame per second)帧率<br>4.图像像素格式深度理解1<br>（1）颜色的学问<br>a.颜色是主观的还是客观存在的？ 颜色的本质是光的波长，但是因为有人去看了才有了颜色这个概念。<br>  是主观存在的概念。意思就是脱离人眼去研究颜色是没有意义的。<br>b.颜色的三个关键概念：亮度、色度、饱和度。<br>c.人的眼睛并非理想完美的颜色识别器件，图像表达也有清晰度和质量高低的差异。<br>d.科学研究如何定义（或者表达、记录、计算）一种颜色？色彩空间的概念<br>    颜色其实是有无数种，在RGB888中，RGB分别用8位二级制来表示，那么颜色就有2^24=16777216种，<br>    这其实是一种简化，其实颜色是有无数种的，因为光的波长是连续分布的。用这种简化已经足够应对<br>    人眼，再细分人眼也看不出区别。<br>   RGB就是一种色彩空间，色彩空间 不止一种，比如还有YUV，计算机领域主要有RGB和YUV这两种色彩空间，<br>   他们之间可以转换。<br>   <br>   色彩空间是一种方法，研究的是如何用数字来表达一种颜色。<br>5.rawRGB和图像采集过程<br>（1）图像采集的过程：光照在成像物体被反射-&gt;镜头汇聚-&gt;Sensor光电转换(模拟的光信号转为模拟的电信号)-&gt;ADC为rawRGB（这个数字的电信号就rawRGB）<br>（2）sensor上每一个像素点只采集一种颜色，像素点的上方有一个滤镜，只透一种颜色。这种采集到的就是rawRGB,一个像素只有一个颜色分量。因为sensor<br>单个像素根本就没有办法同时采集到三种颜色。<br>（3）rawRGB和RGB都是用来描述图像的，图像采集时RGB是由rawRGB计算而来的<br>（4）因为图像颜色本身有一定连贯性，而且人眼是非理想的，因此图像采集和再显示给人这整个构成中有三个要素：分辨率（多大像素）、pictch、观看距离<br>（5）如果是视频、质量好坏还要加上帧率framerate<br>（6）图像的表达、压缩、修整等相关技术，就发生在rawRGB进来以后的各个环节<p>6.RGB<br>（1）RGB有RGB565（要求不严格的领域里面还过的去）和RGB888（1600万色，真彩色，颜色精度高）,ARGB（A表示透明度）等多种子分类，<br>也可以搞一个RGB101010，只不过那么高的精度对人眼的意义不大。RGB888对人眼已经完全够用了。<br>（2）RGB的本质：自然界的颜色可以分成红绿蓝，是因为自然界颜色是可以叠加的。将色度分解为R、G、B三部分，然后记录下亮度数据<br>注意：用RGB来表示颜色，我们只是记录R G B各自的亮度数据，并没有记录颜色。例如0x234567  值23就是R的亮度值，45就是G的亮度值，67就是B的亮度值。<br>    RGB就是由rawRGB转换而来，做了一个平均运算，这个像素缺的那两个颜色值去周围取平均来补充。<br>    一幅图像的尺寸是1024*1024像素，每个像素的灰度是8比特，如果图像不压缩，则需要(1024*1024*8 bit)(1MB)的存储空间<br>    RGB有RGB556和RGB888，ARGB等多种子分类。R表示透明度<br>    RGB888表示R需要8bit，G需要8bit，B需要8bit，加起来需要24bit，<br>    RGB565是16位的，2个字节，就是R-5bit G-6bit B-5bit<br>    正常的RGB24是由24位即3个字节来描述一个像素,R G B各8位，而实际中为了减少图像数据的尺寸，如视频领域，对R G B 所使用的位数进行的缩减，如RGB565 RGB555<br>    颜色是可以叠加的，RGB的本质：将色度分解为R、G、B三部分，本身并没有记录颜色，只是记录了亮度。<br>    例如0x00234567 00表示透明度，23表示红色的亮度，45表示绿色的亮度，67表示蓝色的亮度<br>    用数学方法记录下来的就是为了复现，<br>    RGB的优势：方便数字化表达，广泛用于数字化彩色显示器，计算机编程等领域。<br>    RGG的劣势：和传统的灰度图（黑白图像，没有色度，只有亮度）兼容不好，表达颜色的效率不高。<br>    <ol><li>YUV    <br>    在这个体系了里面，亮度Y与色度UV是分开的，只有Y就是黑白图像，再加上UV就是彩色图像了，YUV的一个好处<br>    就是让彩色系统和传统黑白系统很好地兼容。一幅彩色的YUV图可以瞬间变成黑白的，YUV的出现就是为了兼容传统的<br>    黑白图像。电视广播发的是YUV的图，彩色电视全盘接受，黑白电视把色度UV丢掉就行。如果给的是RGB信号，黑白电视机<br>    根本就不认，因为在黑白电视机年代根本就还没有RGB这种模型。但是RGB的亮度信息是分成三个参量的。<br>    <br>    YUV和RGB的相同点是：都是用来表达颜色的数学方法;不同点是：对颜色的描述思路和方法不同。<br>    RGB将一个颜色拆解为3个基色的亮度组合，YUV将一个颜色分解为一个颜色分解为一个亮度和两个色度的组合。<br>    RGB和YUV是可以互相转换，是一个浮点数运算过程。<br>    R = Y + 1.4075 * (V-128);  <br>    G = Y - 0.3455 * (U-128) - 0.7169*(V-128);  <br>    B = Y + 1.779 * (U-128);  <br><br></ol><p>    Y = 0.299*R + 0.587*G + 0.114*B;<br>    U = (B-Y)/1.772;    <br>    V = (R-Y)/1.402;       (U~(-128-127))<p>    我们不用关心公式是怎么来的，关心的是相互转换的快慢。建议用DSP或者GPU来算，CUP来算就比较慢。<br>    YCbCr，几乎可以理解为YUV，差别比较小<br>    <ol><li>YUV格式<br>    YUV格式通常有两大类：packed格式和平面planar格式。前者将YUV分量存放在同一个数组中，通常是几个<br>    相邻的像素组成一个宏像素（macro-pixel）;而后者使用三个数组分开存放YUV三个分量，就像是一个三维平面一样。<br>    <br>    假设有4个像素，每个像素都有一个YUV<br>    所以：Y0U0V0 Y1U1V1 Y2U2V2 Y3U3V3<br>    packed:定义四个数组<br>    [Y0,U0,V0],[Y1,U1,V1],[Y2,U2,V2],[Y3,U3,V3] 将YUV分量存放在同一个数组中，如果是取一幅图像的一半<br>    当然是用packed的好处理，直接去掉前面或者后面的两个数组即可。<br>    planer：<br>    [Y0,Y1,Y2,Y3],[U0,U1,U2,U3],[V0,V1,V2,V3] 如果是感觉图片曝光有点暗，我们要调亮一些，当然是planer好处理，<br>    直接去调第一个数组就行。<br>    packed格式比较简单，planer格式比较复杂<br>    我们主要来关注planer<br>    YUV422 <br>    YUV420  一个像素对应一个Y，相邻的2*2像素小方块对应一个U和一个V，为什么UV可以简化，因为相邻的像素颜色相似性很高，<br>    packed这种格式比较简单，实践中见的大多数是planar格式<br>    我们可以看出任何一种格式Y都没有简化，因为对于人眼亮度信息比色度信息更加敏感。<br>    <br>    <br>        <br><li>有多种YUV相关的概念需要弄清楚<br>YUV    <br>YUYV<br>YUV422 <br>YUV420    (YUV411更加合适)<br>YUV422 planar  （YUV422P）<br>YUV420 planar  (YUV420P)<br>YUV422 semi planar  (YUV422SP)<br>YUV420 semi planar（YUV420SP）<br><br></ol><p>YUV420SP与YUV420P的数据格式它们的UV排列在原理上是完全不同的。<br>planer：<br>[Y0,Y1,Y2,Y3],[U0,U1,U2,U3],[V0,V1,V2,V3]<br>Semi palanar<br>[Y0,Y1,Y2,Y3],[U0,V0],[U1,V1],[U2,V2],[U3,V3]<p>YUV420的格式6个值Y1 Y2 Y3 Y4 U1 V1对应到每个像素怎么来表达<br>第一个像素点[Y1,U1,V1] <br>第二个像素点[Y2,U1,V1]<br>第三个像素点[Y3,U1,V1]<br>第四个像素点[Y4,U1,V1]<br>这四个像素点是共用了UV,但是Y是各自的<ol><li>mpp<br>mpp与驱动处在同一个层级，其实本来就是驱动，只不过以KO、API的形式提供的而已，只不过没有源代码而已。<br>驱动上面才是应用层。<br>（1）VI模块捕获视频图像，可对其做剪切、缩放等处理，并输出多路不同分辨率的图像数据。<br>注意：海思的枚举定义规范所有的字母大写，用下划线来分开，最后会有一个E，告诉你这是个枚举类型。<br>例如：PAYLOAD_TYPE_E 你在传输视频的时候，视频的类型我们叫PAYLOAD_TYPE<br>你把RTSP视频传输看做是用饺子皮把饺子馅运走，PAYLOAD_TYPE就是问你这个饺子是什么馅的<br>RTSP可以传送的类型（馅）有如下类型：RTSP本来就是用来传送一些音视频的<br>PT_H264  <br>PT_MP3<br>PT_AAC<br>...<br>这个音视频编码的种类特别多，你要用PAYLOAD_TYPE来告诉别人你要传输的是什么视频<br>enPayLoad[3]  这个以en开头的就告诉别人你这个是emue类型<br>stVpssGrpAttr 以st打头的就告诉别人你这个是一个结构体<br>VPSS_GRP_ATTR_S  这个类型表示结构体类型，以_S结尾<br>PAYLOAD_TYPE_E enPayLoad[3] = <br>VPSS_GRP_ATTR_S stVpssGrpAttr = {0};   st打头说明为结构体变量<br><br></ol><p>/* We just coyp this value of payload type from RTP/RTSP definition <em>/<br>typedef enum<br>{<br>    PT_PCMU          = 0,<br>    PT_1016          = 1,<br>    PT_G721          = 2,<br>    PT_GSM           = 3,<br>    PT_G723          = 4,<br>    PT_DVI4_8K       = 5,<br>    PT_DVI4_16K      = 6,<br>    PT_LPC           = 7,<br>    PT_PCMA          = 8,<br>    PT_G722          = 9,<br>    PT_S16BE_STEREO  = 10,<br>    PT_S16BE_MONO    = 11,<br>    PT_QCELP         = 12,<br>    PT_CN            = 13,<br>    PT_MPEGAUDIO     = 14,<br>    PT_G728          = 15,<br>    PT_DVI4_3        = 16,<br>    PT_DVI4_4        = 17,<br>    PT_G729          = 18,<br>    PT_G711A         = 19,<br>    PT_G711U         = 20,<br>    PT_G726          = 21,<br>    PT_G729A         = 22,<br>    PT_LPCM          = 23,<br>    PT_CelB          = 25,<br>    PT_JPEG          = 26,<br>    PT_CUSM          = 27,<br>    PT_NV            = 28,<br>    PT_PICW          = 29,<br>    PT_CPV           = 30,<br>    PT_H261          = 31,<br>    PT_MPEGVIDEO     = 32,<br>    PT_MPEG2TS       = 33,<br>    PT_H263          = 34,<br>    PT_SPEG          = 35,<br>    PT_MPEG2VIDEO    = 36,<br>    PT_AAC           = 37,<br>    PT_WMA9STD       = 38,<br>    PT_HEAAC         = 39,<br>    PT_PCM_VOICE     = 40,<br>    PT_PCM_AUDIO     = 41,<br>    PT_AACLC         = 42,<br>    PT_MP3           = 43,<br>    PT_ADPCMA        = 49,<br>    PT_AEC           = 50,<br>    PT_X_LD          = 95,<br>    PT_H264          = 96,<br>    PT_D_GSM_HR      = 200,<br>    PT_D_GSM_EFR     = 201,<br>    PT_D_L8          = 202,<br>    PT_D_RED         = 203,<br>    PT_D_VDVI        = 204,<br>    PT_D_BT656       = 220,<br>    PT_D_H263_1998   = 221,<br>    PT_D_MP1S        = 222,<br>    PT_D_MP2P        = 223,<br>    PT_D_BMPEG       = 224,<br>    PT_MP4VIDEO      = 230,<br>    PT_MP4AUDIO      = 237,<br>    PT_VC1           = 238,<br>    PT_JVC_ASF       = 255,<br>    PT_D_AVI         = 256,<br>    PT_DIVX3         = 257,<br>    PT_AVS             = 258,<br>    PT_REAL8         = 259,<br>    PT_REAL9         = 260,<br>    PT_VP6             = 261,<br>    PT_VP6F             = 262,<br>    PT_VP6A             = 263,<br>    PT_SORENSON          = 264,<br>    PT_H265          = 265,<br>    PT_MAX           = 266,<br>    /</em> add by hisilicon */<br>    PT_AMR           = 1001,<br>    PT_MJPEG         = 1002,<br>    PT_AMRWB         = 1003,<br>    PT_BUTT                          //这个是一个结尾标志符，不能用的，不要以为PT_BUTT也是一种传输类型，值为1004，<br>} PAYLOAD_TYPE_E;                    //值不重要，重要的是最后一个<p>typedef enum hiPIC_SIZE_E<br>{<br>    PIC_QCIF = 0,<br>    PIC_CIF,<br>    PIC_2CIF,<br>    PIC_HD1,<br>    PIC_D1,<br>    PIC_960H,<p>    PIC_QVGA,    /* 320 * 240 <em>/<br>    PIC_VGA,     /</em> 640 * 480 <em>/<br>    PIC_XGA,     /</em> 1024 * 768 <em>/<br>    PIC_SXGA,    /</em> 1400 * 1050 <em>/<br>    PIC_UXGA,    /</em> 1600 * 1200 <em>/<br>    PIC_QXGA,    /</em> 2048 * 1536 */<p>    PIC_WVGA,    /* 854 * 480 <em>/<br>    PIC_WSXGA,   /</em> 1680 * 1050 <em>/<br>    PIC_WUXGA,   /</em> 1920 * 1200 <em>/<br>    PIC_WQXGA,   /</em> 2560 * 1600 */<p>    PIC_HD720,   /* 1280 * 720 <em>/<br>    PIC_HD1080,  /</em> 1920 * 1080 <em>/<br>    PIC_2304x1296, /</em> 3M:2304 * 1296 <em>/<br>    PIC_2592x1520, /</em> 4M:2592 * 1520 <em>/<br>    PIC_5M,        /</em> 2592 * 1944 <em>/<br>    PIC_2688x1944,/</em> 2688 * 1944 <em>/<br>    PIC_6M,        /</em> 3072 * 2160 <em>/<br>    PIC_UHD4K,     /</em> 3840 * 2160 <em>/<br>    PIC_3Kx3K,      /</em> 3000 * 3000 <em>/<br>    PIC_12M,         /</em> 4000 * 3000 <em>/<br>    PIC_16M,         /</em> 4608 * 3456 */<p>    PIC_BUTT<br>} PIC_SIZE_E;<p>/******************************************************************************<ul><li>function :  H.264@1080p@30fps+H.264@VGA@30fps<br><br><br></ul><p>******************************************************************************/<br>HI_S32 SAMPLE_VENC_NORMALP_CLASSIC(HI_VOID)<br>{<br>    PAYLOAD_TYPE_E enPayLoad[2]= {PT_H265, PT_H264};   //告诉你有两路码流，编码类型一路是H.265，一路是H.264<br>    PIC_SIZE_E enSize[2] = {PIC_HD1080, PIC_HD1080};   //告诉你这两路码流的分辨率的大小，都是1080p<p>    VB_CONF_S stVbConf;  //视频缓存池<br>    <br>7.2 视频缓存池<br>7.2.1 什么是视频缓冲值<br>（1）视频的本质是多帧的图片，图片的本质是RGB或rawRGB数据，要占用一段连续内存。<br>（2）视频的裁剪、缩放、修正处理等各种操作，本质上就是对内存中的数据进行运算。<br>（3）视频缓存池（VB, video buffer）就是一段很大，又被合理划分和管理的内存，用来做<br>视频数据的暂存和运算场地<br>（4）公共视频缓存池的公共2字，可以理解为全局变量，也就是各个模块都能访问的一段内存<br>（5）看似视频缓存块在各个模块之间流转，实际上并没有内存复制，而是指针在传递<br>（6）视频缓冲池的内存由MPP来维护，我们在系统启动时就把整个SDRAM分成了2部分：系统部分<br>（由linux kernel来维护管理）和mpp部分（由mpp系统来维护管理）。<br>（7）缓冲池需要几个，每个中包含几个缓冲块，每个缓存块多大，都是可以由用户程序设置<br>好参数，然后调用MPP的相应API来向MPP申请分配的。<br>7.2.2 相关的数据结构和API<br>（1）VB_CONF_S   通过这个结构体告诉MPP缓冲池要几个，每个缓冲池要几个缓存块，每个缓冲块有多大<br>（2）HI_MPI_VB_SetConf  //VB_CONF_S只是做了个模型，这里是设置，<br>（3）HI_MPI_VB_Init     //真正执行了这个操作，开始分配内存了<br>VB_CONF_S（点菜，在菜单上把对应的菜给划上了）这个结构体变量定义，做了填充，把模型定下来了；<br>HI_MPI_VB_SetConf（把点好的那个菜单交给服务员了）之后就是把模型告诉了<br>VB了，HI_MPI_VB_Init （后厨开始按照菜单开始做菜了）之后就是VB真正去执行了，开始分配内存。<p>HI_MPI_VB_SetConf()   这个函数就在之前你装载的某个ko里面<br>这里需要注意顺序：先HI_MPI_VB_SetConf()再HI_MPI_VB_Init(),相当于先点菜，厨师再做菜<br>typedef struct hiVB_CONF_S<br>{<br>    HI_U32 u32MaxPoolCnt;     /* max count of pools, (0,VB_MAX_POOLS]  */    <br>    struct hiVB_CPOOL_S<br>    {<br>        HI_U32 u32BlkSize;   //每个缓冲池的内部block的大小                     <br>        HI_U32 u32BlkCnt;    //每个缓冲池的内部block的数量<br>        HI_CHAR acMmzName[MAX_MMZ_NAME_LEN]; //每个缓冲池的名字     <br>    }astCommPool[VB_MAX_COMM_POOLS];              //#define VB_MAX_COMM_POOLS 16<br>} VB_CONF_S;                                      //相当于定义了16个公共缓冲池<p>    /******************************************<br>     step  1: init sys variable                         //mpp系统变量的初始化<br>    ******************************************/<br>这一部分是填充那些变量<p>    /******************************************<br>     step 2: mpp system init.<br>    ***************************************<strong><em>/<br>    <br>    /</em></strong>***************************************<br>     step 3: start vi dev &amp; chn to capture<br>    ******************************************/<br>图像的采集，启动VI部分的dev（设备）和chn（通道）<p>    /******************************************<br>     step 4: start vpss and vi bind vpss<br>    ***************************************<strong><em>/<br>VI之后就会传给VPSS，传给VPSS之前先要把它启动起来<br>vi bind vpss：VI和VPSS是两个独立的模块.通过bind这操作，MPP系统提供的一个API(bind api)，<br>通过调用bind api就可以把VI和VPSS这两个模块绑定起来。绑定起来之后有什么作用呢？<br>VI这边当它采集到一帧图像丢到一个VB(VIDEO BUFFER视频缓冲池)里面的缓存块里面之后，这个<br>缓存块会自动传送到VPSS里面去。<br>    /</em></strong>***************************************<br>     step 5: start stream venc<br>    ***************************************<strong><em>/<br>VPSS处理完之后就会到VENC里面去。这一步就开始启动VENC单元，如果你要添加水印信息就在这一步去<br>添加。H.264编码也在这一步去研究。编码完之后呢就得到H.264的一个码流了。<br>    /</em></strong>***************************************<br>     step 6: stream venc process -- get stream, then save it to file.<br>    ******************************************/<br>我们得到H.264码流之后怎么处理呢？<br>（1）可以把这个码流打包成一个MP4存储到硬盘里面去，这就是录像。<br>（2）也可以分包，分成一个一个视频包通过RTSP传出去。<br>（3）也可以像sample一样直接作为一个裸流直接丢到流文件里面去。<br>    那么这种流文件必须通过像VLC这种能够解析裸流文件的播放器来观看。<br>所以说编码模块只负责输出一段H.264的裸流，这个裸流要怎么办是你的事。<p>    /******************************************<br>     step 7: exit process<br>    ******************************************/<br>如果不想录了之后就按两次回车跑到SAMPLE_COMM_VENC_StopGetStream();里面去<p>2.8 程序流程分析和MPP初始化详解<p>    /******************************************<br>     step  1: init sys variable<br>    ******************************************/<br>（1）初始化MPP的变量<p>/******************************************************************************<ul><li>funciton : Get enSize by diffrent sensor<br>*****************************************************************************<em>/<br>HI_S32 SAMPLE_COMM_VI_GetSizeBySensor(PIC_SIZE_E</em> penSize)<br>{<br>    HI_S32 s32Ret = HI_SUCCESS;<br>    SAMPLE_VI_MODE_E enMode = SENSOR_TYPE;   //这个SENSOR_TYPE其实是在Makefile.param里面配置的SONY_IMX323_CMOS_1080P_30FPS<br>    <br>    if (!penSize)    //要传一个可访问的地址<br>    {<br>        return HI_FAILURE;<br>    }<br><br></ul><p>    switch (enMode)<br>    {<br>        case PANASONIC_MN34220_SUBLVDS_720P_120FPS:<br>        case PANASONIC_MN34220_MIPI_720P_120FPS:<br>        case SONY_IMX117_LVDS_720P_240FPS:<br>            *penSize = PIC_HD720;<br>            break;<br>        case APTINA_MT9P006_DC_1080P_30FPS:<br>        case PANASONIC_MN34220_SUBLVDS_1080P_30FPS:<br>        case PANASONIC_MN34220_MIPI_1080P_30FPS:<br>        case OMNIVISION_OV4689_MIPI_1080P_30FPS:<br>        case OMNIVISION_OV2718_MIPI_1080P_30FPS:<br>        case OMNIVISION_OV2718_2A_MIPI_1080P_30FPS:<br>        case SONY_IMX323_CMOS_1080P_30FPS:             //我们就case到这里<br>        case APTINA_AR0237_LVDS_1080P_30FPS:<br>        case APTINA_AR0330_MIPI_1080P_30FPS:<br>        case SONY_IMX178_LVDS_1080P_30FPS:<br>        case SONY_IMX185_MIPI_1080P_30FPS:<br>        case SONY_IMX290_MIPI_1080P_30FPS:<br>        case JX_F22_MIPI_1080P_20FPS:<br>        case SMARTSENS_SC2235_CMOS_1080P_20FPS:<br>        case SONY_IMX117_LVDS_1080P_120FPS:<br>        case APTINA_AR0230_HISPI_1080P_30FPS:<br>            *penSize = PIC_HD1080;         //上面这一堆case都会到这里来，<br>            break;<br>        case APTINA_AR0330_MIPI_1536P_25FPS:<br>            *penSize = PIC_QXGA;<br>            break;<br>        case APTINA_AR0330_MIPI_1296P_25FPS:<br>            *penSize = PIC_2304x1296;<br>            break;<br>        case OMNIVISION_OV4689_MIPI_4M_30FPS:<br>            *penSize = PIC_2592x1520;<br>            break;<br>        case SONY_IMX178_LVDS_5M_30FPS:<br>        case OMNIVISION_OV5658_MIPI_5M_30FPS:<br>            *penSize = PIC_5M;<br>            break;<br>        case SONY_IMX226_LVDS_4K_30FPS:<br>        case SONY_IMX117_LVDS_4K_30FPS:<br>            *penSize = PIC_UHD4K;<br>            break;<p>        default:<br>            break;<br>    }<p>    return s32Ret;<br>}<p>SAMPLE_COMM_VI_GetSizeBySensor(&amp;enSize[0]);   //最终enSize[0]变成了PIC_HD1080<p>stVbConf.u32MaxPoolCnt = 128;   //规定缓冲池的上限，就是个空头支票，结合内存大小来给，海思那边有经验的人给出的<p>PIC_SIZE_E enSize[2] = {PIC_HD1080, PIC_HD1080};  //最开始初始化的时候其实也是PIC_HD1080<p>s32ChnNum   //标识出来是几路码流，比如3路码流是什么意思？同一个sensor输出3路不同分辨率的码流<br>一路主码流（原始的没有裁剪的，全功能版本），另外两路（在主码流的基础上经过裁剪缩放等操作简化而来，阉割版本）<br>为子码流，客户用手机看的话就用子码流看就行了，没必要看主码流，还可以省点网络带宽，还比较流畅。<p>裸流：开发过程中的半成品，把文件头一解析就知道这个文件的分辨率， mp4等都可以查一下文件头来看。<br>裸流是没有这个文件头的。720p 1280*720=92万像素至少要留点余量，100万像素以上<br>1080p 1920*1080 = 207万像素  至少sensor也要210万像素以上<p>    if(s32ChnNum &gt;= 1)    //每一路码流对应一个缓冲池<br>    {<br>        u32BlkSize = SAMPLE_COMM_SYS_CalcPicVbBlkSize(gs_enNorm,<br>                    enSize[0], SAMPLE_PIXEL_FORMAT, SAMPLE_SYS_ALIGN_WIDTH);//关键是把enSize[0]传进去，<br>        stVbConf.astCommPool[0].u32BlkSize = u32BlkSize;                    //从上面的得到enSize[0]为PIC_HD1080<br>        #ifndef hi3516ev100                                                 //把SAMPLE_PIXEL_FORMAT（像素格式）传进去，RGB888，RGB565占的字节就不一样<br>        stVbConf.astCommPool[0].u32BlkCnt = 10;                             //SAMPLE_SYS_ALIGN_WIDTH对齐排布<br>        #else<br>        stVbConf.astCommPool[0].u32BlkCnt = 5;<br>        #endif<br>    }<br>    if(s32ChnNum &gt;= 2)<br>    {<br>        u32BlkSize = SAMPLE_COMM_SYS_CalcPicVbBlkSize(gs_enNorm,<br>                    enSize[1], SAMPLE_PIXEL_FORMAT, SAMPLE_SYS_ALIGN_WIDTH);<br>        stVbConf.astCommPool[1].u32BlkSize = u32BlkSize;<br>        stVbConf.astCommPool[1].u32BlkCnt =10;<br>    }<br>    if(s32ChnNum &gt;= 3)<br>    {<br>        u32BlkSize = SAMPLE_COMM_SYS_CalcPicVbBlkSize(gs_enNorm,<br>                    enSize[2], SAMPLE_PIXEL_FORMAT, SAMPLE_SYS_ALIGN_WIDTH);<br>        stVbConf.astCommPool[2].u32BlkSize = u32BlkSize;<br>        stVbConf.astCommPool[2].u32BlkCnt = 10;<br>    }<br>为什么不同的码流要对应不同的pool呢？因为不同的码流分辨率不一样，对应的blocksize的大小也就不一样<p>    //SAMPLE_PRT(&quot;w:%d, u32AlignWidth:%d\n&quot;, CEILING_2_POWER(stSize.u32Width,u32AlignWidth), u32AlignWidth);<br>    u32VbSize = (CEILING_2_POWER(stSize.u32Width, u32AlignWidth) *<br>                 CEILING_2_POWER(stSize.u32Height, u32AlignWidth) *<br>                 ((PIXEL_FORMAT_YUV_SEMIPLANAR_422 == enPixFmt) ? 2 : 1.5));          //YUV422 4个像素占4+2+2=8个字节，那么每个像素平均占8/4=2个字节<br>    u32VbSize=宽*高*每个像素的字节数                                                                      //YUV420 4个像素占4+2+0=6个字节，那么每个像素平均占6/4=1.5个字节<br>                                                                                      <br>                                                                                      <br> <br>        u32BlkSize = SAMPLE_COMM_SYS_CalcPicVbBlkSize(gs_enNorm,\          //最后算出来u32BlkSize一帧图像所需内存的大小<br>                    enSize[0], SAMPLE_PIXEL_FORMAT, SAMPLE_SYS_ALIGN_WIDTH);<p>/******************************************************************************<ul><li>function : vb init &amp; MPI system init<br>*****************************************************************************<em>/<br>HI_S32 SAMPLE_COMM_SYS_Init(VB_CONF_S</em> pstVbConf)<br>{<br>    MPP_SYS_CONF_S stSysConf = {0};<br>    HI_S32 s32Ret = HI_FAILURE;<br><br></ul><p>    HI_MPI_SYS_Exit();  //注意顺序，释放的时候是SYS在前，VB在后的<br>    HI_MPI_VB_Exit();   //怕你之前的VB和SYS没处理干净，保险起见，打扫卫生的<br>    <br>    if (NULL == pstVbConf)<br>    {<br>        SAMPLE_PRT(&quot;input parameter is null, it is invaild!\n&quot;);<br>        return HI_FAILURE;<br>    }<p>    s32Ret = HI_MPI_VB_SetConf(pstVbConf);   //建立的时候是VB在前<br>    if (HI_SUCCESS != s32Ret)<br>    {<br>        SAMPLE_PRT(&quot;HI_MPI_VB_SetConf failed!\n&quot;);<br>        return HI_FAILURE;<br>    }<p>    s32Ret = HI_MPI_VB_Init();<br>    if (HI_SUCCESS != s32Ret)<br>    {<br>        SAMPLE_PRT(&quot;HI_MPI_VB_Init failed!\n&quot;);<br>        return HI_FAILURE;<br>    }<p>//只要把VB（缓冲池搞好了），SYS里面都是自动化的，海思封装的特别好，我们要操心的是VB的参数pstVbconf<p>8.1 学习方法：绘制调用关系图谱<br>（1）学习重点1：全局把控熟悉整个过程全景视图<br>VI里面：DEV和chanel<p>8.2 常用Sensor的接口有三种：MIPI LVDS DC<br>WDR ：宽动态范围，很亮和很暗都可以看得很清楚的一种技术。硬件本身要支持才行。<br>动态范围：在图像里面能看到的最亮的和最暗的一个比例。<br>ISP:image signal process图像信号处理，3518E内部的一个硬件单元，这个硬件单元就是用来做ISP运算的，<br>这个模块在MPP里面被封装成了API，SAMPLE_COMM_ISP_Init()函数就是启动ISP这个硬件单元，把这个线程<br>运行起来，ISP主要是用来处理图像，比如典型的3A，如果你自己添加了一个专用的ISP芯片，那么你可以不用<br>3518E内部的这个ISP模块（不启动它）。<p>8.3 进入ISP启动函数SAMPLE_COMM_ISP_Init()我们发现sensor_register_callback()，但是我们找不到<br>sensor_register_callback()在哪里定义的，其实它在sensor驱动里面定义的，<br>驱动定义目录为Z:\Hi3516CV300_SDK_V1.0.3.0\mpp\component\isp\sensor\sony_imx323\imx323_cmos.c<br>int sensor_register_callback(void)<br>{<br>    ISP_DEV IspDev = 0;<br>    HI_S32 s32Ret;<br>    ALG_LIB_S stLib;<br>    ISP_SENSOR_REGISTER_S stIspRegister;<br>    AE_SENSOR_REGISTER_S  stAeRegister;<br>    AWB_SENSOR_REGISTER_S stAwbRegister;<p>    cmos_init_sensor_exp_function(&amp;stIspRegister.stSnsExp);<br>    s32Ret = HI_MPI_ISP_SensorRegCallBack(IspDev, IMX323_ID, &amp;stIspRegister);<br>    if (s32Ret)<br>    {<br>        printf(&quot;sensor register callback function failed!\n&quot;);<br>        return s32Ret;<br>    }<br>    <br>    stLib.s32Id = 0;<br>    strncpy(stLib.acLibName, HI_AE_LIB_NAME, sizeof(HI_AE_LIB_NAME));<br>    cmos_init_ae_exp_function(&amp;stAeRegister.stSnsExp);<br>    s32Ret = HI_MPI_AE_SensorRegCallBack(IspDev, &amp;stLib, IMX323_ID, &amp;stAeRegister);<br>    if (s32Ret)<br>    {<br>        printf(&quot;sensor register callback function to ae lib failed!\n&quot;);<br>        return s32Ret;<br>    }<p>    stLib.s32Id = 0;<br>    strncpy(stLib.acLibName, HI_AWB_LIB_NAME, sizeof(HI_AWB_LIB_NAME));<br>    cmos_init_awb_exp_function(&amp;stAwbRegister.stSnsExp);<br>    s32Ret = HI_MPI_AWB_SensorRegCallBack(IspDev, &amp;stLib, IMX323_ID, &amp;stAwbRegister);<br>    if (s32Ret)<br>    {<br>        printf(&quot;sensor register callback function to ae lib failed!\n&quot;);<br>        return s32Ret;<br>    }<br>    <br>    return 0;<br>}<br>这个函数的使用可以参考  ISP_3A 开发指南.pdf    HiISP 开发参考.pdf<p>8.4 HI3518E内部ISP单元是隶属于VI模块的，VI模块就包含3大部分：<br>第一部分是和sensor对接的部分；第二部分就是ISP，第三部分就是VI dev和channel<br>dev就是用来采集图像的一个硬件单元，一个dev可能有好几个通道（分支），可以分成好几条道路（分支），然后<br>来进行不同的裁剪，并且每一个通道和后面进行绑定，dev就是一个整体管道，我这个管道有一个入口，从sensor这<br>边进去的，但是有3个甚至10出口（通道），每一个出口连接了后端的一个流程，<br>Hi3519v101可以接两路sensor自然就有两个dev和两个channel<p>9  VPSS部分详解<br>VPSS(Video Process Sub-System)  对一幅图像进行统一处理，不是针对某一块<br>去噪、去隔行（把隔行扫描的转成逐行扫描的，之前有的sensor是隔行扫描的，现在的sensor一般都是逐行扫描的了）<br>然后再对各通道分别进行缩放（我们出来的图像有1080p，有720p，VGA的等就是因为进行了缩放，是在VPSS这里来处理的）<br>最后输出多种不同分辨率的图像（从这里可以看出一进多出的，VI是一路进来，VPSS是多路输出的）。<br>FRC(Frame Rate Control) Crop（裁剪） NR(Noise Reduce) LDC(Lens Distortion Correction)<br>Rotate Cover/Overlay  Scale（缩放）  Mirror/Flip  FishEye（鱼眼）<p>基本概念：<p>9.1  VPSS手册部分解读<br>9.2  VPSS的函数调用关系图谱<p>9.3 VPSS部分详解2<br>9.3.1 VPSS的Grp和Chn<br>Grp是一个组合，一个物理硬件VPSS在软件上的一个映射，如果我们只有一个Grp的话就是物理硬件VPSS在软件上的一个<br>1:1的一个映射。<br>chn是Grp里面的通道，这个通道有物理的有扩展的，物理通道有对应的硬件，扩展通道没有对应的硬件，扩展通道其实<br>是对应了一些功能（缩放等），<br>注意：VI的chn和VPSS的chn是两回事，VI那边的chn是VI里面Dev里面的chn，VI那边DEV的地位有点类似于VPSS这边的Grp。<br>对接的时候是VI这边的chn去绑定VPSS这边的Grp。<p>10.图像编码压缩基本原理<br>为什么需要压缩，因为原始的图像数据太多，不利于传输。<p>10.1 常见图像、视频、音频数据中存在的冗余类型：<br>（1）空间冗余<br>一幅图像表面上个采样点的颜色之间往往存在空间的连贯性，比如图片，两只老鼠的颜色，背后的墙，灰色的地板，颜色<br>都一样。这些颜色相同的块就可以压缩。<br>空间冗余主要发生在单张图片，比如我们的照片。<p>（2）时间冗余<br>这种冗余主要针对视频。<br>运动图像（视频）一般为位于一时间轴区间的一组连续画面，其中的相邻帧往往包含相同的背景和移动物体，只不过移动物体<br>所在的空间位置略有不同，所以后一帧的数据与前一帧的数据有许多共同的地方，这种共同性是由于相邻帧记录了相邻时刻的<br>同一场景画面，所以称为时间冗余。<p>（3）视觉冗余<br>人类视觉系统对细微的颜色差异感觉不明显。<br>说白了就是图像本身存的清晰度是高于人眼的识别度的，高出了的这些清晰度其实媚眼抛给瞎子了。<br>所以干脆把它去掉算了。去掉后对图像来说清晰度是下降了，但对人眼来说感觉不出来。<p>10.2 一些概念<br>压缩比<br>图像质量<br>压缩和解压缩的速度<br>H.264 profile: 图像清晰度的一个标准（可以理解为普通的清晰度，高清的清晰度）<br>         BP（基本的，清晰度最差的，这种编码速度快，压缩比也会高）<br>         MP（中等的，主流的）<br>         HP（高清的，清晰度最好）<br>JPEG：用来做图片的，不是视频<br>MOTION JPEG(MJPEG) : 早于H.264的视频压缩标准，过时了<br>H.265  只支持MP<br>码率控制器（RC）：什么是码率？码率就是数据传输时单位时间传送的数据位数。一般我们用的单位是kbps即千位每秒。<br>通俗一点理解就是取样率，单位时间内取样率越大，精度就越高，处理出来的文件就越接近原始文件。<br>但是文件体积与取样率是成正比的，所以几乎所有的编码格式重视的都是如何用最低的码率达到最少的失真。<p>10.3 VPSS与VENC绑定关系<br>    /*** enSize[0] **/<br>    if(s32ChnNum &gt;= 1)<br>    {<br>        VpssGrp = 0;<br>        VpssChn = 0;<br>        VencChn = 0;    //从这里可以看出来VPSS的Chn0和Venc的Chn0绑定<p>        s32Ret = SAMPLE_COMM_VENC_Start(VencChn, enPayLoad[0],<br>                                       gs_enNorm, enSize[0], enRcMode,u32Profile,ROTATE_NONE);<br>        if (HI_SUCCESS != s32Ret)<br>        {<br>            SAMPLE_PRT(&quot;Start Venc failed!\n&quot;);<br>            goto END_VENC_1080P_CLASSIC_5;<br>        }<p>        s32Ret = SAMPLE_COMM_VENC_BindVpss(VencChn, VpssGrp, VpssChn);<br>        if (HI_SUCCESS != s32Ret)<br>        {<br>            SAMPLE_PRT(&quot;Start Venc failed!\n&quot;);<br>            goto END_VENC_1080P_CLASSIC_5;<br>        }<br>    }<p>裸流：没有文件头，没有文件格式。文件头就是告诉别人我这个文件（视频，图片等）是什么格式的，比如是mp4的等等。<br>播放器拿到这个文件首先要获取我的文件头知道是什么格式的文件后才去处理。<br>视频裸流（只有视频数据）你拿到普通的播放器是播放不了的，<br>————————————————<br>版权声明：本文为CSDN博主「陶通宁」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=https://blog.csdn.net/taotongning/article/details/84882431 target=_blank>https://blog.csdn.net/taotongning/article/details/84882431</a></div><div class=clear></div></div></div></article><div class=clear></div><p class=post-tags><span class="fa fa-tags">Tags:</span>
<a rel=tag href=../../../tags/hisilicon>hisilicon</a><div id=related-posts><div class=related-inner></div></div><section id=comments class=themeform></section><section id=comments class=themeform></section></div></div><div class="sidebar s1 collapsed" data-position=left data-layout=col-3cm data-sb-id=s1><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>Follow:<ul class=social-links><li><a class=social-tooltip href=mailto: title=Email><i class="fa fa-envelope"></i></a><li><a class=social-tooltip href=//github.com/ title=GitHub><i class="fa fa-github"></i></a><li><a class=social-tooltip title="RSS Feed" aria-label="RSS Feed" href=../../../feed target=_blank style=color:#ffffffb2><i class="fa fa-rss"></i></a></ul></div><ul class="post-nav group"><li class=previous><a href=../../../hardware/hisilicon/hi3516-mpp-sdk1/ rel=prev><i class="fa fa-chevron-left"></i><strong>Previous Post</strong>
<span>hi3516 mpp</span></a></ul><div id=categories-2 class="widget widget_categories"><h3>分类</h3><ul><li class="cat-item cat-item-1"><a href=../../../categories/ai/>Ai</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/algorithm/>Algorithm</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/android/>Android</a>
<small>(17)</small><li class="cat-item cat-item-1"><a href=../../../categories/ansible/>Ansible</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/beats/>Beats</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/busybox/>Busybox</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/caffe/>Caffe</a>
<small>(21)</small><li class="cat-item cat-item-1"><a href=../../../categories/cgo/>Cgo</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/clang/>Clang</a>
<small>(19)</small><li class="cat-item cat-item-1"><a href=../../../categories/cmd/>Cmd</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/cpp/>Cpp</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../categories/cross_compile/>Cross_compile</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../categories/css/>Css</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/dart/>Dart</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/database/>Database</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/dataset/>Dataset</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/deeplearning/>Deeplearning</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/devops/>Devops</a>
<small>(70)</small><li class="cat-item cat-item-1"><a href=../../../categories/docker/>Docker</a>
<small>(18)</small><li class="cat-item cat-item-1"><a href=../../../categories/dts/>Dts</a>
<small>(5)</small><li class="cat-item cat-item-1"><a href=../../../categories/elasticsearch/>Elasticsearch</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/english/>English</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/freertos/>Freertos</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/front-end/>Front-End</a>
<small>(20)</small><li class="cat-item cat-item-1"><a href=../../../categories/golang/>Golang</a>
<small>(134)</small><li class="cat-item cat-item-1"><a href=../../../categories/hacker/>Hacker</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hardware/>Hardware</a>
<small>(14)</small><li class="cat-item cat-item-1"><a href=../../../categories/hi3559/>Hi3559</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hisi/>Hisi</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/hisilicon/>Hisilicon</a>
<small>(44)</small><li class="cat-item cat-item-1"><a href=../../../categories/jetson/>Jetson</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/js/>Js</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/jumpserver/>Jumpserver</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/kernel/>Kernel</a>
<small>(14)</small><li class="cat-item cat-item-1"><a href=../../../categories/linux/>Linux</a>
<small>(93)</small><li class="cat-item cat-item-1"><a href=../../../categories/linux-%E5%91%BD%E4%BB%A4/>Linux-命令</a>
<small>(120)</small><li class="cat-item cat-item-1"><a href=../../../categories/mac/>Mac</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/machinelearn/>Machinelearn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/machinelearning/>Machinelearning</a>
<small>(11)</small><li class="cat-item cat-item-1"><a href=../../../categories/macos/>Macos</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../categories/math/>Math</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/matplotlib/>Matplotlib</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/mpp/>Mpp</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/mysql/>Mysql</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/ncnn/>Ncnn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/network/>Network</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/nginx/>Nginx</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/nnie/>Nnie</a>
<small>(11)</small><li class="cat-item cat-item-1"><a href=../../../categories/node/>Node</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/numpy/>Numpy</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/opencv/>Opencv</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../categories/pandas/>Pandas</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/platform/>Platform</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/post/>Post</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/pyqt/>Pyqt</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../categories/python/>Python</a>
<small>(30)</small><li class="cat-item cat-item-1"><a href=../../../categories/pytorch/>Pytorch</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../categories/raspi/>Raspi</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/rk3288/>Rk3288</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../categories/rk3399/>Rk3399</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../categories/rtmp/>Rtmp</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/scikit/>Scikit</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/shell/>Shell</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/tool/>Tool</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/weixin/>Weixin</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/windows/>Windows</a>
<small>(22)</small><li class="cat-item cat-item-1"><a href=../../../categories/work/>Work</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/yolo/>Yolo</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/>前端技术</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%8D%8F%E8%AE%AE/>协议</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/>嵌入式</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B7%A5%E5%85%B7/>工具</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/>常用算法</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/>微服务</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/>排列组合</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a>
<small>(37)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91/>文本编辑</a>
<small>(30)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/>正则表达式</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%94%9F%E6%B4%BB%E6%8A%80%E5%B7%A7/>生活技巧</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%A8%8B%E5%BA%8F%E5%91%98/>程序员</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/>网络安全</a>
<small>(40)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7/>集群监控</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/>静态博客</a>
<small>(15)</small><li class="cat-item cat-item-1"><a href=../../../categories/%E9%AB%98%E6%95%B0/>高数</a>
<small>(2)</small></ul></div></div></div><div class="sidebar s2 collapsed" data-position=right data-layout=col-3cm data-sb-id=s2><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>More</div><ul class="post-nav group"><li class=next><a href=../../../hardware/hisilicon/hi3516-mpp-sample_venc/ rel=next><i class="fa fa-chevron-right"></i><strong>Next post</strong>
<span>hi3516 mpp sample_venc</span></a></ul><div id=tag_cloud-2 class="widget widget_tag_cloud"><h3>标签云</h3><div class="tagcloud post-tags"><a rel=tag href=../../../tags/ai/ class=tag-link-7 title="1 Posts">ai<small>(7)</small></a>
<a rel=tag href=../../../tags/ansible/ class=tag-link-19 title="1 Posts">ansible<small>(19)</small></a>
<a rel=tag href=../../../tags/awesome/ class=tag-link-3 title="1 Posts">awesome<small>(3)</small></a>
<a rel=tag href=../../../tags/bfc/ class=tag-link-2 title="1 Posts">bfc<small>(2)</small></a>
<a rel=tag href=../../../tags/c/ class=tag-link-5 title="1 Posts">c<small>(5)</small></a>
<a rel=tag href=../../../tags/caffe/ class=tag-link-21 title="1 Posts">caffe<small>(21)</small></a>
<a rel=tag href=../../../tags/centos7/ class=tag-link-2 title="1 Posts">centos7<small>(2)</small></a>
<a rel=tag href=../../../tags/cgo/ class=tag-link-10 title="1 Posts">cgo<small>(10)</small></a>
<a rel=tag href=../../../tags/clang/ class=tag-link-19 title="1 Posts">clang<small>(19)</small></a>
<a rel=tag href=../../../tags/cmd/ class=tag-link-2 title="1 Posts">cmd<small>(2)</small></a>
<a rel=tag href=../../../tags/cpp/ class=tag-link-6 title="1 Posts">cpp<small>(6)</small></a>
<a rel=tag href=../../../tags/cross_compile/ class=tag-link-8 title="1 Posts">cross_compile<small>(8)</small></a>
<a rel=tag href=../../../tags/css/ class=tag-link-20 title="1 Posts">css<small>(20)</small></a>
<a rel=tag href=../../../tags/css3/ class=tag-link-2 title="1 Posts">css3<small>(2)</small></a>
<a rel=tag href=../../../tags/curd/ class=tag-link-3 title="1 Posts">curd<small>(3)</small></a>
<a rel=tag href=../../../tags/curl/ class=tag-link-2 title="1 Posts">curl<small>(2)</small></a>
<a rel=tag href=../../../tags/dataset/ class=tag-link-2 title="1 Posts">dataset<small>(2)</small></a>
<a rel=tag href=../../../tags/devops/ class=tag-link-3 title="1 Posts">devops<small>(3)</small></a>
<a rel=tag href=../../../tags/docker/ class=tag-link-21 title="1 Posts">docker<small>(21)</small></a>
<a rel=tag href=../../../tags/drone/ class=tag-link-22 title="1 Posts">drone<small>(22)</small></a>
<a rel=tag href=../../../tags/dts/ class=tag-link-6 title="1 Posts">dts<small>(6)</small></a>
<a rel=tag href=../../../tags/elasticsearch/ class=tag-link-9 title="1 Posts">elasticsearch<small>(9)</small></a>
<a rel=tag href=../../../tags/emacs/ class=tag-link-12 title="1 Posts">emacs<small>(12)</small></a>
<a rel=tag href=../../../tags/encode/ class=tag-link-3 title="1 Posts">encode<small>(3)</small></a>
<a rel=tag href=../../../tags/english/ class=tag-link-8 title="1 Posts">english<small>(8)</small></a>
<a rel=tag href=../../../tags/es6/ class=tag-link-2 title="1 Posts">es6<small>(2)</small></a>
<a rel=tag href=../../../tags/etcd/ class=tag-link-4 title="1 Posts">etcd<small>(4)</small></a>
<a rel=tag href=../../../tags/flannel/ class=tag-link-2 title="1 Posts">flannel<small>(2)</small></a>
<a rel=tag href=../../../tags/git/ class=tag-link-6 title="1 Posts">git<small>(6)</small></a>
<a rel=tag href=../../../tags/github/ class=tag-link-2 title="1 Posts">github<small>(2)</small></a>
<a rel=tag href=../../../tags/golang/ class=tag-link-148 title="1 Posts">golang<small>(148)</small></a>
<a rel=tag href=../../../tags/gradle/ class=tag-link-3 title="1 Posts">gradle<small>(3)</small></a>
<a rel=tag href=../../../tags/haproxy/ class=tag-link-5 title="1 Posts">haproxy<small>(5)</small></a>
<a rel=tag href=../../../tags/hardware/ class=tag-link-14 title="1 Posts">hardware<small>(14)</small></a>
<a rel=tag href=../../../tags/hexo/ class=tag-link-3 title="1 Posts">hexo<small>(3)</small></a>
<a rel=tag href=../../../tags/hisilicon/ class=tag-link-44 title="1 Posts">hisilicon<small>(44)</small></a>
<a rel=tag href=../../../tags/html/ class=tag-link-2 title="1 Posts">html<small>(2)</small></a>
<a rel=tag href=../../../tags/http/ class=tag-link-6 title="1 Posts">http<small>(6)</small></a>
<a rel=tag href=../../../tags/hugo/ class=tag-link-14 title="1 Posts">hugo<small>(14)</small></a>
<a rel=tag href=../../../tags/imagemagick/ class=tag-link-2 title="1 Posts">imagemagick<small>(2)</small></a>
<a rel=tag href=../../../tags/ip/ class=tag-link-3 title="1 Posts">ip<small>(3)</small></a>
<a rel=tag href=../../../tags/iproute2/ class=tag-link-5 title="1 Posts">iproute2<small>(5)</small></a>
<a rel=tag href=../../../tags/iptables/ class=tag-link-17 title="1 Posts">iptables<small>(17)</small></a>
<a rel=tag href=../../../tags/javascript/ class=tag-link-19 title="1 Posts">javascript<small>(19)</small></a>
<a rel=tag href=../../../tags/jetson/ class=tag-link-3 title="1 Posts">jetson<small>(3)</small></a>
<a rel=tag href=../../../tags/jquery/ class=tag-link-12 title="1 Posts">jquery<small>(12)</small></a>
<a rel=tag href=../../../tags/js/ class=tag-link-10 title="1 Posts">js<small>(10)</small></a>
<a rel=tag href=../../../tags/jumpserver/ class=tag-link-2 title="1 Posts">jumpserver<small>(2)</small></a>
<a rel=tag href=../../../tags/jwt/ class=tag-link-3 title="1 Posts">jwt<small>(3)</small></a>
<a rel=tag href=../../../tags/kernel/ class=tag-link-14 title="1 Posts">kernel<small>(14)</small></a>
<a rel=tag href=../../../tags/kubernetes/ class=tag-link-11 title="1 Posts">kubernetes<small>(11)</small></a>
<a rel=tag href=../../../tags/linux/ class=tag-link-21 title="1 Posts">linux<small>(21)</small></a>
<a rel=tag href=../../../tags/lvs/ class=tag-link-8 title="1 Posts">lvs<small>(8)</small></a>
<a rel=tag href=../../../tags/machinelearn/ class=tag-link-3 title="1 Posts">machinelearn<small>(3)</small></a>
<a rel=tag href=../../../tags/machinelearning/ class=tag-link-11 title="1 Posts">machinelearning<small>(11)</small></a>
<a rel=tag href=../../../tags/macos/ class=tag-link-14 title="1 Posts">macos<small>(14)</small></a>
<a rel=tag href=../../../tags/makefile/ class=tag-link-2 title="1 Posts">makefile<small>(2)</small></a>
<a rel=tag href=../../../tags/mariadb/ class=tag-link-9 title="1 Posts">mariadb<small>(9)</small></a>
<a rel=tag href=../../../tags/math/ class=tag-link-7 title="1 Posts">math<small>(7)</small></a>
<a rel=tag href=../../../tags/matplotlib/ class=tag-link-3 title="1 Posts">matplotlib<small>(3)</small></a>
<a rel=tag href=../../../tags/maven/ class=tag-link-2 title="1 Posts">maven<small>(2)</small></a>
<a rel=tag href=../../../tags/meteor/ class=tag-link-7 title="1 Posts">meteor<small>(7)</small></a>
<a rel=tag href=../../../tags/ml/ class=tag-link-3 title="1 Posts">ml<small>(3)</small></a>
<a rel=tag href=../../../tags/mpp/ class=tag-link-9 title="1 Posts">mpp<small>(9)</small></a>
<a rel=tag href=../../../tags/mysql/ class=tag-link-61 title="1 Posts">mysql<small>(61)</small></a>
<a rel=tag href=../../../tags/ncnn/ class=tag-link-3 title="1 Posts">ncnn<small>(3)</small></a>
<a rel=tag href=../../../tags/netns/ class=tag-link-2 title="1 Posts">netns<small>(2)</small></a>
<a rel=tag href=../../../tags/network/ class=tag-link-2 title="1 Posts">network<small>(2)</small></a>
<a rel=tag href=../../../tags/nginx/ class=tag-link-28 title="1 Posts">nginx<small>(28)</small></a>
<a rel=tag href=../../../tags/nmap/ class=tag-link-2 title="1 Posts">nmap<small>(2)</small></a>
<a rel=tag href=../../../tags/nnie/ class=tag-link-11 title="1 Posts">nnie<small>(11)</small></a>
<a rel=tag href=../../../tags/node/ class=tag-link-4 title="1 Posts">node<small>(4)</small></a>
<a rel=tag href=../../../tags/nosql/ class=tag-link-8 title="1 Posts">nosql<small>(8)</small></a>
<a rel=tag href=../../../tags/npm/ class=tag-link-3 title="1 Posts">npm<small>(3)</small></a>
<a rel=tag href=../../../tags/numpy/ class=tag-link-4 title="1 Posts">numpy<small>(4)</small></a>
<a rel=tag href=../../../tags/oauth2/ class=tag-link-2 title="1 Posts">oauth2<small>(2)</small></a>
<a rel=tag href=../../../tags/opencv/ class=tag-link-10 title="1 Posts">opencv<small>(10)</small></a>
<a rel=tag href=../../../tags/openssl/ class=tag-link-3 title="1 Posts">openssl<small>(3)</small></a>
<a rel=tag href=../../../tags/pandoc/ class=tag-link-2 title="1 Posts">pandoc<small>(2)</small></a>
<a rel=tag href=../../../tags/php/ class=tag-link-4 title="1 Posts">php<small>(4)</small></a>
<a rel=tag href=../../../tags/post/ class=tag-link-4 title="1 Posts">post<small>(4)</small></a>
<a rel=tag href=../../../tags/powershell/ class=tag-link-2 title="1 Posts">powershell<small>(2)</small></a>
<a rel=tag href=../../../tags/prometheus/ class=tag-link-8 title="1 Posts">prometheus<small>(8)</small></a>
<a rel=tag href=../../../tags/pyqt/ class=tag-link-8 title="1 Posts">pyqt<small>(8)</small></a>
<a rel=tag href=../../../tags/python/ class=tag-link-32 title="1 Posts">python<small>(32)</small></a>
<a rel=tag href=../../../tags/pytorch/ class=tag-link-6 title="1 Posts">pytorch<small>(6)</small></a>
<a rel=tag href=../../../tags/raspi/ class=tag-link-4 title="1 Posts">raspi<small>(4)</small></a>
<a rel=tag href=../../../tags/redis/ class=tag-link-2 title="1 Posts">redis<small>(2)</small></a>
<a rel=tag href=../../../tags/reflect/ class=tag-link-3 title="1 Posts">reflect<small>(3)</small></a>
<a rel=tag href=../../../tags/responsive/ class=tag-link-2 title="1 Posts">responsive<small>(2)</small></a>
<a rel=tag href=../../../tags/restful/ class=tag-link-6 title="1 Posts">restful<small>(6)</small></a>
<a rel=tag href=../../../tags/rk3288/ class=tag-link-22 title="1 Posts">rk3288<small>(22)</small></a>
<a rel=tag href=../../../tags/rk3399/ class=tag-link-9 title="1 Posts">rk3399<small>(9)</small></a>
<a rel=tag href=../../../tags/route/ class=tag-link-2 title="1 Posts">route<small>(2)</small></a>
<a rel=tag href=../../../tags/rsync/ class=tag-link-2 title="1 Posts">rsync<small>(2)</small></a>
<a rel=tag href=../../../tags/rtmp/ class=tag-link-2 title="1 Posts">rtmp<small>(2)</small></a>
<a rel=tag href=../../../tags/scikit/ class=tag-link-3 title="1 Posts">scikit<small>(3)</small></a>
<a rel=tag href=../../../tags/scrapy/ class=tag-link-8 title="1 Posts">scrapy<small>(8)</small></a>
<a rel=tag href=../../../tags/scss/ class=tag-link-2 title="1 Posts">scss<small>(2)</small></a>
<a rel=tag href=../../../tags/sed/ class=tag-link-3 title="1 Posts">sed<small>(3)</small></a>
<a rel=tag href=../../../tags/seo/ class=tag-link-5 title="1 Posts">seo<small>(5)</small></a>
<a rel=tag href=../../../tags/shell/ class=tag-link-10 title="1 Posts">shell<small>(10)</small></a>
<a rel=tag href=../../../tags/sqlite/ class=tag-link-2 title="1 Posts">sqlite<small>(2)</small></a>
<a rel=tag href=../../../tags/ssh/ class=tag-link-3 title="1 Posts">ssh<small>(3)</small></a>
<a rel=tag href=../../../tags/stm32/ class=tag-link-5 title="1 Posts">stm32<small>(5)</small></a>
<a rel=tag href=../../../tags/swagger/ class=tag-link-2 title="1 Posts">swagger<small>(2)</small></a>
<a rel=tag href=../../../tags/swarm/ class=tag-link-2 title="1 Posts">swarm<small>(2)</small></a>
<a rel=tag href=../../../tags/sysbench/ class=tag-link-2 title="1 Posts">sysbench<small>(2)</small></a>
<a rel=tag href=../../../tags/sysctl/ class=tag-link-2 title="1 Posts">sysctl<small>(2)</small></a>
<a rel=tag href=../../../tags/systemctl/ class=tag-link-2 title="1 Posts">systemctl<small>(2)</small></a>
<a rel=tag href=../../../tags/tc/ class=tag-link-2 title="1 Posts">tc<small>(2)</small></a>
<a rel=tag href=../../../tags/tcpdump/ class=tag-link-2 title="1 Posts">tcpdump<small>(2)</small></a>
<a rel=tag href=../../../tags/timezone/ class=tag-link-2 title="1 Posts">timezone<small>(2)</small></a>
<a rel=tag href=../../../tags/tshark/ class=tag-link-2 title="1 Posts">tshark<small>(2)</small></a>
<a rel=tag href=../../../tags/ubuntu/ class=tag-link-2 title="1 Posts">ubuntu<small>(2)</small></a>
<a rel=tag href=../../../tags/ulimit/ class=tag-link-2 title="1 Posts">ulimit<small>(2)</small></a>
<a rel=tag href=../../../tags/vim/ class=tag-link-14 title="1 Posts">vim<small>(14)</small></a>
<a rel=tag href=../../../tags/webpack3/ class=tag-link-2 title="1 Posts">webpack3<small>(2)</small></a>
<a rel=tag href=../../../tags/windows/ class=tag-link-18 title="1 Posts">windows<small>(18)</small></a>
<a rel=tag href=../../../tags/wireshark/ class=tag-link-2 title="1 Posts">wireshark<small>(2)</small></a>
<a rel=tag href=../../../tags/xidel/ class=tag-link-2 title="1 Posts">xidel<small>(2)</small></a>
<a rel=tag href=../../../tags/xml/ class=tag-link-2 title="1 Posts">xml<small>(2)</small></a>
<a rel=tag href=../../../tags/yaml/ class=tag-link-2 title="1 Posts">yaml<small>(2)</small></a>
<a rel=tag href=../../../tags/yolo/ class=tag-link-12 title="1 Posts">yolo<small>(12)</small></a>
<a rel=tag href=../../../tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/ class=tag-link-2 title="1 Posts">微服务<small>(2)</small></a></div></div></div></div>`</div></div></div></div></div><script>var HUParams={"_disabled":[],"SmoothScroll":{"Enabled":true,"Options":{"touchpadSupport":false}},"centerAllImg":"1","timerOnScrollAllBrowsers":"1","extLinksStyle":"1","extLinksTargetExt":"1","extLinksSkipSelectors":{"classes":["btn","button"],"ids":[]},"imgSmartLoadEnabled":"1","imgSmartLoadOpts":{"parentSelectors":[".container .content",".container .sidebar","#footer","#header-widgets"],"opts":{"excludeImg":[".tc-holder-img"],"fadeIn_options":100}},"goldenRatio":"1.618","gridGoldenRatioLimit":"350","sbStickyUserSettings":{"desktop":true,"mobile":true},"isWPMobile":"","menuStickyUserSettings":{"desktop":"stick_up","mobile":"stick_up"},"isDevMode":"","ajaxUrl":"https:\/\/demo-hueman.presscustomizr.com\/?huajax=1","frontNonce":{"id":"HuFrontNonce","handle":"798e5956c0"},"userStarted":{"with":"before|1.0.4","on":{"date":"2017-05-22 16:30:22.000000","timezone_type":3,"timezone":"UTC"}},"isWelcomeNoteOn":"","welcomeContent":""};</script><script src=https://cdn.bootcss.com/lodash-compat/3.10.2/lodash.min.js></script><script src=https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js></script><script src=../../../front/js/scripts.js></script><footer id=footer><section class=container id=footer-bottom><div class=container-inner><a id=back-to-top href=#><i class="fa fa-angle-up"></i></a><div class="pad group"><div class="grid one-half"><div id=copyright><p>Copyright (c) 2017. All rights reserved. (版权所有) <a href=http://www.miitbeian.gov.cn/>鲁ICP备17074587号-1</a></div></div><div class="grid one-half last"><ul class=social-links><li><a class=social-tooltip title="On WeiBo" href=http://weibo.com/rinetd target=_blank><i class="fa fa-weibo"></i></a><li><a class=social-tooltip title="On Twitter" href=https://twitter.com/rinetd target=_blank><i class="fa fa-twitter"></i></a><li><a class=social-tooltip title="On GitHub" href=https://github.com/rinetd target=_blank><i class="fa fa-github"></i></a></ul></div></div></div></section></footer><div class=back-to-top id=back-to-top><i class="fa fa-angle-double-up"></i></div><script>$(".topbar-toggle-down").click(function(){$("#nav-topbar").css("overflow","visible");});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5HM5XM2" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5HM5XM2');</script>