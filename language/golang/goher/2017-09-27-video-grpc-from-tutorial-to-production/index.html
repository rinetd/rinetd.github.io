<!doctype html><html lang=zh-cn class=no-js><title>è§†é¢‘ç¬”è®°ï¼šgRPC ä»å­¦ä¹ åˆ°ç”Ÿäº§ - Alan Shreve</title><meta charset=utf-8><meta name=robots content=index,nofollow><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta http-equiv=x-dns-prefetch-control content=on><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=origin-when-cross-origin><meta name=description content="è§†é¢‘ä¿¡æ¯ grpc: From Tutorial to Production by Alan Shreve at GopherCon 2017 {% owl youtube 7FZ6ZyzGex0 %} https://www.youtube.com/watch?v=7FZ6ZyzGex0 åšæ–‡ï¼šhttps://about.sourcegraph.com/go/grpc-in-produ"><meta name=author content=rinetd><meta name=google-site-verification content=ifeWsnNpU7w8vP3ii_Cjq-P9LKw3ngVitnMWv4XmJqk><link rel=canonical href=../../../../language/golang/goher/2017-09-27-video-grpc-from-tutorial-to-production/><link rel=icon href=../../../../public/favicon.ico><link rel="shortcut icon" href=../../../../public/favicon.ico><link rel=stylesheet href=../../../../front/css/main.min.css><link href=https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link rel=stylesheet href=//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css><body class="single single-post single-format-standard col-3cm full-width topbar-enabled chrome"><div id=wrapper><header id=header class="top-menu-mobile-on one-mobile-menu top_menu header-ads-desktop  topbar-transparent"><nav class="nav-container group mobile-menu mobile-sticky" id=nav-mobile data-menu-id=header-1><div class=mobile-title-logo-in-header><p class=site-title><a class=custom-logo-link href rel=home title="Pytool | Home">Pytool</a></div><div class="ham__navbar-toggler-two collapsed" title=Menu aria-expanded=false><div class=ham__navbar-span-wrapper><span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span></div></div><div class=nav-text>è§†é¢‘ç¬”è®°ï¼šgRPC ä»å­¦ä¹ åˆ°ç”Ÿäº§ - Alan Shreve</div><div class="nav-wrap container"><ul class="nav container-inner group mobile-search"><li><form class="searchform themeform" action=https://demo-hueman.presscustomizr.com/><div><input class=search name=s onblur="if(this.value=='')this.value='To search type and hit enter';" onfocus="if(this.value=='To search type and hit enter')this.value='';" value="To search type and hit enter"></div></form></ul><ul id=menu-topbar-menu class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href>Home</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>è½¦è”ç½‘</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-åº•å±‚</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../macos/>Macos</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/git/>Git</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/math/>Math</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../frontend/css/>Css</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>ç³»ç»Ÿç›‘æ§</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../windows/>Windows</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/python/>Python</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/python/scrapy/>Scrapy</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/clang/>Clang</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/golang/>Golang</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/golang/cgo/>Cgo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/golang/hugo/>Hugo</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/golang/sys/>Sys</a><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/golang/goher/>Goher</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/java/>Java</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/java/hadoop/>Hadoop</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/php/>Php</a><ul class=sub-menu><li class="menu-item menu-item-type-custom menu-item-object-custom"><a href=../../../../language/php/magento/>Magento</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_ç«¯å£æ‰«æ</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_ç«¯å£è½¬å‘(éš§é“)</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../work/>Work</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../weixin/>Weixin</a><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"><a href=../../../../edit/>Edit</a><li class=item><a class=text href=../../../../series/>series</a><li class=item><a class=text href=../../../../categories/>categories</a><li class=item><a class=text href=../../../../tags/>tags</a><li class=item><a class=text href=../../../../me/>about</a></ul></div></nav><nav class="nav-container group desktop-menu desktop-sticky" id=nav-topbar data-menu-id=header-2><div class=nav-text>è§†é¢‘ç¬”è®°ï¼šgRPC ä»å­¦ä¹ åˆ°ç”Ÿäº§ - Alan Shreve</div><div class=topbar-toggle-down><i class="fas fa-angle-double-down" aria-hidden=true data-toggle=down title="Expand menu"></i><i class="fas fa-angle-double-up" aria-hidden=true data-toggle=up title="Collapse menu"></i></div><div class="nav-wrap container"><ul id=menu-topbar-menu-1 class="nav container-inner group"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home"><a href=../../../../>Home</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../hardware/>Hardware</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/hisilicon/>Hisilicon</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/kernel/>Kernel</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/rtmp/>Rtmp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/rk3399/>Rk3399</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/dts/>Dts</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/rk3288/>Rk3288</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/%E8%BD%A6%E8%81%94%E7%BD%91/>è½¦è”ç½‘</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hardware/android-%E5%BA%95%E5%B1%82/>Android-åº•å±‚</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../macos/>Macos</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../post/>Post</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/software/>Software</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/english/>English</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/seo/>Seo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/life/>Life</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/wiki/>Wiki</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/basic/>Basic</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../post/reship/>Reship</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../linux/>Linux</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/cmd/>Cmd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/shell/>Shell</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/nginx/>Nginx</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/ip/>Ip</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/git/>Git</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/haproxy/>Haproxy</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../linux/lvs/>Lvs</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../ai/>Ai</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/caffe/>Caffe</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/yolo/>Yolo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/math/>Math</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/ncnn/>Ncnn</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/dataset/>Dataset</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../ai/pytorch/>Pytorch</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../frontend/>Frontend</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../frontend/css/>Css</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../frontend/vue/>Vue</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../devops/>Devops</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/docker/>Docker</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/elk/>Elk</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/ansible/>Ansible</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/prometheus/>Prometheus</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/drone/>Drone</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/kubernetes/>Kubernetes</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/oauth2/>OAuth2</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/etcd/>Etcd</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/apidoc/>Apidoc</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/>ç³»ç»Ÿç›‘æ§</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../database/>Database</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../database/mysql/>Mysql</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../database/mongo/>Mongo</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../database/redis/>Redis</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../windows/>Windows</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../language/>Language</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/cpp/>Cpp</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/python/>Python</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/clang/>Clang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/golang/>Golang</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/java/>Java</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/awesome/>Awesome</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/php/>Php</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../language/android/>Android</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../hacker/>Hacker</a><ul class=sub-menu><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hacker/01_%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/>01_ç«¯å£æ‰«æ</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hacker/00_%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93/>00_ç«¯å£è½¬å‘(éš§é“)</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hacker/01-info-gather/>01-Info-Gather</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hacker/02-spoof/>02-Spoof</a><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag"><a href=../../../../hacker/shells/>Shells</a></ul><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../work/>Work</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../weixin/>Weixin</a><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href=../../../../edit/>Edit</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../series/>series</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../categories/>categories</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../tags/>tags</a><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href=../../../../me/>about</a></ul></div></nav></header><div class=container id=page><div class=container-inner><div class=main><div class="main-inner group"><div class=content><div class="pad group page-title"><ul class="meta-single group"><li><span class="fa fa-folder-open"></span></ul></div><div class="pad group"><article class="post type-post status-publish format-standard has-post-thumbnail hentry category-lifestyle tag-classical-grid tag-masonry-grid tag-standard-list"><div class="post-inner group"><h1 class=post-title>è§†é¢‘ç¬”è®°ï¼šgRPC ä»å­¦ä¹ åˆ°ç”Ÿäº§ - Alan Shreve</h1><p class=post-byline>by Â· 2017å¹´09æœˆ23æ—¥ Â· 6977 Words Â·
~14min reading time |
<a href=https://gitlab.com/rinetd/blog/edit/master/language/golang/goher/2017-09-27-video-grpc-from-tutorial-to-production.md target=_blank>Improve on <i class="fa fa-gitlab"></i></a><div class=clear></div><div class="entry themeform"><div class=entry-inner></br>åŸæ–‡é“¾æ¥ï¼š<a target=_blank href=../../../../language/golang/goher/2017-09-27-video-grpc-from-tutorial-to-production/> è§†é¢‘ç¬”è®°ï¼šgRPC ä»å­¦ä¹ åˆ°ç”Ÿäº§ - Alan Shreve</a></p><h1 id=è§†é¢‘ä¿¡æ¯>è§†é¢‘ä¿¡æ¯</h1><p><strong>grpc: From Tutorial to Production</strong><br>by Alan Shreve<br>at GopherCon 2017<p>{% owl youtube 7FZ6ZyzGex0 %}<p><a href="https://www.youtube.com/watch?v=7FZ6ZyzGex0" target=_blank>https://www.youtube.com/watch?v=7FZ6ZyzGex0</a><p>åšæ–‡ï¼š<a href=https://about.sourcegraph.com/go/grpc-in-production-alan-shreve/ target=_blank>https://about.sourcegraph.com/go/grpc-in-production-alan-shreve/</a><h2 id=æ¼”è®²è€…>æ¼”è®²è€…</h2><p>Alan Shreve, <a href=https://ngrok.com target=_blank>https://ngrok.com</a> &amp; <a href=https://equinox.io target=_blank>https://equinox.io</a><br>Github: <a href=https://github.com/inconshreveable target=_blank>@inconshreveable</a> &amp; Twitter: <a href="https://twitter.com/inconshreveable?lang=en" target=_blank>@inconshreveable</a><h2 id=å¾®æœåŠ¡ä¹‹é—´åº”è¯¥å¦‚ä½•é€šè®¯>å¾®æœåŠ¡ä¹‹é—´åº”è¯¥å¦‚ä½•é€šè®¯ï¼Ÿ</h2><p>ç­”æ¡ˆå°±æ˜¯ï¼š<strong><a href=https://en.wikipedia.org/wiki/SOAP target=_blank>SOAP</a></strong>â€¦â€¦å¥½å§ï¼Œå¼€ä¸ªç©ç¬‘ï¼Œå½“ç„¶ä¸å¯èƒ½æ˜¯ SOAP äº†ã€‚<p>ç°åœ¨æµè¡Œçš„åšæ³•æ˜¯ <strong>HTTP + JSON (<a href=https://en.wikipedia.org/wiki/Representational_state_transfer target=_blank>REST API</a>)</strong><p>Alan è¯´â€œå¦‚æœè¿™è¾ˆå­å†ä¹Ÿä¸å†™å¦ä¸€ä¸ª REST å®¢æˆ·ç«¯åº“çš„è¯ï¼Œé‚£å°±å¯ä»¥å¾ˆå¹¸ç¦çš„æ­»å»äº†â€¦â€¦ğŸ˜‚â€ï¼Œå› ä¸ºè¿™æ˜¯æœ€æ— èŠçš„äº‹æƒ…ï¼Œä¸€éä¸€éçš„åœ¨åšåŒæ ·çš„äº‹æƒ…ã€‚<h2 id=ä¸ºä»€ä¹ˆ-rest-api-ä¸å¥½ç”¨>ä¸ºä»€ä¹ˆ REST API ä¸å¥½ç”¨ï¼Ÿ</h2><ul><li>å®ç° Stream å¤ªéš¾äº†<br><li>è€ŒåŒå‘çš„æµå°±æ ¹æœ¬ä¸å¯èƒ½<br><li>å¾ˆéš¾å¯¹æ“ä½œå»ºç«‹æ¨¡å‹<br><li>æ•ˆç‡å¾ˆå·®ï¼Œæ–‡æœ¬è¡¨ç¤ºå¯¹äºç½‘ç»œæ¥è¯´å¹¶ä¸æ˜¯æœ€å¥½çš„é€‰æ‹©<br><li>è€Œä¸”ï¼Œå…¶å®æœåŠ¡å†…éƒ¨æ ¹æœ¬ä¸æ˜¯ RESTful çš„æ–¹å¼ï¼Œè¿™åªæ˜¯ HTTP endpoint<br><li>å¾ˆéš¾åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å–å¾—å¤šä¸ªèµ„æºæ•°æ® ï¼ˆåä¾‹çœ‹ <a href=http://graphql.org/learn/ target=_blank>GraphQL</a>ï¼‰<br><li>æ²¡æœ‰<strong>æ­£å¼çš„</strong>ï¼ˆæœºå™¨å¯è¯»çš„ï¼‰APIçº¦æŸ<br><ul><li>å› æ­¤å†™å®¢æˆ·ç«¯éœ€è¦äººç±»<br><li>è€Œä¸”å› ä¸ºğŸ‘·å¾ˆè´µï¼Œè€Œä¸”ä¸å–œæ¬¢å†™å®¢æˆ·ç«¯<br><br></ul></ul><h2 id=ä»€ä¹ˆæ˜¯-grpc>ä»€ä¹ˆæ˜¯ gRPC</h2><blockquote><p><a href=https://grpc.io target=_blank>gPRC</a> æ˜¯é«˜æ€§èƒ½ã€å¼€æºã€é€šç”¨çš„ RPC æ¡†æ¶ã€‚</blockquote><p>ä¸å…¶è®²è§£å®šä¹‰ï¼Œä¸å¦‚æ¥å®é™…åšä¸ªä¸œè¥¿æ›´æ¸…æ¥šã€‚<h2 id=å»ºä¸€ä¸ªç¼“å­˜æœåŠ¡>å»ºä¸€ä¸ªç¼“å­˜æœåŠ¡</h2><p>ä½¿ç”¨ gRPC è¿™ç±»ä¸œè¥¿ï¼Œæˆ‘ä»¬å¹¶éå¼€å§‹äºå†™ Go ä»£ç ï¼Œæˆ‘ä»¬æ˜¯ä»æ’°å†™ gRPC çš„ <a href=https://developers.google.com/protocol-buffers/docs/overview target=_blank>IDL</a> å¼€å§‹çš„ã€‚<h3 id=app-proto>app.proto</h3><pre><code class=language-protobuf>syntax = &quot;proto3&quot;
package rpc;

service Cache {
  rpc Store(StoreReq) returns (StoreResp) {}
  rpc Get(GetReq) returns (GetResp) {}
}

message StoreReq {
  string key = 1;
  bytes val = 2;
}

message StoreResp {
}

message GetReq {
  string key = 1;
}

message GetResp {
  bytes val = 1;
}
</code></pre><p>å½“å†™äº†è¿™ä¸ªæ–‡ä»¶åï¼Œæˆ‘ä»¬ç«‹åˆ»æ‹¥æœ‰äº†<strong>9</strong>ç§è¯­è¨€çš„å®¢æˆ·ç«¯çš„åº“ã€‚<ul><li>C++<br><li>Java(and Android)<br><li>Python<br><li>Go<br><li>Ruby<br><li>C#<br><li>Javascript(node.js)<br><li>Objective-C (iOS!)<br><li>PHP<br><br></ul><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæ‹¥æœ‰äº†<strong>7</strong>ç§è¯­è¨€çš„æœåŠ¡ç«¯çš„ API Stubï¼š<ul><li>C++<br><li>Java<br><li>Python<br><li>Go<br><li>Ruby<br><li>C#<br><li>Javascript(node.js)<br><br></ul><h3 id=server-go>server.go</h3><pre><code class=language-go>func serverMain() {
  if err := runServer(); err != nil {
    fmt.Fprintf(os.Stderr, &quot;Failed to run cache server: %s\n&quot;, err)
    os.Exit(1)
  }
}

func runServer() error {
  srv := grpc.NewServer()
  rpc.RegisterCacheServer(srv, &amp;CacheService{})
  l, err := net.Listen(&quot;tcp&quot;, &quot;localhost:5051&quot;)
  if err != nil {
    return err
  }
  //  block
  return srv.Serve(l)
}
</code></pre><p>æš‚æ—¶å…ˆä¸å®ç° <code>CacheService</code>ï¼Œå…ˆæ”¾ä¸ªç©ºçš„ï¼Œç¨åå†å®ç°ã€‚<pre><code class=language-go>type CacheService struct {
}

func (s *CacheService) Get(ctx context.Context, req *rpc.GetReq) (*rpc.GetResp, error) {
  return nil, fmt.Errorf(&quot;unimplemented&quot;)
}

func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  return nil, fmt.Errorf(&quot;unimplemented&quot;)
}
</code></pre><h3 id=client-go>client.go</h3><pre><code class=language-go>func clientMain() {
  if err != runClient(); err != nil {
    fmt.Fprintf(os.Stderr, &quot;failed: %v\n&quot;, err)
    os.Exit(1)
  }
}

func runClient() error {
  //  å»ºç«‹è¿æ¥
  conn, err := grpc.Dial(&quot;localhost:5053&quot;, grpc.WithInsecure())
  if err != nil {
    return fmt.Errorf(&quot;failed to dial server: %v&quot;, err)
  }
  cache := rpc.NewCacheClient(conn)
  //  è°ƒç”¨ grpc çš„ store() æ–¹æ³•å­˜å‚¨é”®å€¼å¯¹ { &quot;gopher&quot;: &quot;con&quot; }
  _, err = cache.Store(context.Background(), &amp;rpc.StoreReq{Key: &quot;gopher&quot;, Val: []byte(&quot;con&quot;)})
  if err != nil {
    return fmt.Errorf(&quot;failed to store: %v&quot;, err)
  }
  //  è°ƒç”¨ grpc çš„ get() æ–¹æ³•å–å›é”®ä¸º `gopher` çš„å€¼
  resp, err := cache.Get(context.Background(), &amp;rpc.GetReq{Key: &quot;gopher&quot;})
  if err != nil {
    return fmt.Errorf(&quot;failed to get: %v&quot;, err)
  }
  //  è¾“å‡º
  fmt.Printf(&quot;Got cached value %s\n&quot;, resp.Val)
  return nil
}
</code></pre><h3 id=è¿™ä¸å°±æ˜¯-wsdl-ä¹ˆ>è¿™ä¸å°±æ˜¯ WSDL ä¹ˆï¼Ÿ</h3><p>æˆ–è®¸æœ‰äº›äººä¼šè®¤ä¸ºè¿™å’Œ <a href=https://en.wikipedia.org/wiki/Web_Services_Description_Language target=_blank>WSDL</a> ä¹Ÿå¤ªåƒäº†ï¼Œè¿™ä¹ˆæƒ³æ²¡æœ‰é”™ï¼Œå› ä¸º gRPC åœ¨å€Ÿé‰´ä¹‹å‰çš„ SOAP/WSDL çš„é”™è¯¯åŸºç¡€ä¸Šï¼Œä¹Ÿå¸å–äº†ä»–ä»¬ä¼˜ç§€çš„åœ°æ–¹ã€‚<ul><li>å’Œ XML å…³ç³»æ²¡é‚£ä¹ˆç´§(grpc æ˜¯å¯æ’æ‹”å¼çš„ï¼Œå¯ä»¥æ¢æˆå„ç§åº•å±‚è¡¨è¿°)<br><li>å†™è¿‡ XML/XSD çš„äººéƒ½çŸ¥é“è¿™äº›æœåŠ¡å®šä¹‰å¤ªç¹é‡äº†ï¼ŒgRPC æ²¡æœ‰è¿™ä¸ªé—®é¢˜<br><li>WSDLè¿™ç±»æœ‰å®Œå…¨ä¸å¿…è¦çš„å¤æ‚åº¦ã€å’ŒåŸºæœ¬ä¸éœ€è¦çš„åŠŸèƒ½ï¼ˆä¸¤æ­¥ commitï¼‰<br><li>WSDL ä¸çµæ´»ã€è€Œä¸”æ— æ³•å‰å‘å…¼å®¹ï¼ˆä¸åƒ <a href=https://developers.google.com/protocol-buffers/ target=_blank>protobuf</a>ï¼‰<br><li>SOAP/WSDL æ€§èƒ½å¤ªå·®ï¼Œä»¥åŠæ— æ³•ä½¿ç”¨æµ<br><li>ä½†æ˜¯WSDLä¸­çš„æœºå™¨å¯ä»¥ç†è§£çš„APIå®šä¹‰ç¡®å®æ˜¯ä¸ªå¥½ä¸œè¥¿<br><br></ul><h3 id=å®ç°å…·ä½“çš„-cacheservice>å®ç°å…·ä½“çš„ CacheService</h3><p><strong>server.go</strong><pre><code class=language-go>type CacheService struct {
  store map[string][]byte
}

func (s *CacheService) Get(ctx context.Context, req *rpc.GetReq) (*rpc.GetResp, error) {
  val := s.store[req.Key]
  return &amp;rpc.GetResp{Val: val}, nil
}

func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  s.store[req.Key] = req.Val
  return &amp;rpc.StoreResp{}, nil
}
</code></pre><p>æ³¨æ„è¿™é‡Œæ²¡æœ‰é”ï¼Œä½ å¯ä»¥æƒ³æƒ³ä»–ä»¬ä¸­æœ‰ï¼Œå› ä¸ºå°†æ¥ä»–ä»¬ä¼šè¢«å¹¶å‘çš„è°ƒç”¨çš„ã€‚<h3 id=é”™è¯¯å¤„ç†>é”™è¯¯å¤„ç†</h3><p>å½“ç„¶ï¼ŒgRPC æ”¯æŒé”™è¯¯å¤„ç†ã€‚å‡è®¾æ”¹å†™ä¸Šé¢çš„ <code>Get()</code>ï¼Œå¯¹ä¸å­˜åœ¨çš„é”®è¿›è¡ŒæŠ¥é”™ï¼š<pre><code class=language-go>func (s *CacheService) Get(ctx context.Context, req *rpc.GetReq) (*rpc.GetResp, error) {
  val, ok := s.store[req.Key]
  if !ok {
    return nil, status.Errorf(code.NotFound, &quot;Key not found %s&quot;, req.Key)
  }
  return &amp;rpc.GetResp{Val: val}, nil
}
</code></pre><h3 id=åŠ å¯†ä¼ è¾“>åŠ å¯†ä¼ è¾“</h3><p>å¦‚æœè¿™æ ·çš„ä»£ç æ‰“ç®—å»éƒ¨ç½²çš„è¯ï¼Œä¸€å®šä¼šè¢« <a href=https://en.wikipedia.org/wiki/Site_reliability_engineering target=_blank>SRE</a> æ‹¦æˆªä¸‹æ¥ï¼Œå› ä¸ºæ‰€æœ‰é€šè®¯å¿…é¡»åŠ å¯†ä¼ è¾“ã€‚<p>åœ¨ gRPC ä¸­æ·»åŠ  TLS åŠ å¯†ä¼ è¾“å¾ˆå®¹æ˜“ã€‚æ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹ <code>runServer()</code> æ·»åŠ  TLS åŠ å¯†ä¼ è¾“ã€‚<pre><code class=language-go>func runServer() error {
  tlsCreds, err := credentials.NewServerTLSFromFile(&quot;tls.crt&quot;, &quot;tls.key&quot;)
  if err != nil {
    return err
  }
  srv := grpc.NewServer(grpc.Creds(tlsCreds))
  ...
}
</code></pre><p>åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹ <code>runClient()</code>ã€‚<pre><code class=language-go>func runClient() error {
  tlsCreds := credentials.NewTLS(&amp;tls.Config(InsecureSkipVerify: true))
  conn, err := grpc.Dial(&quot;localhost:5051&quot;, grpc.WithTransportCredentials(tlsCreds))
  ...
}
</code></pre><h2 id=ç”Ÿäº§ç¯å¢ƒå¦‚ä½•ä½¿ç”¨-grpc>ç”Ÿäº§ç¯å¢ƒå¦‚ä½•ä½¿ç”¨ gRPC</h2><ul><li>HTTP/2<br><li>protobuf serialization (pluggable)<br><li>å®¢æˆ·ç«¯ä¼šå’Œ grpc æœåŠ¡å™¨æ‰“å¼€ä¸€ä¸ªé•¿è¿æ¥<br><ul><li>å¯¹äºæ¯ä¸€ä¸ª RPC è°ƒç”¨éƒ½å°†æ˜¯ä¸€ä¸ªæ–°çš„ HTTP/2 stream<br><li>å…è®¸æ¨¡æ‹Ÿé£è¡Œæ¨¡å¼çš„ RPC è°ƒç”¨<br></ul><li>å…è®¸å®¢æˆ·ç«¯*å’Œ*æœåŠ¡ç«¯ Streaming<br><br></ul><h3 id=grpc-çš„å®ç°>gRPC çš„å®ç°</h3><p>ç°åœ¨æœ‰3ä¸ªé«˜æ€§èƒ½çš„ã€äº‹ä»¶é©±åŠ¨çš„å®ç°<ul><li>C<br><ul><li>Ruby, Python, Node.js, PHP, C#, Objective-C, C++ éƒ½æ˜¯å¯¹è¿™ä¸ª C core å®ç°çš„ç»‘å®š<br><li>PHP åˆ™æ˜¯é€šè¿‡ PECL å’Œè¿™ä¸ªå®ç°çš„ç»‘å®š<br></ul><li>Java<br><ul><li>Netty + BoringSSL é€šè¿‡ JNI<br></ul><li>Go<br><ul><li>çº¯ Go å®ç°ï¼Œä½¿ç”¨äº† Go æ ‡å‡†åº“çš„ <code>crypto/tls</code><br><br></ul></ul><h3 id=grpc-ä»å“ªæ¥çš„>gRPC ä»å“ªæ¥çš„</h3><ul><li>æœ€åˆæ˜¯ Google çš„ä¸€ä¸ªå›¢é˜Ÿåˆ›å»ºçš„<br><li>æ›´æ—©æœŸçš„æ˜¯ Google ä¸€ä¸ªå†…éƒ¨é¡¹ç›®å«åš <code>stubby</code><br><li>è¿™ä¸ª gRPC æ˜¯å…¶ä¸‹ä¸€ä»£å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”ç°åœ¨ä¸ä»…ä»…æ˜¯ Google åœ¨ä½¿ç”¨ï¼Œå¾ˆå¤šå…¬å¸éƒ½åœ¨è´¡çŒ®ä»£ç <br><ul><li>å½“ç„¶ï¼ŒGoogle è¿˜æ˜¯ä¸»è¦ä»£ç è´¡çŒ®è€…<br><br></ul></ul><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-å¤šç§Ÿæˆ·>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šå¤šç§Ÿæˆ·</h3><p>ä¸Šçº¿ç”Ÿäº§åï¼Œå‘ç°æœ‰ä¸€éƒ¨åˆ†å®¢æˆ·äº§ç”Ÿäº†å¤§é‡çš„é”®å€¼ï¼Œè¯¢é—®å¾—çŸ¥ï¼Œæœ‰çš„å®¢æˆ·å¸Œæœ›å¯¹æ‰€æœ‰ä¸œè¥¿éƒ½ç¼“å­˜ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯å¯¹æˆ‘ä»¬è¿™ä¸ªç¼“å­˜æœåŠ¡å¾ˆå¥½çš„äº‹æƒ…ã€‚<p>æˆ‘ä»¬å¸Œæœ›é™åˆ¶è¿™ç§è¡Œä¸ºï¼Œä½†å¯¹äºå½“å‰ç³»ç»Ÿè€Œè¨€ï¼Œæ— æ³•æ»¡è¶³è¿™ç§éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹å®ç°ï¼Œå¯¹æ¯ä¸ªå®¢æˆ·å‘æ”¾å®¢æˆ· tokenï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥çº¦æŸç‰¹å®šå®¢æˆ·æœ€å¤šå¯ä»¥å»ºç«‹å¤šå°‘é”®å€¼ï¼Œé¿å…ç³»ç»Ÿæ»¥ç”¨ã€‚è¿™å°±æˆä¸ºäº†å¤šç§Ÿæˆ·çš„ç¼“å­˜æœåŠ¡ã€‚<p>å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä» IDL å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æ¥å£ï¼Œå¢åŠ  <code>account_token</code> é¡¹ã€‚<pre><code class=language-protobuf>message StoreReq {
  string key = 1;
  bytes val = 2;
  string account_token = 3;
}
</code></pre><p>åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ç‹¬ç«‹çš„æœåŠ¡é’ˆå¯¹è´¦æˆ·æœåŠ¡ï¼Œæ¥è·å–è´¦æˆ·æ‰€å…è®¸çš„ç¼“å­˜é”®æ•°ï¼š<pre><code class=language-protobuf>service Accounts {
  rpc GetByToken(GetByTokenReq) return (GetByTokenResp) {}
}

message GetByTokenReq {
  string token = 1;
}

message GetByTokenResp {
  Account account = 1;
}

message Account {
  int64 max_cache_keys = 1;
}
</code></pre><p>è¿™é‡Œå»ºç«‹äº†ä¸€ä¸ªæ–°çš„ <code>Accounts</code> æœåŠ¡ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª <code>GetByToken()</code> æ–¹æ³•ï¼Œç»™å…¥ <code>token</code>ï¼Œè¿”å›ä¸€ä¸ª <code>Account</code> ç±»å‹çš„ç»“æœï¼Œè€Œ <code>Account</code> å†…æœ‰ <code>max_cache_keys</code> é”®å¯¹åº”æœ€å¤§å¯ç¼“å­˜çš„é”®å€¼æ•°ã€‚<p>ç°åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥ä¿®æ”¹ <strong>client.go</strong><pre><code class=language-go>func runClient() error {
  ...
  cache := rpc.NewCacheClient(conn)

  _, err = cache.Store(context.Background(), &amp;rpc.StoreReq{
    AccountToken: &quot;inconshreveable&quot;,
    Key:          &quot;gopher&quot;,
    Val:          []byte(&quot;con&quot;),
  })
  if err != nil {
    return fmt.Errorf(&quot;failed to store: %v&quot;, err)
  }
  ...
}
</code></pre><p>æœåŠ¡ç«¯çš„æ”¹å˜è¦ç¨å¾®å¤§ä¸€äº›ï¼Œä½†ä¸è¿‡åˆ†ã€‚<pre><code class=language-go>type CacheService struct {
  accounts      rpc.AccountsClient
  store         map[string][]byte
  keysByAccount map[string]int64
}
</code></pre><p>æ³¨æ„è¿™é‡Œçš„ <code>accounts</code> æ˜¯ä¸€ä¸ª grpc çš„å®¢æˆ·ç«¯ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªæœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¦ä¸€ä¸ª grpc æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚æ‰€ä»¥åœ¨æ¥ä¸‹æ¥çš„ <code>Store()</code> å®ç°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé€šè¿‡ <code>accounts</code> è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡å–å¾—è´¦æˆ·ä¿¡æ¯ã€‚<pre><code class=language-go>func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  //  è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡å–å¾—è´¦æˆ·ä¿¡æ¯ï¼ŒåŒ…å«å…¶é”®å€¼é™åˆ¶
  resp, err := s.accounts.GetByToken(context.Background(), &amp;rpc.GetByTokenReq{
    Token: req.AccountToken,
  })
  if err != nil {
    return nil, err
  }
  //  æ£€æŸ¥æ˜¯å¦è¶…é‡ä½¿ç”¨
  if s.keysByAccount[req.AccountToken] &gt;= resp.Account.MaxCacheKeys {
    return nil, status.Errorf(codes.FailedPrecondition, &quot;Account %s exceeds max key limit %d&quot;, req.AccountToken, resp.Account.MaxCacheKeys)
  }
  //  å¦‚æœé”®ä¸å­˜åœ¨ï¼Œéœ€è¦æ–°åŠ é”®å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯¹è®¡æ•°å™¨åŠ ä¸€
  if _, ok := s.store[req.Key]; !ok {
    s.keysByAccount[req.AccountToken] += 1
  }
  //  ä¿å­˜é”®å€¼
  s.store[req.Key] = req.Val
  return &amp;rpc.StoreResp{}, nil
}

</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-æ€§èƒ½>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šæ€§èƒ½</h3><p>ä¸Šé¢çš„é—®é¢˜è§£å†³äº†ï¼Œæˆ‘ä»¬æœåŠ¡åˆæ¢å¤äº†æ­£å¸¸ï¼Œä¸ä¼šæœ‰ç”¨æˆ·å»ºç«‹è¿‡å¤šçš„é”®å€¼äº†ã€‚ä½†æ˜¯å¾ˆå¿«ï¼Œæˆ‘ä»¬å°±åˆæ”¶åˆ°äº†å…¶ä»–ç”¨æˆ·å‘æ¥çš„æ–°çš„ issueï¼Œå¾ˆå¤šäººååº”è¯´æ–°ç³»ç»Ÿå˜æ…¢äº†ï¼Œæ²¡æœ‰è¾¾åˆ° <a href=https://en.wikipedia.org/wiki/Service-level_agreement target=_blank>SLA</a> çš„è¦æ±‚ã€‚<p>å¯æ˜¯æˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œäºæ˜¯æ„è¯†åˆ°äº†ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿæ€§ï¼ˆObservabilityï¼‰ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ²¡æœ‰ä»»ä½•è®¡é‡ç³»ç»Ÿæ¥ç»Ÿè®¡æ€§èƒ½ç›¸å…³çš„æ•°æ®ã€‚<p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„åšèµ·ï¼Œæ·»åŠ æ—¥å¿—ã€‚<p>æˆ‘ä»¬å…ˆä» <strong>client.go</strong> å¼€å§‹ï¼Œå¢åŠ ä¸€äº›æµ‹é‡å’Œè®¡æ•°ä»¥åŠæ—¥å¿—è¾“å‡ºã€‚<pre><code class=language-go>  ...
  //  å¼€å§‹è®¡æ—¶
  start := time.Now()

  _, err = cache.Store(context.Background(), &amp;rpc.StoreReq{
    AccountToken: &quot;inconshreveable&quot;,
    Key:          &quot;gopher&quot;,
    Val:          []byte(&quot;con&quot;),
  })

  //  è®¡ç®— cache.Store() è°ƒç”¨æ—¶é—´
  log.Printf(&quot;cache.Store duration %s&quot;, time.Since(start))

  if err != nil {
    return fmt.Errorf(&quot;failed to store: %v&quot;, err)
  }

  //  å†æ¬¡å¼€å§‹è®¡æ—¶
  start = time.Now()

  //  è°ƒç”¨ grpc çš„ get() æ–¹æ³•å–å›é”®ä¸º `gopher` çš„å€¼
  resp, err := cache.Get(context.Background(), &amp;rpc.GetReq{Key: &quot;gopher&quot;})

  //  è®¡ç®— cache.Get() è°ƒç”¨æ—¶é—´
  log.Printf(&quot;cache.Get duration %s&quot;, time.Since(start))

  if err != nil {
    return fmt.Errorf(&quot;failed to get: %v&quot;, err)
  }
</code></pre><p>åŒæ ·ï¼Œåœ¨æœåŠ¡ç«¯ä¹Ÿè¿™ä¹ˆå¤„ç†ã€‚<pre><code class=language-go>func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  //  å¼€å§‹è®¡æ—¶
  start := time.Now()

  //  è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡å–å¾—è´¦æˆ·ä¿¡æ¯ï¼ŒåŒ…å«å…¶é”®å€¼é™åˆ¶
  resp, err := s.accounts.GetByToken(context.Background(), &amp;rpc.GetByTokenReq{
    Token: req.AccountToken,
  })

  //  è¾“å‡º account.GetByToken() çš„è°ƒç”¨æ—¶é—´
  log.Printf(&quot;accounts.GetByToken duration %s&quot;, time.Since(start))

  ...
}
</code></pre><p>ç»è¿‡è¿™äº›ä¿®æ”¹åï¼Œæˆ‘ä»¬å‘ç°ä¸€æ ·çš„äº‹æƒ…åœ¨ååå¤å¤çš„åšï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥æ”¹å˜è¿™ç§æ— èŠçš„åšæ³•ä¹ˆï¼ŸæŸ¥é˜… grpc æ–‡æ¡£åï¼Œçœ‹åˆ°æœ‰ä¸€ä¸ªå«åš <strong>Client Interceptor</strong> çš„ä¸œè¥¿ã€‚<p>è¿™ç›¸å½“äºæ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä½†æ˜¯æ˜¯åœ¨å®¢æˆ·ç«¯ã€‚å½“å®¢æˆ·ç«¯è¿›è¡Œ rpc è°ƒç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸­é—´ä»¶å…ˆä¼šè¢«è°ƒç”¨ï¼Œå› æ­¤è¿™ä¸ªä¸­é—´ä»¶å¯ä»¥å¯¹è°ƒç”¨è¿›è¡Œä¸€å±‚åŒ…è£…ï¼Œç„¶åå†è¿›è¡Œè°ƒç”¨ã€‚<p>ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå«åš <code>interceptor.go</code>ï¼š<pre><code class=language-go>func WithClientInterceptor() grpc.DialOption {
  return grpc.WithUnaryInterceptor(clientInterceptor)
}

func clientInterceptor(
  ctx context.Context,
  method string,
  req interface{},
  reply interface{},
  cc *grpc.ClientConn,
  invoker grpc.UnaryInvoker,
  opts ...grpc.CallOption,
) error {
  start := time.Now()
  err := invoker(ctx, method, req, reply, cc, opts...)
  log.Printf(&quot;invoke remote method=%s duration=%s error=%v&quot;, method, time.Since(start), err)
  return err
}
</code></pre><p>æˆ‘ä»¬æœ‰äº†è¿™ä¸ª <code>WithClientInterceptor()</code> ä¹‹åï¼Œå¯ä»¥åœ¨ <code>grpc.Dial()</code> çš„æ—¶å€™æ³¨å†Œè¿›å»ã€‚<p><strong>client.go</strong><pre><code class=language-go>func runClient() error {
  ...
  conn, err := grpc.Dial(&quot;localhost:5051&quot;,
    grpc.WithTransportCredentials(tlsCreds),
    WithClientInterceptor())
  ...
}
</code></pre><p>æ³¨å†Œä¹‹åï¼Œæ‰€æœ‰çš„ grpc è°ƒç”¨éƒ½ä¼šç»è¿‡æˆ‘ä»¬æ³¨å†Œçš„ <code>clientInterceptor()</code>ï¼Œå› æ­¤æ‰€æœ‰çš„æ—¶é—´å°±éƒ½æœ‰ç»Ÿè®¡äº†ï¼Œè€Œä¸ç”¨æ¯ä¸ªå‡½æ•°å†…éƒ¨ååå¤å¤çš„æ·»åŠ æ—¶é—´ã€è®¡é‡ã€è¾“å‡ºã€‚<p>æ·»åŠ äº†å®¢æˆ·ç«¯çš„è¿™ä¸ªè®¡é‡åï¼Œè‡ªç„¶è€Œç„¶å°±è”æƒ³åˆ°æœåŠ¡ç«¯æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥åšåŒæ ·çš„äº‹æƒ…ï¼Ÿç»è¿‡æŸ¥çœ‹æ–‡æ¡£ï¼Œå¯ä»¥ï¼Œæœ‰ä¸ªå«åš <strong>Server Interceptor</strong> çš„ä¸œè¥¿ã€‚<p>åŒæ ·çš„åšæ³•ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡ç«¯æ·»åŠ  <code>interceptor.go</code>ï¼Œå¹¶ä¸”æ·»åŠ  <code>ServerInterceptor()</code> å‡½æ•°ã€‚<pre><code class=language-go>func ServerInterceptor() grpc.ServerOption {
  return grpc.UnaryInterceptor(serverInterceptor)
}

func serverInterceptor(
  ctx context.Context,
  req interface{},
  info *grpc.UnaryServerInfo,
  handler grpc.UnaryHandler,
) (interface{}, error) {
  start := time.Now()
  resp, err := handler(ctx, req)
  log.Printf(&quot;invoke server method=%s duration=%s error=%v&quot;,
    info.FullMethod,
    time.Since(start),
    err)
  return resp, err
}
</code></pre><p>å’Œå®¢æˆ·ç«¯ä¸€æ ·ï¼Œéœ€è¦åœ¨ <code>runServer()</code> çš„æ—¶å€™æ³¨å†Œæˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ªä¸­é—´ä»¶ã€‚<pre><code class=language-go>func runServer() error {
  ...
  srv := grpc.NewServer(grpc.Creds(tlsCreds), ServerInterceptor())
  ...
}
</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-è¶…æ—¶>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šè¶…æ—¶</h3><p>æ·»åŠ äº†æ—¥å¿—åï¼Œæˆ‘ä»¬ç»ˆäºåœ¨æ—¥å¿—ä¸­å‘ç°ï¼Œ<code>/rpc.Accounts/GetByToken/</code> èŠ±äº†å¥½é•¿çš„æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªæ“ä½œè®¾ç½®è¶…æ—¶ã€‚<p><strong>server.go</strong><pre><code class=language-go>func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  accountsCtx, _ := context.WithTimeout(context.Background(), 2 * time.Second)
  resp, err := s.accounts.GetByToken(accountsCtx, &amp;rpc.GetByTokenReq{
    Token: req.AccountToken,
  })
  ...

}
</code></pre><p>è¿™é‡Œæ“ä½œå¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨æ ‡å‡†åº“ä¸­ <code>context.WithTimeout()</code> å°±å¯ä»¥äº†ã€‚<h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-ä¸Šä¸‹æ–‡ä¼ é€’>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šä¸Šä¸‹æ–‡ä¼ é€’</h3><p>ç»è¿‡ä¸Šé¢ä¿®æ”¹åï¼Œå®¢æˆ·ä¾æ—§æŠ±æ€¨è¯´æ²¡æœ‰æ»¡è¶³ SLAï¼Œä»”ç»†ä¸€æƒ³ä¹Ÿå¯¹ã€‚å°±ç®—è¿™é‡Œçº¦æŸäº† 2 ç§’é’Ÿï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿˜éœ€è¦æ—¶é—´ï¼Œåˆ«çš„ä»£ç åœ¨ä¸­é—´ä¹Ÿæœ‰æ—¶é—´å¼€é”€ã€‚è€Œä¸”æœ‰çš„å®¢æˆ·è¯´ï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦1ç§’é’Ÿï¼Œè€Œä¸æ˜¯2ç§’é’Ÿã€‚<p>å¥½å§ï¼Œè®©æˆ‘ä»¬æŠŠè¿™ä¸ªæ—¶é—´è®¾å®šæ¨å‘è°ƒç”¨æ–¹ã€‚<p>é¦–å…ˆæˆ‘ä»¬è¦æ±‚åœ¨å®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨æ—¶é—´çº¦æŸçš„è®¾å®šï¼š<p><strong>client.go</strong><pre><code class=language-go>func runClient() error {
  ...
  ctx, _ := context.WithTimeout(context.Background(), time.Second)
  _, err = cache.Store(ctx, &amp;rpc.StoreReq{Key: &quot;gopher&quot;, Val: []byte(&quot;con&quot;)})

  ...

  ctx, _ = context.WithTimeout(context.Background(), 50*time.Millisecond)
  resp, err := cache.Get(ctx, &amp;rpc.GetReq{Key: &quot;gopher&quot;})
  ...
}
</code></pre><p>ç„¶ååœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬å°†ä¸Šä¸‹æ–‡ä¼ é€’ã€‚ç›´æ¥å–è°ƒç”¨æ–¹çš„ <code>ctx</code>ã€‚<pre><code class=language-go>func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  resp, err := s.accounts.GetByToken(ctx, &amp;rpc.GetByTokenReq{
    Token: req.AccountToken,
  })
  ...

}
</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-grpc-metadata>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šGRPC Metadata</h3><p>ä¸Šé¢çš„é—®é¢˜éƒ½è§£å†³äº†ï¼Œç»ˆäºå¯ä»¥æ¾ä¸€å£æ°”äº†ã€‚å¯æ˜¯å®¢æˆ·åˆææ–°çš„éœ€æ±‚äº†â€¦â€¦ğŸ˜…ï¼Œè¯´æˆ‘ä»¬èƒ½ä¸èƒ½å¢åŠ ä¸€ä¸ª <code>Dry Run</code> çš„æ ‡å¿—ï¼Œå°±æ˜¯è¯´æˆ‘å¸Œæœ›ä½ åšæ‰€æœ‰éœ€è¦åšçš„äº‹æƒ…ï¼Œé™¤äº†çœŸçš„ä¿®æ”¹é”®å€¼åº“ã€‚<p>GRPC metadataï¼Œä¹Ÿç§°ä¸º GRPC çš„ Headerã€‚å°±åƒ HTTP å¤´ä¸€æ ·ï¼Œå¯ä»¥æœ‰ä¸€äº› Metadata ä¿¡æ¯ä¼ é€’è¿‡æ¥ã€‚ä½¿ç”¨ metadataï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„ Dry Run çš„å®ç°å˜å¾—æ›´ç®€æ´ï¼Œä¸å¿…æ¯ä¸ª RPC æ–¹æ³•å†…éƒ½å®ç°ä¸€éæ£€æŸ¥ Dry Run æ ‡å¿—çš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥ç‹¬ç«‹å‡ºæ¥ã€‚<pre><code class=language-go>func (s *CacheService) Store(ctx context.Context, req *rpc.StoreReq) (*rpc.StoreResp, error) {
  resp, err := s.accounts.GetByToken(ctx, &amp;rpc.GetByTokenReq{
    Token: req.AccountToken,
  })

  if !dryRun(ctx) {
    if _, ok := s.store[req.Key]; !ok {
      s.keysByAccount[req.AccountToke] += 1
    }
    s.store[req.Key] = req.Val
  }
  return &amp;rpc.StoreResp{}, nil
}

func dryRun(ctx context.Context) bool {
  md, ok := metadata.FromContext(ctx)
  if !ok {
    return false
  }
  val, ok := md[&quot;dry-run&quot;]
  if !ok {
    return false
  }
  if len(val) &lt; 1 {
    return false
  }
  return val[0] == &quot;1&quot;
}
</code></pre><p>å½“ç„¶ï¼Œè¿™ä¹ˆåšæ˜¯æœ‰å¦¥åçš„ï¼Œå› ä¸ºé€šç”¨åŒ–åå°±å¤±å»äº†ç±»å‹æ£€æŸ¥çš„èƒ½åŠ›ã€‚<p>åœ¨å®¢æˆ·ç«¯è°ƒç”¨çš„æ—¶å€™ï¼Œåˆ™éœ€è¦æ ¹æ®æƒ…å†µæ·»åŠ  <code>dry-run</code> å‚æ•°ç»™ metadataã€‚<pre><code class=language-go>func runClient() error {
  ...
  ctx, _ := context.WithTimeout(context.Background(), time.Second)
  ctx = metadata.NewContext(ctx, metadata.Pairs(&quot;dry-run&quot;, &quot;1&quot;))
  _, err = cache.Store(ctx, &amp;rpc.StoreReq{Key: &quot;gopher&quot;, Val: []byte(&quot;con&quot;)})
  ...
}
</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-retry>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šRetry</h3><p>å®ç°äº† Dry Run ä»¥ä¸ºå¯ä»¥ä¼‘æ¯äº†ï¼Œä¹‹å‰æŠ±æ€¨æ…¢çš„å®¢æˆ·åˆæ¥æŠ±æ€¨äº†ï¼Œè™½ç„¶æœ‰è¶…æ—¶æ§åˆ¶ï¼Œæ»¡è¶³ SLAï¼Œä½†æ˜¯æœåŠ¡é‚£è¾¹è¿˜æ˜¯æ…¢ï¼Œæ€»è¶…æ—¶ä¸æˆåŠŸã€‚æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°æ˜¯ç½‘ç»œä¸Šçš„äº‹æƒ…ï¼Œæˆ‘ä»¬æ²¡æœ‰å¤ªå¤šå¯ä»¥åšçš„äº‹æƒ…ã€‚ä¸ºäº†è§£å†³å®¢æˆ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥æ·»åŠ ä¸€ä¸ªé‡è¯•çš„æœºåˆ¶ã€‚<p>æˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸€ä¸ª gRPC è°ƒç”¨æ·»åŠ ä¸€ä¸ª Retry æœºåˆ¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒä¹‹å‰è®¡æ—¶ç»Ÿè®¡é‚£æ ·ï¼Œä½¿ç”¨ Interceptor å§ï¼Ÿ<pre><code class=language-go>func clientInterceptor(...) error {
  var (
    start     = time.Now()
    attempts  = 0
    err       error
    backoff   retryBackOff
  )

  for {
    attempts += 1
    select {
    case &lt;-ctx.Done():
      err = status.Errorf(codes.DeadlineExceeded, &quot;timeout reached before next retry attempt&quot;)
    case &lt;-backoff.Next():
      startAttempt := time.Now()
      err = invoker(ctx, method, req, reply, cc, opts...)
      if err != nil {
        log.Printf(...)
        continue
      }
    }
    break
  }
  log.Printf(...)
  return err
}
</code></pre><p>çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œç„¶åå°±æ‰“ç®—å‘å¸ƒè¿™ä¸ªä»£ç äº†ã€‚ç»“æœæäº¤å®¡æ ¸çš„æ—¶å€™è¢«æ‰“å›æ¥äº†ï¼Œè¯´è¿™ä¸ªä»£ç ä¸åˆç†ï¼Œå› ä¸ºå¦‚æœæ˜¯<strong>éå¹‚ç­‰ï¼ˆnon-idempotentï¼‰</strong> çš„æ“ä½œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´å¤šæ¬¡æ‰§è¡Œï¼Œæ”¹å˜æœŸæœ›ç»“æœäº†ã€‚<p>çœ‹æ¥æˆ‘ä»¬å¾—é’ˆå¯¹å¹‚ç­‰å’Œéå¹‚ç­‰æ“ä½œåŒºåˆ«å¯¹å¾…äº†ã€‚<pre><code class=language-go>silo.FireZeMissiles(NotIdempotent(ctx), req)
</code></pre><p>å—¯ï¼Œå½“ç„¶ï¼Œæ²¡è¿™ä¸ªä¸œè¥¿ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±æ¥åˆ›é€ ä¸€ä¸ªæ ‡è®°ï¼Œé€šè¿‡ contextï¼Œæ¥æ ‡æ˜æ“ä½œæ˜¯å¦å¹‚ç­‰ã€‚<pre><code class=language-go>func NotIdempotent(ctx context.Context) context.Context {
  return context.WithValue(ctx, &quot;idempotent&quot;, false)
}

func isIdempotent(ctx context.Context) bool {
  val, ok := ctx.Value(&quot;idempotent&quot;).(bool)
  if !ok {
    return true
  }
  return val
}
</code></pre><p>ç„¶ååœ¨æˆ‘ä»¬çš„ <code>clientInterceptor()</code> å®ç°ä¸­åŠ å…¥ <code>isIdempotent()</code> åˆ¤æ–­ï¼š<pre><code class=language-go>func clientInterceptor(...) error {
  var (
    start     = time.Now()
    attempts  = 0
    err       error
    backoff   retryBackOff
  )

  for {
    attempts += 1
    select {
    case &lt;-ctx.Done():
      err = status.Errorf(codes.DeadlineExceeded, &quot;timeout reached before next retry attempt&quot;)
    case &lt;-backoff.Next():
      startAttempt := time.Now()
      err = invoker(ctx, method, req, reply, cc, opts...)
      if err != nil &amp;&amp; isIdempotent(ctx) {
        log.Printf(...)
        continue
      }
    }
    break
  }
  log.Printf(...)
  return err
}
</code></pre><p>è¿™æ ·å½“è°ƒç”¨å¤±è´¥åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥å‘ç°æ˜¯å¹‚ç­‰çš„æƒ…å†µï¼Œæ‰é‡è¯•ï¼Œå¦åˆ™ä¸é‡è¯•ã€‚é¿å…äº†éå¹‚ç­‰æ“ä½œçš„åå¤æ“ä½œã€‚<h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-ç»“æ„åŒ–é”™è¯¯>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šç»“æ„åŒ–é”™è¯¯</h3><p>æ„Ÿè§‰æ²¡å•¥é—®é¢˜äº†ï¼Œäºæ˜¯éƒ¨ç½²ä¸Šçº¿äº†ã€‚å¯æ˜¯è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå‘ç°æœ‰äº›ä¸å¯¹åŠ²ã€‚æ‰€æœ‰æˆåŠŸçš„RPCè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ“ä½œæœ¬èº«æ˜¯æ­£ç¡®çš„ï¼Œéƒ½æ²¡æœ‰é—®é¢˜ï¼Œè¶…æ—¶é‡è¯•ä¹Ÿæ­£å¸¸ã€‚ä½†æ˜¯æ‰€æœ‰å¤±è´¥çš„ RPC è°ƒç”¨éƒ½ä¸å¯¹äº†ï¼Œæ‰€æœ‰å¤±è´¥çš„ RPC è°ƒç”¨ï¼Œéƒ½è¿”å›è¶…æ—¶ï¼Œè€Œä¸æ˜¯é”™è¯¯æœ¬èº«ã€‚è¿™é‡Œè¯´çš„å¤±è´¥ï¼Œä¸æ˜¯è¯´ç½‘ç»œé—®é¢˜å¯¼è‡´è¶…æ—¶å•¥çš„ï¼Œè€Œæ˜¯è¯´è¯·æ±‚æœ¬èº«çš„å¤±è´¥ï¼Œæ¯”å¦‚ä¹‹å‰æåˆ°çš„ï¼Œ<code>Get()</code> ä¸å­˜åœ¨çš„é”®ï¼Œåº”è¯¥è¿”å›é”™è¯¯ï¼›æˆ–è€… <code>Store()</code> è¶…è¿‡äº†é…é¢ï¼Œåº”è¯¥è¿”å›é”™è¯¯ï¼Œè¿™ç±»é”™è¯¯åœ¨æ—¥å¿—ä¸­éƒ½æ²¡çœ‹åˆ°ï¼Œåè€Œéƒ½å¯¹åº”äº†è¶…æ—¶ã€‚<p>ç»è¿‡åˆ†æå‘ç°ï¼ŒæœåŠ¡ç«¯è¯¥æŠ¥é”™éƒ½æŠ¥é”™ï¼Œæ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¸å¯¹ï¼Œæœ¬åº”è¯¥è¿”å›é”™è¯¯ç»™è°ƒç”¨æ–¹çš„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯ä»£ç åè€Œåˆå¼€å§‹é‡è¯•è¿™ä¸ªæ“ä½œäº†ã€‚çœ‹æ¥ä¹‹å‰é‡è¯•çš„ä»£ç è¿˜æœ‰é—®é¢˜ã€‚<pre><code class=language-go>      err = invoker(ctx, method, req, reply, cc, opts...)
      if err != nil &amp;&amp; isIdempotent(ctx) {
        log.Printf(...)
        continue
      }
</code></pre><p>å¦‚æœä»”ç»†è§‚å¯Ÿè¿™éƒ¨åˆ†ä»£ç ï¼Œä¼šå‘ç°ï¼Œæ— è®º <code>err</code> æ˜¯ä»€ä¹ˆï¼Œåªè¦é <code>nil</code>ï¼Œæˆ‘ä»¬å°±é‡è¯•ã€‚å…¶å®è¿™æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘ä»¬åªæœ‰é’ˆå¯¹æŸäº›é”™è¯¯é‡è¯•ï¼Œæ¯”å¦‚ç½‘ç»œé—®é¢˜ä¹‹ç±»çš„ï¼Œè€Œä¸åº”è¯¥å¯¹æˆ‘ä»¬å¸Œæœ›è¿”å›ç»™è°ƒç”¨æ–¹çš„é”™è¯¯é‡è¯•ï¼Œé‚£æ²¡æœ‰æ„ä¹‰ã€‚<p>é‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†ï¼Œæˆ‘ä»¬åˆ°åº•åº”è¯¥æ€ä¹ˆå¯¹ <code>err</code> åˆ¤æ–­æ¥å†³å®šæ˜¯å¦é‡è¯•ï¼Ÿ<ul><li>å¯ä»¥ä½¿ç”¨ä¸åŒçš„ Error Codeï¼Œç‰¹å®šçš„ Code éœ€è¦ Retryï¼Œå…¶å®ƒçš„ä¸éœ€è¦ï¼Œé‚£å°±éœ€è¦è‡ªå®šä¹‰ gRPC é”™è¯¯ç ï¼›<br><li>æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ª <code>Error</code> ç±»å‹çš„æ•°æ®ï¼Œé‡Œé¢åŒ…å«äº†æŸç§æ ‡å¿—ä½ï¼Œæ¥å‘ŠçŸ¥æ˜¯å¦å€¼å¾— retry<br><li>æˆ–è€…å¹²è„†æŠŠé”™è¯¯ç æ”¾åˆ° Response çš„æ¶ˆæ¯é‡Œï¼Œç¡®ä¿æ¯ä¸ªæ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªæˆ‘ä»¬å®šä¹‰çš„é”™è¯¯ç ï¼Œæ¥æ ‡æ˜æ˜¯å¦éœ€è¦ retryã€‚<br><br></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¸€ä¸ª Error Code å’Œå­—ç¬¦ä¸²ã€‚å½“ç„¶è¿™æ¡è·¯ä¸å¥½èµ°ï¼Œä½†æ˜¯æˆ‘ä»¬å·²ç»åšäº†è¿™ä¹ˆå¤šäº†ï¼ŒåšæŒä¸€ä¸‹è¿˜æ˜¯å¯ä»¥å…‹æœçš„ã€‚<p>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä» IDL å¼€å§‹ï¼š<pre><code class=language-protobuf>message Error {
  int64 code = 1;
  string messsage = 2;
  bool temporary = 3;
  int64 userErrorCode = 4;
}
</code></pre><p>ç„¶åæˆ‘ä»¬å®ç°è¿™ä¸ª Error ç±»å‹ã€‚<p><strong>rpc/error.go</strong><pre><code class=language-go>func (e *Error) Error() string {
  return e.Message
}
func Errorf(code codes.Code, temporary bool, msg string, args ..interface{}) error {
  return &amp;Error{
    Code:      int64(code),
    Message:   fmt.Sprintf(msg, args...),
    Temporary: temporary,
  }
}
</code></pre><p>æœ‰è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºå’Œæ„é€ è¿™ä¸ª <code>Error</code> ç±»å‹çš„å˜é‡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¯¥æ€ä¹ˆæŠŠé”™è¯¯æ¶ˆæ¯ä¼ å›å®¢æˆ·ç«¯å‘¢ï¼Ÿç„¶åé—®é¢˜å°±å¼€å§‹å˜çš„ç¹çèµ·æ¥äº†ï¼š<p><strong>rpc/error.go</strong><pre><code class=language-go>func MarshalError (err error, ctx context.Context) error {
  rerr, ok := err.(*Error)
  if !ok {
    return err
  }
  pberr, marshalerr := pb.Marshal(rerr)
  if marshalerr == nil {
    md := metadata.Pairs(&quot;rpc-error&quot;, base64.StdEncoding.EncodeToString(pberr))
    _ = grpc.SetTrailer(ctx, md)
  }
  return status.Errorf(codes.Code(rerr.Code), rerr.Message)
}
func UnmarshalError(err error, md metadata.MD) *Error {
  vals, ok := md[&quot;rpc-error&quot;]
  if !ok {
    return nil
  }
  buf, err := base64.StdEncoding.DecodeString(vals[0])
  if err != nil {
    return nil
  }
  var rerr Error
  if err := pb.Unmarshal(buf, &amp;rerr); err != nil {
    return nil
  }
  return &amp;rerr
}
</code></pre><p><strong>interceptor.go</strong><pre><code class=language-go>func serverInterceptor (
  ctx context.Context,
  req interface{},
  info *grpc.UnaryServerInfo,
  handler grpc.UnaryHandler,
) (interface{}, error) {
  start := time.Now()
  resp, err := handler(ctx, req)
  err = rpc.MarshalError(err, ctx)
  log.Print(...)
  return resp, err
}
</code></pre><p>it's uglyï¼Œbut works.<p>è¿™æ˜¯åœ¨ gRPC ä¸æ”¯æŒé«˜çº§ <code>Error</code> çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆå» work around è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”å‡‘åˆç”¨èµ·æ¥ã€‚ç°åœ¨è¿™ä¹ˆåšï¼Œé”™è¯¯å°±å¯ä»¥è·¨ä¸»æœºè¾¹ç•Œä¼ é€’äº†ã€‚<h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-dump>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šDump</h3><p>åˆæœ‰å®¢æˆ·å‰æ¥æéœ€æ±‚äº†ï¼Œæœ‰çš„å®¢æˆ·è¯´æˆ‘ä»¬å¯ä»¥å­˜ã€ä¹Ÿå¯ä»¥å–ï¼Œä½†æ˜¯å¦‚ä½•æ‰èƒ½æŠŠé‡Œé¢æ‰€æœ‰çš„æ•°æ®éƒ½è·å–ä¸‹æ¥ï¼Ÿäºæ˜¯æœ‰äº†éœ€æ±‚ï¼Œå¸Œæœ›å®ç° <code>Dump()</code> æ“ä½œï¼Œå¯ä»¥å–å›æ‰€æœ‰æ•°æ®ã€‚<p>ç°åœ¨å·²ç»è½»è½¦ç†Ÿè·¯äº†ï¼Œæˆ‘ä»¬å…ˆæ”¹ IDLï¼Œæ·»åŠ ä¸€ä¸ª <code>Dump()</code> å‡½æ•°ã€‚<pre><code class=language-go>service Cache {
  rpc Store(StoreReq) returns (StoreResp) {}
  rpc Get(GetReq) returns (GetResp) {}
  rpc Dump(DumpReq) returns (DumpResp) {}
}

message DumpReq{
}

message DumpResp {
  repeated DumpItem items = 1;
}

message DumpItem {
  string key = 1;
  bytes val = 2;
}
</code></pre><p>è¿™é‡Œ <code>DumpResp</code> é‡Œé¢ç”¨çš„æ˜¯ <code>repeated</code>ï¼Œå› ä¸º protobuf é‡Œé¢ä¸çŸ¥é“ä¸ºå•¥ä¸å« arrayã€‚<h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-æµé‡æ§åˆ¶>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šæµé‡æ§åˆ¶</h3><p>æ–°åŠŸèƒ½ Dump ä¸Šçº¿äº†ï¼Œç»“æœå‘ç°å¤§å®¶éƒ½å¾ˆå–œæ¬¢ Dumpï¼Œæœ‰å¾ˆå¤šäººåœ¨ Dumpï¼Œç»“æœæœåŠ¡å™¨çš„å†…å­˜å¼€å§‹ä¸å¤Ÿäº†ã€‚äºæ˜¯æˆ‘ä»¬éœ€è¦ä¸€äº›é™åˆ¶æ‰‹æ®µï¼Œå¯ä»¥æ§åˆ¶æµé‡ã€‚<p>æŸ¥é˜…äº†æ–‡æ¡£åï¼Œå‘ç°æˆ‘ä»¬å¯ä»¥æ§åˆ¶åŒæ—¶æœ€å¤§æœ‰å¤šå°‘å¹¶å‘å¯ä»¥è®¿é—®ï¼Œä»¥åŠå¯ä»¥å¤šé¢‘ç¹çš„æ¥è®¿é—®æœåŠ¡ã€‚<p><strong>server.go</strong><pre><code class=language-go>func runServer() error {
  ...
  srv := grpc.NewServer(grpc.Creds(tlsCreds),
    ServerInterceptor(),
    grpc.MaxConcurrentStreams(64),
    grpc.InTapHandle(NewTap().Handler))
  rpc.RegisterCacheServer(srv, NewCacheService(accounts))
  l, err := net.Listen(&quot;tcp&quot;, &quot;localhost:5051&quot;)
  if err != nil {
    return err
  }
  l = netutil.LimitListener(l, 1024)
  return srv.Serve(l)
}
</code></pre><p>è¿™é‡Œä½¿ç”¨äº† <code>netutil.LimitListener(l, 1024)</code> æ§åˆ¶äº†æ€»å…±å¯ä»¥æœ‰å¤šå°‘ä¸ªè¿æ¥ï¼Œç„¶åç”¨ <code>grpc.MaxConcurrentStreams(64)</code> æŒ‡å®šäº†æ¯ä¸ª grpc çš„è¿æ¥å¯ä»¥æœ‰å¤šå°‘ä¸ªå¹¶å‘æµ(stream)ã€‚è¿™ä¸¤ä¸ªç»“åˆèµ·æ¥åŸºæœ¬æ§åˆ¶äº†å¹¶å‘çš„æ€»æ•°ã€‚<p>ä½†æ˜¯ gRPC é‡Œæ²¡æœ‰åœ°æ–¹é™å®šå¯ä»¥å¤šé¢‘ç¹çš„è®¿é—®ã€‚å› æ­¤è¿™é‡Œç”¨äº† <code>grpc.InTapHandle(NewTap().Handler))</code> æ¥è¿›è¡Œå®šåˆ¶ï¼Œè¿™æ˜¯åœ¨æ›´é å‰çš„ä½ç½®æ‰§è¡Œçš„ã€‚<p><strong>tap.go</strong><pre><code class=language-go>type Tap struct {
  lim *rate.Limiter
}
func NewTap() *Tap {
  return &amp;Tap(rate.NewLimiter(150, 5))
}
func (t *Tap) Handler(ctx context.Context, info *tap.Info) (context.Context, error) {
  if !t.lim.Allow() {
    return nil, status.Errorf(codes.ResourceExhausted, &quot;service is over rate limit&quot;)
  }
  return ctx, nil
}
</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-streaming>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šStreaming</h3><p>ä¹‹å‰çš„æ–¹æ¡ˆéƒ¨ç½²åï¼Œå†…å­˜ç»ˆäºé™ä¸‹æ¥äº†ï¼Œä½†æ˜¯è¿˜æ²¡ä¼‘æ¯ï¼Œå°±å‘ç°å¤§å®¶è¶Šæ¥è¶Šå–œæ¬¢ç”¨è¿™ä¸ªç¼“å­˜æœåŠ¡ï¼Œå†…å­˜åˆä¸å¤Ÿç”¨äº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¼€å§‹æ€è€ƒï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è°ƒæ•´ä¸€ä¸‹è®¾è®¡ï¼Œä¸æ˜¯æ¯æ¬¡ Dump å°±ç«‹å³åœ¨å†…å­˜ç”Ÿæˆå®Œæ•´çš„è¿”å›æ•°ç»„ï¼Œè€Œæ˜¯ä»¥æµçš„å½¢å¼ï¼ŒæŒ‰éœ€å‘å›ã€‚<p><strong>app.proto</strong><pre><code class=language-go>syntax = &quot;proto3&quot;;
package rpc;

service Cache {
  rpc Store(StoreReq) returns (StoreResp) {}
  rpc Get(GetReq) returns (GetResp) {}
  rpc Dump(DumpReq) returns (stream DumpItem) {}
}

message DumpReq{
}

message DumpItem {
  string key = 1;
  bytes val = 2;
}
</code></pre><p>è¿™é‡Œä¸å†ä½¿ç”¨æ•°ç»„æ€§è´¨çš„ <code>repeated</code>ï¼Œè€Œæ˜¯ç”¨ <code>stream</code>ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ <code>Dump()</code> åï¼Œå°†ç»“æœä»¥æµçš„å½¢å¼å‘å›å»ã€‚<p><strong>server.go</strong><pre><code class=language-go>func (s *CacheService) Dump(req *rpc.DumpReq, stream rpc.Cache_DumpServer) error {
  for k, v := range s.store {
    stream.Send(&amp;rpc.DumpItem{
      Key: k,
      Val: v,
    })
  }
  return nil
}
</code></pre><p>æˆ‘ä»¬ä¿®æ”¹ <code>Dump()</code> çš„å®ç°ï¼Œå¯¹äºæ¯ä¸ªè®°å½•ï¼Œåˆ©ç”¨ <code>stream.Send()</code> å‘é€åˆ°æµã€‚<p>æ³¨æ„è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ <code>context</code>ï¼Œåªæœ‰ä¸ª <code>stream</code>ã€‚<p><strong>client.go</strong><pre><code class=language-go>func runClient() error {
  ...
  stream, err := cache.Dump(context.Background(), &amp;rpc.DumpReq{})
  if err != nil {
    return fmt.Errorf(&quot;failed to dump: %v&quot;, err)
  }
  for {
    item, err := stream.Recv()
    if err == io.EOF {
      break
    }
    if err != nil {
      return fmt.Errorf(&quot;failed to stream item: %v&quot;, err)
    }
  }
  return nil
}
</code></pre><h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-æ¨ªå‘æ‰©å±•-è´Ÿè½½å‡è¡¡>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šæ¨ªå‘æ‰©å±•ã€è´Ÿè½½å‡è¡¡</h3><p>ä½¿ç”¨æµåï¼ŒæœåŠ¡å™¨æ€§èƒ½æé«˜äº†å¾ˆå¤šï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬çš„æœåŠ¡å¤ªå¸å¼•äººäº†ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œç»“æœåˆå†…å­˜ä¸å¤Ÿäº†ã€‚è¿™æ—¶å€™æˆ‘ä»¬å®¡æŸ¥ä»£ç ï¼Œæ„Ÿè§‰èƒ½åšçš„äº‹æƒ…éƒ½åšäº†ï¼Œæˆ–è®¸æ˜¯æ—¶å€™ä»å•ä¸€æœåŠ¡å™¨ï¼Œæ‰©å±•ä¸ºå¤šä¸ªæœåŠ¡å™¨ï¼Œç„¶åä¹‹é—´ä½¿ç”¨è´Ÿè½½å‡è¡¡ã€‚<p>gRPC æ˜¯é•¿è¿æ¥æ€§è´¨çš„é€šè®¯ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥äº†ä¸€ä¸ª gRPC Endpointï¼Œé‚£ä¹ˆä»–å°±ä¼šä¸€ç›´è¿æ¥åˆ°ä¸€ä¸ªå›ºå®šçš„æœåŠ¡å™¨ï¼Œå› æ­¤å¤šæœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡å¯¹åŒä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¯´æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œä¸ä¼šå› ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯æœ‰å¤§é‡çš„è¯·æ±‚è€Œå¯¼è‡´åˆ†æ•£è¯·æ±‚åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šå»ã€‚<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›å®¢æˆ·ç«¯å¯ä»¥åˆ©ç”¨å¤šæœåŠ¡å™¨çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å°±éœ€è¦æ›´æ™ºèƒ½çš„å®¢æˆ·ç«¯ï¼Œè®©å®¢æˆ·ç«¯æ„è¯†åˆ°æœåŠ¡å™¨å­˜åœ¨å¤šä¸ªå‰¯æœ¬ï¼Œå› æ­¤å®¢æˆ·ç«¯å»ºç«‹å¤šæ¡è¿æ¥åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®©å•ä¸€å®¢æˆ·ç«¯åˆ©ç”¨è´Ÿè½½å‡è¡¡çš„æ¨ªå‘æ‰©å±•èƒ½åŠ›ã€‚<h3 id=ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹-å¤šè¯­è¨€åä½œ>ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼šå¤šè¯­è¨€åä½œ</h3><p>åœ¨å¤æ‚çš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ gRPC çš„å®¢æˆ·ç«¯ï¼ˆç”šè‡³æœåŠ¡ç«¯ï¼‰å¯èƒ½æ˜¯ä¸åŒè¯­è¨€å¹³å°çš„ã€‚è¿™å…¶å®æ˜¯ gRPC çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„å®ç°è·¨è¯­è¨€å¹³å°çš„é€šè®¯ã€‚<p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ª Python å®¢æˆ·ç«¯ï¼š<pre><code class=language-python>import grpc
import rpc_pb2 as rpc

channel = grpc.insecure_channel('localhost:5051')
cache_svc = rpc.CacheStub(channel)

resp = cache_svc.Get(rpc.GetReq(
  key=&quot;gopher&quot;,
))

print resp.val
</code></pre><p>ä¸€ä¸ªä¸æ˜¯å¾ˆçˆ½çš„åœ°æ–¹æ˜¯è™½ç„¶ gRPC çš„è·¨è¯­è¨€é€šè®¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å„ä¸ªè¯­è¨€çš„å®ç°éƒ½æ¯”è¾ƒéšæ„ï¼Œæ¯”å¦‚ Go ä¸­å«åš <code>CacheClient()</code>ï¼Œè€Œ Python ä¸­åˆ™å«åš <code>CacheStub()</code>ã€‚è¿™é‡Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åŸå› éä¸ä¸€æ ·çš„åå­—ï¼Œå°±æ˜¯ç”±äºä¸åŒçš„ä½œè€…å®ç°çš„æ—¶å€™æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•å‘½åçš„ã€‚<h2 id=grpc-å°šä¸å®Œç¾çš„åœ°æ–¹>gRPC å°šä¸å®Œç¾çš„åœ°æ–¹</h2><ul><li>è´Ÿè½½å‡è¡¡<br><li>ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯<br><li>è¿˜ä¸æ”¯æŒæµè§ˆå™¨çš„ JS ï¼ˆæŸç§è§’åº¦ä¸Šè®²ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„å®¢æˆ·ç«¯ï¼‰<br><li>è¿˜ç»å¸¸å‘ç”Ÿ API æ”¹å˜ï¼ˆå³ä½¿éƒ½1.0äº†ï¼‰<br><li>æŸäº›è¯­è¨€å®ç°çš„æ–‡æ¡£éå¸¸å·®<br><li>æ²¡æœ‰è·¨è¯­è¨€çš„æ ‡å‡†åŒ–çš„åšæ³•<br><br></ul><h2 id=grpc-åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç”¨ä¾‹>gRPC åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç”¨ä¾‹</h2><ul><li>ngrokï¼Œæ‰€æœ‰å†…éƒ¨20å¤šä¸ªé€šè®¯éƒ½èµ°çš„æ˜¯ gRPC<br><li>Squareï¼Œå°†å†…éƒ¨çš„é€šè®¯éƒ½æ¢æˆäº† gRPCï¼Œæ˜¯æœ€æ—©ä½¿ç”¨ gRPC çš„ç”¨æˆ·å’Œè´¡çŒ®è€…<br><li>CoreOSï¼Œetcd v3 å®Œå…¨èµ°çš„æ˜¯ gRPC<br><li>Googleï¼ŒGoogle Cloud Serviceï¼ˆPubSub, Speech Recï¼‰èµ°çš„æ˜¯ gRPC<br><li>Netflix, Yik Yak, VSCO, Cockroach, ...<br><br></ul><h2 id=grpc-æœªæ¥çš„å˜åŒ–>gRPC æœªæ¥çš„å˜åŒ–</h2><ul><li>æƒ³äº†è§£æœªæ¥çš„å˜åŒ–å¯ä»¥æŸ¥çœ‹ï¼š<br><ul><li><a href=https://github.com/grpc/proposal target=_blank>grpc/proposal</a><br><li><a href=https://groups.google.com/forum/#!forum/grpc-io target=_blank>grpc-io é‚®ä»¶åˆ—è¡¨</a><br></ul><li>æ–°çš„è¯­è¨€æ”¯æŒï¼ˆ<a href=https://github.com/grpc/grpc-swift target=_blank>Swift</a> å’Œ <a href=https://github.com/grpc/grpc-haskell target=_blank>Haskell</a>æ­£åœ¨è¯•éªŒé˜¶æ®µï¼‰<br><li>ç¨³å®šæ€§ã€å¯é æ€§ã€æ€§èƒ½çš„æé«˜<br><li>å¢åŠ æ›´å¤šç»†åŒ–çš„ API æ¥æ”¯æŒè‡ªå®šä¹‰çš„è¡Œä¸ºï¼ˆè¿æ¥ç®¡ç†ã€é¢‘é“è·Ÿè¸ªï¼‰<br><li>æµè§ˆå™¨çš„ JS<br></ul></div><div class=clear></div></div></div></article><div class=clear></div><p class=post-tags><span class="fa fa-tags">Tags:</span>
<a rel=tag href=../../../../tags/golang>golang</a><div id=related-posts><div class=related-inner></div></div><section id=comments class=themeform></section><section id=comments class=themeform></section></div></div><div class="sidebar s1 collapsed" data-position=left data-layout=col-3cm data-sb-id=s1><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>Follow:<ul class=social-links><li><a class=social-tooltip href=mailto: title=Email><i class="fa fa-envelope"></i></a><li><a class=social-tooltip href=//github.com/ title=GitHub><i class="fa fa-github"></i></a><li><a class=social-tooltip title="RSS Feed" aria-label="RSS Feed" href=../../../../feed target=_blank style=color:#ffffffb2><i class="fa fa-rss"></i></a></ul></div><ul class="post-nav group"><li class=previous><a href=../../../../language/golang/goher/2017-09-22-video-go-for-data-science/ rel=prev><i class="fa fa-chevron-left"></i><strong>Previous Post</strong>
<span>è§†é¢‘ç¬”è®°ï¼šGo æ•°æ®ç§‘å­¦ - Daniel Whitenack</span></a></ul><div id=categories-2 class="widget widget_categories"><h3>åˆ†ç±»</h3><ul><li class="cat-item cat-item-1"><a href=../../../../categories/ai/>Ai</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../../categories/algorithm/>Algorithm</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/android/>Android</a>
<small>(17)</small><li class="cat-item cat-item-1"><a href=../../../../categories/ansible/>Ansible</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/beats/>Beats</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/busybox/>Busybox</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/caffe/>Caffe</a>
<small>(21)</small><li class="cat-item cat-item-1"><a href=../../../../categories/cgo/>Cgo</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../../categories/clang/>Clang</a>
<small>(19)</small><li class="cat-item cat-item-1"><a href=../../../../categories/cmd/>Cmd</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/cpp/>Cpp</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../../categories/cross_compile/>Cross_compile</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../../categories/css/>Css</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/dart/>Dart</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/database/>Database</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/dataset/>Dataset</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/deeplearning/>Deeplearning</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/devops/>Devops</a>
<small>(70)</small><li class="cat-item cat-item-1"><a href=../../../../categories/docker/>Docker</a>
<small>(18)</small><li class="cat-item cat-item-1"><a href=../../../../categories/dts/>Dts</a>
<small>(5)</small><li class="cat-item cat-item-1"><a href=../../../../categories/elasticsearch/>Elasticsearch</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../../categories/english/>English</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/freertos/>Freertos</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/front-end/>Front-End</a>
<small>(20)</small><li class="cat-item cat-item-1"><a href=../../../../categories/golang/>Golang</a>
<small>(134)</small><li class="cat-item cat-item-1"><a href=../../../../categories/hacker/>Hacker</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/hardware/>Hardware</a>
<small>(14)</small><li class="cat-item cat-item-1"><a href=../../../../categories/hi3559/>Hi3559</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/hisi/>Hisi</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/hisilicon/>Hisilicon</a>
<small>(44)</small><li class="cat-item cat-item-1"><a href=../../../../categories/jetson/>Jetson</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/js/>Js</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../../categories/jumpserver/>Jumpserver</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/kernel/>Kernel</a>
<small>(14)</small><li class="cat-item cat-item-1"><a href=../../../../categories/linux/>Linux</a>
<small>(93)</small><li class="cat-item cat-item-1"><a href=../../../../categories/linux-%E5%91%BD%E4%BB%A4/>Linux-å‘½ä»¤</a>
<small>(120)</small><li class="cat-item cat-item-1"><a href=../../../../categories/mac/>Mac</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/machinelearn/>Machinelearn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/machinelearning/>Machinelearning</a>
<small>(11)</small><li class="cat-item cat-item-1"><a href=../../../../categories/macos/>Macos</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../../categories/math/>Math</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../../categories/matplotlib/>Matplotlib</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/mpp/>Mpp</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../../categories/mysql/>Mysql</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../../categories/ncnn/>Ncnn</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/network/>Network</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/nginx/>Nginx</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/nnie/>Nnie</a>
<small>(11)</small><li class="cat-item cat-item-1"><a href=../../../../categories/node/>Node</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/numpy/>Numpy</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../../categories/opencv/>Opencv</a>
<small>(10)</small><li class="cat-item cat-item-1"><a href=../../../../categories/pandas/>Pandas</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/platform/>Platform</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/post/>Post</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/pyqt/>Pyqt</a>
<small>(8)</small><li class="cat-item cat-item-1"><a href=../../../../categories/python/>Python</a>
<small>(30)</small><li class="cat-item cat-item-1"><a href=../../../../categories/pytorch/>Pytorch</a>
<small>(6)</small><li class="cat-item cat-item-1"><a href=../../../../categories/raspi/>Raspi</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../../categories/rk3288/>Rk3288</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../../categories/rk3399/>Rk3399</a>
<small>(9)</small><li class="cat-item cat-item-1"><a href=../../../../categories/rtmp/>Rtmp</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/scikit/>Scikit</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/shell/>Shell</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/tool/>Tool</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/weixin/>Weixin</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/windows/>Windows</a>
<small>(22)</small><li class="cat-item cat-item-1"><a href=../../../../categories/work/>Work</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/yolo/>Yolo</a>
<small>(12)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/>å‰ç«¯æŠ€æœ¯</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%8D%8F%E8%AE%AE/>åè®®</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/>åµŒå…¥å¼</a>
<small>(23)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%B7%A5%E5%85%B7/>å·¥å…·</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/>å¸¸ç”¨ç®—æ³•</a>
<small>(2)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/>å¾®æœåŠ¡</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/>æ’åˆ—ç»„åˆ</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/>æ•°æ®åº“</a>
<small>(37)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91/>æ–‡æœ¬ç¼–è¾‘</a>
<small>(30)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/>æ­£åˆ™è¡¨è¾¾å¼</a>
<small>(3)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E7%94%9F%E6%B4%BB%E6%8A%80%E5%B7%A7/>ç”Ÿæ´»æŠ€å·§</a>
<small>(4)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E7%A8%8B%E5%BA%8F%E5%91%98/>ç¨‹åºå‘˜</a>
<small>(1)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/>ç½‘ç»œå®‰å…¨</a>
<small>(40)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7/>é›†ç¾¤ç›‘æ§</a>
<small>(7)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/>é™æ€åšå®¢</a>
<small>(15)</small><li class="cat-item cat-item-1"><a href=../../../../categories/%E9%AB%98%E6%95%B0/>é«˜æ•°</a>
<small>(2)</small></ul></div></div></div><div class="sidebar s2 collapsed" data-position=right data-layout=col-3cm data-sb-id=s2><a class=sidebar-toggle title="Expand Sidebar"><i class="fas icon-sidebar-toggle"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>More</div><ul class="post-nav group"><li class=next><a href=../../../../language/golang/goher/2017-09-23-video-packet-capture-analysis-with-go/ rel=next><i class="fa fa-chevron-right"></i><strong>Next post</strong>
<span>è§†é¢‘ç¬”è®°ï¼šGo æŠ“åŒ…ã€åˆ†æã€æ³¨å…¥ - John Leon</span></a></ul><div id=tag_cloud-2 class="widget widget_tag_cloud"><h3>æ ‡ç­¾äº‘</h3><div class="tagcloud post-tags"><a rel=tag href=../../../../tags/ai/ class=tag-link-7 title="1 Posts">ai<small>(7)</small></a>
<a rel=tag href=../../../../tags/ansible/ class=tag-link-19 title="1 Posts">ansible<small>(19)</small></a>
<a rel=tag href=../../../../tags/awesome/ class=tag-link-3 title="1 Posts">awesome<small>(3)</small></a>
<a rel=tag href=../../../../tags/bfc/ class=tag-link-2 title="1 Posts">bfc<small>(2)</small></a>
<a rel=tag href=../../../../tags/c/ class=tag-link-5 title="1 Posts">c<small>(5)</small></a>
<a rel=tag href=../../../../tags/caffe/ class=tag-link-21 title="1 Posts">caffe<small>(21)</small></a>
<a rel=tag href=../../../../tags/centos7/ class=tag-link-2 title="1 Posts">centos7<small>(2)</small></a>
<a rel=tag href=../../../../tags/cgo/ class=tag-link-10 title="1 Posts">cgo<small>(10)</small></a>
<a rel=tag href=../../../../tags/clang/ class=tag-link-19 title="1 Posts">clang<small>(19)</small></a>
<a rel=tag href=../../../../tags/cmd/ class=tag-link-2 title="1 Posts">cmd<small>(2)</small></a>
<a rel=tag href=../../../../tags/cpp/ class=tag-link-6 title="1 Posts">cpp<small>(6)</small></a>
<a rel=tag href=../../../../tags/cross_compile/ class=tag-link-8 title="1 Posts">cross_compile<small>(8)</small></a>
<a rel=tag href=../../../../tags/css/ class=tag-link-20 title="1 Posts">css<small>(20)</small></a>
<a rel=tag href=../../../../tags/css3/ class=tag-link-2 title="1 Posts">css3<small>(2)</small></a>
<a rel=tag href=../../../../tags/curd/ class=tag-link-3 title="1 Posts">curd<small>(3)</small></a>
<a rel=tag href=../../../../tags/curl/ class=tag-link-2 title="1 Posts">curl<small>(2)</small></a>
<a rel=tag href=../../../../tags/dataset/ class=tag-link-2 title="1 Posts">dataset<small>(2)</small></a>
<a rel=tag href=../../../../tags/devops/ class=tag-link-3 title="1 Posts">devops<small>(3)</small></a>
<a rel=tag href=../../../../tags/docker/ class=tag-link-21 title="1 Posts">docker<small>(21)</small></a>
<a rel=tag href=../../../../tags/drone/ class=tag-link-22 title="1 Posts">drone<small>(22)</small></a>
<a rel=tag href=../../../../tags/dts/ class=tag-link-6 title="1 Posts">dts<small>(6)</small></a>
<a rel=tag href=../../../../tags/elasticsearch/ class=tag-link-9 title="1 Posts">elasticsearch<small>(9)</small></a>
<a rel=tag href=../../../../tags/emacs/ class=tag-link-12 title="1 Posts">emacs<small>(12)</small></a>
<a rel=tag href=../../../../tags/encode/ class=tag-link-3 title="1 Posts">encode<small>(3)</small></a>
<a rel=tag href=../../../../tags/english/ class=tag-link-8 title="1 Posts">english<small>(8)</small></a>
<a rel=tag href=../../../../tags/es6/ class=tag-link-2 title="1 Posts">es6<small>(2)</small></a>
<a rel=tag href=../../../../tags/etcd/ class=tag-link-4 title="1 Posts">etcd<small>(4)</small></a>
<a rel=tag href=../../../../tags/flannel/ class=tag-link-2 title="1 Posts">flannel<small>(2)</small></a>
<a rel=tag href=../../../../tags/git/ class=tag-link-6 title="1 Posts">git<small>(6)</small></a>
<a rel=tag href=../../../../tags/github/ class=tag-link-2 title="1 Posts">github<small>(2)</small></a>
<a rel=tag href=../../../../tags/golang/ class=tag-link-148 title="1 Posts">golang<small>(148)</small></a>
<a rel=tag href=../../../../tags/gradle/ class=tag-link-3 title="1 Posts">gradle<small>(3)</small></a>
<a rel=tag href=../../../../tags/haproxy/ class=tag-link-5 title="1 Posts">haproxy<small>(5)</small></a>
<a rel=tag href=../../../../tags/hardware/ class=tag-link-14 title="1 Posts">hardware<small>(14)</small></a>
<a rel=tag href=../../../../tags/hexo/ class=tag-link-3 title="1 Posts">hexo<small>(3)</small></a>
<a rel=tag href=../../../../tags/hisilicon/ class=tag-link-44 title="1 Posts">hisilicon<small>(44)</small></a>
<a rel=tag href=../../../../tags/html/ class=tag-link-2 title="1 Posts">html<small>(2)</small></a>
<a rel=tag href=../../../../tags/http/ class=tag-link-6 title="1 Posts">http<small>(6)</small></a>
<a rel=tag href=../../../../tags/hugo/ class=tag-link-14 title="1 Posts">hugo<small>(14)</small></a>
<a rel=tag href=../../../../tags/imagemagick/ class=tag-link-2 title="1 Posts">imagemagick<small>(2)</small></a>
<a rel=tag href=../../../../tags/ip/ class=tag-link-3 title="1 Posts">ip<small>(3)</small></a>
<a rel=tag href=../../../../tags/iproute2/ class=tag-link-5 title="1 Posts">iproute2<small>(5)</small></a>
<a rel=tag href=../../../../tags/iptables/ class=tag-link-17 title="1 Posts">iptables<small>(17)</small></a>
<a rel=tag href=../../../../tags/javascript/ class=tag-link-19 title="1 Posts">javascript<small>(19)</small></a>
<a rel=tag href=../../../../tags/jetson/ class=tag-link-3 title="1 Posts">jetson<small>(3)</small></a>
<a rel=tag href=../../../../tags/jquery/ class=tag-link-12 title="1 Posts">jquery<small>(12)</small></a>
<a rel=tag href=../../../../tags/js/ class=tag-link-10 title="1 Posts">js<small>(10)</small></a>
<a rel=tag href=../../../../tags/jumpserver/ class=tag-link-2 title="1 Posts">jumpserver<small>(2)</small></a>
<a rel=tag href=../../../../tags/jwt/ class=tag-link-3 title="1 Posts">jwt<small>(3)</small></a>
<a rel=tag href=../../../../tags/kernel/ class=tag-link-14 title="1 Posts">kernel<small>(14)</small></a>
<a rel=tag href=../../../../tags/kubernetes/ class=tag-link-11 title="1 Posts">kubernetes<small>(11)</small></a>
<a rel=tag href=../../../../tags/linux/ class=tag-link-21 title="1 Posts">linux<small>(21)</small></a>
<a rel=tag href=../../../../tags/lvs/ class=tag-link-8 title="1 Posts">lvs<small>(8)</small></a>
<a rel=tag href=../../../../tags/machinelearn/ class=tag-link-3 title="1 Posts">machinelearn<small>(3)</small></a>
<a rel=tag href=../../../../tags/machinelearning/ class=tag-link-11 title="1 Posts">machinelearning<small>(11)</small></a>
<a rel=tag href=../../../../tags/macos/ class=tag-link-14 title="1 Posts">macos<small>(14)</small></a>
<a rel=tag href=../../../../tags/makefile/ class=tag-link-2 title="1 Posts">makefile<small>(2)</small></a>
<a rel=tag href=../../../../tags/mariadb/ class=tag-link-9 title="1 Posts">mariadb<small>(9)</small></a>
<a rel=tag href=../../../../tags/math/ class=tag-link-7 title="1 Posts">math<small>(7)</small></a>
<a rel=tag href=../../../../tags/matplotlib/ class=tag-link-3 title="1 Posts">matplotlib<small>(3)</small></a>
<a rel=tag href=../../../../tags/maven/ class=tag-link-2 title="1 Posts">maven<small>(2)</small></a>
<a rel=tag href=../../../../tags/meteor/ class=tag-link-7 title="1 Posts">meteor<small>(7)</small></a>
<a rel=tag href=../../../../tags/ml/ class=tag-link-3 title="1 Posts">ml<small>(3)</small></a>
<a rel=tag href=../../../../tags/mpp/ class=tag-link-9 title="1 Posts">mpp<small>(9)</small></a>
<a rel=tag href=../../../../tags/mysql/ class=tag-link-61 title="1 Posts">mysql<small>(61)</small></a>
<a rel=tag href=../../../../tags/ncnn/ class=tag-link-3 title="1 Posts">ncnn<small>(3)</small></a>
<a rel=tag href=../../../../tags/netns/ class=tag-link-2 title="1 Posts">netns<small>(2)</small></a>
<a rel=tag href=../../../../tags/network/ class=tag-link-2 title="1 Posts">network<small>(2)</small></a>
<a rel=tag href=../../../../tags/nginx/ class=tag-link-28 title="1 Posts">nginx<small>(28)</small></a>
<a rel=tag href=../../../../tags/nmap/ class=tag-link-2 title="1 Posts">nmap<small>(2)</small></a>
<a rel=tag href=../../../../tags/nnie/ class=tag-link-11 title="1 Posts">nnie<small>(11)</small></a>
<a rel=tag href=../../../../tags/node/ class=tag-link-4 title="1 Posts">node<small>(4)</small></a>
<a rel=tag href=../../../../tags/nosql/ class=tag-link-8 title="1 Posts">nosql<small>(8)</small></a>
<a rel=tag href=../../../../tags/npm/ class=tag-link-3 title="1 Posts">npm<small>(3)</small></a>
<a rel=tag href=../../../../tags/numpy/ class=tag-link-4 title="1 Posts">numpy<small>(4)</small></a>
<a rel=tag href=../../../../tags/oauth2/ class=tag-link-2 title="1 Posts">oauth2<small>(2)</small></a>
<a rel=tag href=../../../../tags/opencv/ class=tag-link-10 title="1 Posts">opencv<small>(10)</small></a>
<a rel=tag href=../../../../tags/openssl/ class=tag-link-3 title="1 Posts">openssl<small>(3)</small></a>
<a rel=tag href=../../../../tags/pandoc/ class=tag-link-2 title="1 Posts">pandoc<small>(2)</small></a>
<a rel=tag href=../../../../tags/php/ class=tag-link-4 title="1 Posts">php<small>(4)</small></a>
<a rel=tag href=../../../../tags/post/ class=tag-link-4 title="1 Posts">post<small>(4)</small></a>
<a rel=tag href=../../../../tags/powershell/ class=tag-link-2 title="1 Posts">powershell<small>(2)</small></a>
<a rel=tag href=../../../../tags/prometheus/ class=tag-link-8 title="1 Posts">prometheus<small>(8)</small></a>
<a rel=tag href=../../../../tags/pyqt/ class=tag-link-8 title="1 Posts">pyqt<small>(8)</small></a>
<a rel=tag href=../../../../tags/python/ class=tag-link-32 title="1 Posts">python<small>(32)</small></a>
<a rel=tag href=../../../../tags/pytorch/ class=tag-link-6 title="1 Posts">pytorch<small>(6)</small></a>
<a rel=tag href=../../../../tags/raspi/ class=tag-link-4 title="1 Posts">raspi<small>(4)</small></a>
<a rel=tag href=../../../../tags/redis/ class=tag-link-2 title="1 Posts">redis<small>(2)</small></a>
<a rel=tag href=../../../../tags/reflect/ class=tag-link-3 title="1 Posts">reflect<small>(3)</small></a>
<a rel=tag href=../../../../tags/responsive/ class=tag-link-2 title="1 Posts">responsive<small>(2)</small></a>
<a rel=tag href=../../../../tags/restful/ class=tag-link-6 title="1 Posts">restful<small>(6)</small></a>
<a rel=tag href=../../../../tags/rk3288/ class=tag-link-22 title="1 Posts">rk3288<small>(22)</small></a>
<a rel=tag href=../../../../tags/rk3399/ class=tag-link-9 title="1 Posts">rk3399<small>(9)</small></a>
<a rel=tag href=../../../../tags/route/ class=tag-link-2 title="1 Posts">route<small>(2)</small></a>
<a rel=tag href=../../../../tags/rsync/ class=tag-link-2 title="1 Posts">rsync<small>(2)</small></a>
<a rel=tag href=../../../../tags/rtmp/ class=tag-link-2 title="1 Posts">rtmp<small>(2)</small></a>
<a rel=tag href=../../../../tags/scikit/ class=tag-link-3 title="1 Posts">scikit<small>(3)</small></a>
<a rel=tag href=../../../../tags/scrapy/ class=tag-link-8 title="1 Posts">scrapy<small>(8)</small></a>
<a rel=tag href=../../../../tags/scss/ class=tag-link-2 title="1 Posts">scss<small>(2)</small></a>
<a rel=tag href=../../../../tags/sed/ class=tag-link-3 title="1 Posts">sed<small>(3)</small></a>
<a rel=tag href=../../../../tags/seo/ class=tag-link-5 title="1 Posts">seo<small>(5)</small></a>
<a rel=tag href=../../../../tags/shell/ class=tag-link-10 title="1 Posts">shell<small>(10)</small></a>
<a rel=tag href=../../../../tags/sqlite/ class=tag-link-2 title="1 Posts">sqlite<small>(2)</small></a>
<a rel=tag href=../../../../tags/ssh/ class=tag-link-3 title="1 Posts">ssh<small>(3)</small></a>
<a rel=tag href=../../../../tags/stm32/ class=tag-link-5 title="1 Posts">stm32<small>(5)</small></a>
<a rel=tag href=../../../../tags/swagger/ class=tag-link-2 title="1 Posts">swagger<small>(2)</small></a>
<a rel=tag href=../../../../tags/swarm/ class=tag-link-2 title="1 Posts">swarm<small>(2)</small></a>
<a rel=tag href=../../../../tags/sysbench/ class=tag-link-2 title="1 Posts">sysbench<small>(2)</small></a>
<a rel=tag href=../../../../tags/sysctl/ class=tag-link-2 title="1 Posts">sysctl<small>(2)</small></a>
<a rel=tag href=../../../../tags/systemctl/ class=tag-link-2 title="1 Posts">systemctl<small>(2)</small></a>
<a rel=tag href=../../../../tags/tc/ class=tag-link-2 title="1 Posts">tc<small>(2)</small></a>
<a rel=tag href=../../../../tags/tcpdump/ class=tag-link-2 title="1 Posts">tcpdump<small>(2)</small></a>
<a rel=tag href=../../../../tags/timezone/ class=tag-link-2 title="1 Posts">timezone<small>(2)</small></a>
<a rel=tag href=../../../../tags/tshark/ class=tag-link-2 title="1 Posts">tshark<small>(2)</small></a>
<a rel=tag href=../../../../tags/ubuntu/ class=tag-link-2 title="1 Posts">ubuntu<small>(2)</small></a>
<a rel=tag href=../../../../tags/ulimit/ class=tag-link-2 title="1 Posts">ulimit<small>(2)</small></a>
<a rel=tag href=../../../../tags/vim/ class=tag-link-14 title="1 Posts">vim<small>(14)</small></a>
<a rel=tag href=../../../../tags/webpack3/ class=tag-link-2 title="1 Posts">webpack3<small>(2)</small></a>
<a rel=tag href=../../../../tags/windows/ class=tag-link-18 title="1 Posts">windows<small>(18)</small></a>
<a rel=tag href=../../../../tags/wireshark/ class=tag-link-2 title="1 Posts">wireshark<small>(2)</small></a>
<a rel=tag href=../../../../tags/xidel/ class=tag-link-2 title="1 Posts">xidel<small>(2)</small></a>
<a rel=tag href=../../../../tags/xml/ class=tag-link-2 title="1 Posts">xml<small>(2)</small></a>
<a rel=tag href=../../../../tags/yaml/ class=tag-link-2 title="1 Posts">yaml<small>(2)</small></a>
<a rel=tag href=../../../../tags/yolo/ class=tag-link-12 title="1 Posts">yolo<small>(12)</small></a>
<a rel=tag href=../../../../tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/ class=tag-link-2 title="1 Posts">å¾®æœåŠ¡<small>(2)</small></a></div></div></div></div>`</div></div></div></div></div><script>var HUParams={"_disabled":[],"SmoothScroll":{"Enabled":true,"Options":{"touchpadSupport":false}},"centerAllImg":"1","timerOnScrollAllBrowsers":"1","extLinksStyle":"1","extLinksTargetExt":"1","extLinksSkipSelectors":{"classes":["btn","button"],"ids":[]},"imgSmartLoadEnabled":"1","imgSmartLoadOpts":{"parentSelectors":[".container .content",".container .sidebar","#footer","#header-widgets"],"opts":{"excludeImg":[".tc-holder-img"],"fadeIn_options":100}},"goldenRatio":"1.618","gridGoldenRatioLimit":"350","sbStickyUserSettings":{"desktop":true,"mobile":true},"isWPMobile":"","menuStickyUserSettings":{"desktop":"stick_up","mobile":"stick_up"},"isDevMode":"","ajaxUrl":"https:\/\/demo-hueman.presscustomizr.com\/?huajax=1","frontNonce":{"id":"HuFrontNonce","handle":"798e5956c0"},"userStarted":{"with":"before|1.0.4","on":{"date":"2017-05-22 16:30:22.000000","timezone_type":3,"timezone":"UTC"}},"isWelcomeNoteOn":"","welcomeContent":""};</script><script src=https://cdn.bootcss.com/lodash-compat/3.10.2/lodash.min.js></script><script src=https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js></script><script src=../../../../front/js/scripts.js></script><footer id=footer><section class=container id=footer-bottom><div class=container-inner><a id=back-to-top href=#><i class="fa fa-angle-up"></i></a><div class="pad group"><div class="grid one-half"><div id=copyright><p>Copyright (c) 2017. All rights reserved. (ç‰ˆæƒæ‰€æœ‰) <a href=http://www.miitbeian.gov.cn/>é²ICPå¤‡17074587å·-1</a></div></div><div class="grid one-half last"><ul class=social-links><li><a class=social-tooltip title="On WeiBo" href=http://weibo.com/rinetd target=_blank><i class="fa fa-weibo"></i></a><li><a class=social-tooltip title="On Twitter" href=https://twitter.com/rinetd target=_blank><i class="fa fa-twitter"></i></a><li><a class=social-tooltip title="On GitHub" href=https://github.com/rinetd target=_blank><i class="fa fa-github"></i></a></ul></div></div></div></section></footer><div class=back-to-top id=back-to-top><i class="fa fa-angle-double-up"></i></div><script>$(".topbar-toggle-down").click(function(){$("#nav-topbar").css("overflow","visible");});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5HM5XM2" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5HM5XM2');</script>